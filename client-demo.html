<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Client Website - Picasso Widget Demo</title>
  <style>
    /* Aggressive host page styles that would break non-iframe widgets */
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: Georgia, serif;
      background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
      margin: 0;
      padding: 20px;
      min-height: 100vh;
    }
    
    .hero {
      background: white;
      padding: 60px 40px;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
      max-width: 800px;
      margin: 40px auto;
      text-align: center;
    }
    
    h1 {
      color: #2c3e50;
      font-size: 3em;
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .subtitle {
      color: #7f8c8d;
      font-size: 1.2em;
      margin-bottom: 40px;
      line-height: 1.6;
    }
    
    .features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 30px;
      margin: 40px 0;
    }
    
    .feature {
      background: #f8f9fa;
      padding: 30px;
      border-radius: 15px;
      border-left: 5px solid #3498db;
    }
    
    .feature h3 {
      color: #2c3e50;
      margin-bottom: 15px;
    }
    
    .feature p {
      color: #555;
      line-height: 1.6;
    }
    
    .embed-demo {
      background: #1a1a1a;
      color: #a0a0a0;
      padding: 20px;
      border-radius: 10px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      margin: 30px 0;
      border: 2px solid #333;
    }
    
    .embed-demo .code {
      color: #4ecdc4;
    }
    
    .status {
      background: #e8f5e8;
      border: 2px solid #4caf50;
      color: #2e7d32;
      padding: 15px;
      border-radius: 10px;
      margin: 20px 0;
      font-weight: bold;
    }
    
    .hostile-styles {
      /* Ultra-aggressive CSS that would destroy most widgets */
      * {
        border: 10px solid red !important;
        background: yellow !important;
        color: purple !important;
        margin: 50px !important;
        padding: 30px !important;
        transform: rotate(15deg) !important;
        font-size: 30px !important;
      }
    }
    
    button {
      background: #3498db;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      margin: 10px;
      transition: background 0.3s;
    }
    
    button:hover {
      background: #2980b9;
    }
    
    .danger {
      background: #e74c3c;
    }
    
    .danger:hover {
      background: #c0392b;
    }
  </style>
</head>
<body>
  <div class="hero">
    <h1>üåü MyRecruiter Client Site</h1>
    <p class="subtitle">
      This is a sample client website demonstrating the Picasso chat widget integration.
      The widget provides complete CSS isolation through iframe architecture.
    </p>
    
    <div class="status" id="widget-status">
      ‚è≥ Initializing Picasso widget...
    </div>
    
    <div class="features">
      <div class="feature">
        <h3>üîí Complete Isolation</h3>
        <p>The iframe architecture ensures zero CSS conflicts with your existing website styles.</p>
      </div>
      
      <div class="feature">
        <h3>üì± Responsive Design</h3>
        <p>Automatically adapts to mobile devices with fullscreen overlay behavior.</p>
      </div>
      
      <div class="feature">
        <h3>‚ö° Lightning Fast</h3>
        <p>Loads in under 500ms with optimized caching and minimal resource usage.</p>
      </div>
    </div>
    
    <h3>Integration Code</h3>
    <div class="embed-demo">
      <span class="code">&lt;script src="https://chat.myrecruiter.ai/widget.js" 
        data-tenant="fo85e6a06dcdf4"&gt;&lt;/script&gt;</span>
    </div>
    
    <div style="margin: 30px 0;">
      <button onclick="testWidgetCommands()">Test Widget Commands</button>
      <button onclick="toggleHostileStyles()" class="danger" id="hostile-btn">
        Enable Hostile CSS (Test Isolation)
      </button>
    </div>
    
    <div id="test-results" style="margin-top: 20px;"></div>
  </div>

  <!-- The actual Picasso widget embed - this is all a client needs! -->
  <script src="http://localhost:52794/widget.js" data-tenant="fo85e6a06dcdf4"></script>

  <script>
    let widget = null;
    let hostileMode = false;
    
    // Listen for widget events
    window.addEventListener('picasso:ready', (event) => {
      console.log('‚úÖ Picasso widget ready:', event.detail);
      widget = window.__picassoWidget;
      
      document.getElementById('widget-status').innerHTML = 
        '‚úÖ Picasso widget successfully loaded and ready!';
      document.getElementById('widget-status').style.background = '#e8f5e8';
      document.getElementById('widget-status').style.borderColor = '#4caf50';
      document.getElementById('widget-status').style.color = '#2e7d32';
    });
    
    window.addEventListener('picasso:opened', () => {
      console.log('üìÇ Chat opened');
      updateTestResults('Chat opened successfully');
    });
    
    window.addEventListener('picasso:closed', () => {
      console.log('üìÅ Chat closed');
      updateTestResults('Chat closed successfully');
    });
    
    // Listen for iframe communication
    window.addEventListener('message', (event) => {
      if (event.data.type === 'PICASSO_EVENT') {
        console.log('üì° Widget event:', event.data);
        updateTestResults(`Iframe event: ${event.data.event}`);
      }
    });
    
    function testWidgetCommands() {
      if (!widget) {
        updateTestResults('‚ùå Widget not ready');
        return;
      }
      
      updateTestResults('üß™ Testing widget commands...');
      
      // Test open command
      setTimeout(() => {
        widget.openChat();
        updateTestResults('üì§ Sent open command');
      }, 500);
      
      // Test close command
      setTimeout(() => {
        widget.closeChat();
        updateTestResults('üì§ Sent close command');
      }, 2000);
    }
    
    function toggleHostileStyles() {
      const btn = document.getElementById('hostile-btn');
      
      if (!hostileMode) {
        document.body.classList.add('hostile-styles');
        btn.textContent = 'Disable Hostile CSS';
        btn.style.background = '#27ae60';
        hostileMode = true;
        updateTestResults('üî¥ Hostile CSS enabled - widget should remain unaffected');
      } else {
        document.body.classList.remove('hostile-styles');
        btn.textContent = 'Enable Hostile CSS (Test Isolation)';
        btn.style.background = '#e74c3c';
        hostileMode = false;
        updateTestResults('üü¢ Hostile CSS disabled');
      }
    }
    
    function updateTestResults(message) {
      const container = document.getElementById('test-results');
      const timestamp = new Date().toLocaleTimeString();
      container.innerHTML += `<div style="background: #f8f9fa; padding: 8px; margin: 5px 0; border-radius: 5px; border-left: 3px solid #3498db;">
        <strong>${timestamp}:</strong> ${message}
      </div>`;
    }
    
    // Error handling
    window.addEventListener('error', (event) => {
      updateTestResults(`‚ùå Error: ${event.message}`);
    });
    
    // Initial status
    updateTestResults('üöÄ Client demo page loaded');
  </script>
</body>
</html> 