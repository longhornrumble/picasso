{
  "testSuites": [
    {
      "name": "Cross-Tenant Isolation Tests",
      "type": "python",
      "path": "lambda-review/tests/test_cross_tenant_isolation.py",
      "description": "Validates 0% cross-tenant access success rate",
      "criticalForPlan": true,
      "validatesRequirements": [
        "JWT tokens expire in ≤15 minutes",
        "Tenant inference never uses client input",
        "Cross-tenant access blocked (0% success rate)"
      ],
      "status": "failed",
      "executionTime": 905,
      "testCount": 0,
      "passedTests": 0,
      "failedTests": 0,
      "skippedTests": 0,
      "errors": [],
      "output": "",
      "validationResults": {
        "validated": false,
        "reason": "Test suite failed or no requirements specified"
      }
    },
    {
      "name": "State Clearing Compliance Tests",
      "type": "python",
      "path": "lambda-review/tests/test_state_clearing_compliance.py",
      "description": "Validates HIPAA compliance and data purging",
      "criticalForPlan": true,
      "validatesRequirements": [
        "/state/clear endpoint functional",
        "Audit events for all operations",
        "No full message persistence beyond 24h"
      ],
      "status": "failed",
      "executionTime": 355,
      "testCount": 0,
      "passedTests": 0,
      "failedTests": 0,
      "skippedTests": 0,
      "errors": [],
      "output": "",
      "validationResults": {
        "validated": false,
        "reason": "Test suite failed or no requirements specified"
      }
    },
    {
      "name": "JWT/Function URL Integration Tests",
      "type": "python",
      "path": "lambda-review/tests/test_jwt_function_url_integration.py",
      "description": "Validates end-to-end JWT authentication flow",
      "criticalForPlan": true,
      "validatesRequirements": [
        "Function URLs with AuthType: NONE",
        "Internal JWT validation working",
        "JWT generation: <500ms"
      ],
      "status": "failed",
      "executionTime": 374,
      "testCount": 0,
      "passedTests": 0,
      "failedTests": 0,
      "skippedTests": 0,
      "errors": [],
      "output": "",
      "validationResults": {
        "validated": false,
        "reason": "Test suite failed or no requirements specified"
      }
    },
    {
      "name": "Performance Validation Tests",
      "type": "python",
      "path": "lambda-review/tests/test_performance_validation.py",
      "description": "Validates all performance timing requirements",
      "criticalForPlan": true,
      "validatesRequirements": [
        "JWT generation: <500ms",
        "Streaming first token: <1000ms",
        "State clearing: <200ms",
        "Summary retrieval: <300ms"
      ],
      "status": "failed",
      "executionTime": 392,
      "testCount": 0,
      "passedTests": 0,
      "failedTests": 0,
      "skippedTests": 0,
      "errors": [],
      "output": "",
      "validationResults": {
        "validated": false,
        "reason": "Test suite failed or no requirements specified"
      }
    },
    {
      "name": "Mobile Safari SSE Tests",
      "type": "javascript",
      "path": "src/test/mobile-safari-sse.test.js",
      "description": "Validates Safari streaming compatibility",
      "criticalForPlan": true,
      "validatesRequirements": [
        "Mobile Safari SSE compatibility confirmed",
        "Keep-alive heartbeats implemented"
      ],
      "status": "failed",
      "executionTime": 4861,
      "testCount": 24,
      "passedTests": 20,
      "failedTests": 4,
      "skippedTests": 0,
      "errors": [
        "should not detect Chrome as Safari: AssertionError: expected true to be false // Object.is equality\n    at /Users/chrismiller/Desktop/build-process/picasso-main/src/test/mobile-safari-sse.test.js:387:44\n    at file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:146:14\n    at file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:533:11\n    at runWithTimeout (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:39:7)\n    at runTest (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1056:17)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runSuite (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1262:5)",
        "should reconnect automatically on connection drop: AssertionError: expected 0 to be greater than 0\n    at /Users/chrismiller/Desktop/build-process/picasso-main/src/test/mobile-safari-sse.test.js:527:36\n    at file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1262:5)\n    at startTests (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1271:3)\n    at file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/vitest/dist/chunks/runBaseTests.3qpJUEJM.js:126:11\n    at withEnv (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/vitest/dist/chunks/runBaseTests.3qpJUEJM.js:90:5)",
        "should maintain connection in background for limited time: AssertionError: expected 0 to be greater than 0\n    at /Users/chrismiller/Desktop/build-process/picasso-main/src/test/mobile-safari-sse.test.js:631:39\n    at file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1262:5)\n    at startTests (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1271:3)\n    at file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/vitest/dist/chunks/runBaseTests.3qpJUEJM.js:126:11\n    at withEnv (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/vitest/dist/chunks/runBaseTests.3qpJUEJM.js:90:5)",
        "should cleanup resources on disconnect: AssertionError: expected 0 to be greater than 0\n    at /Users/chrismiller/Desktop/build-process/picasso-main/src/test/mobile-safari-sse.test.js:785:29\n    at file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:146:14\n    at file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:533:11\n    at runWithTimeout (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:39:7)\n    at runTest (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1056:17)\n    at runSuite (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1262:5)\n    at startTests (file:///Users/chrismiller/Desktop/build-process/picasso-main/node_modules/@vitest/runner/dist/index.js:1271:3)"
      ],
      "output": "\n RUN  v2.1.9 /Users/chrismiller/Desktop/build-process/picasso-main\n\n ✓ src/test/mobile-safari-sse.test.js > Mobile Safari SSE Compatibility > Safari Detection > should detect mobile Safari correctly\n ✓ src/test/mobile-safari-sse.test.js > Mobile Safari SSE Compatibility > Safari Detection > should detect desktop Safari correctly\n × src/test/mobile-safari-sse.test.js > Mobile Safari SSE Compatibility > Safari Detection > should not detect Chrome as Safari\n   → expected true to be false // Object.is equality\n ✓ src/test/mobile-safari-sse.test.js > Mobile Safari SSE Compatibility > SSE Connection Establishment > should establish SSE connection with Safari-specific parameters\n ✓ src/test/mobile-safari-sse.test.js > Mobile Safari SSE Compatibility > SSE Connection Establishment > should handle connection establishment delay\n ✓ src/test/mobile-safari-sse.test.js > Mobile Safari SSE Compatibility > SSE Connection Establishment > should set up keep-alive timer for Safari\n ✓ src/test/mobile-safari-sse.test.js > Mobile Safari SSE Compatibility > Keep-alive Heartbeats > should send keep-alive pings at regular intervals 2513ms\n ✓ src/test/mobile-safari-sse.test.js > Mobile Safari SSE Compatibility > Keep-alive Heartbeats > should handle keep-alive messages from server\n ✓ src/test/mobile-safari-sse.test.js > Mobile Safari SSE Compatibility > Keep-alive Heartbeats > should adjust keep-alive frequency for background tabs\n × src/test/mobile-safari-sse.test.js > Mobile Safari SSE Compatibility > Reconnection Logic > should reconnect automatically on connection drop\n   → expected 0 to be greater than 0\n ✓ src/test/mobile-safari-sse.test.js > Mobile Safari SSE Compatibility > Reconnection Logic > should implement exponential backoff for reconnection 315ms\n ✓ src/test/mobile-safari-sse.test.js > Mobile Safari SSE Compatibility > Reconnection Logic > should limit maximum reconnection attempts 370ms\n ✓ src/test/mobile-safari-sse.test.js > Mobile Safari SSE Compatibility > Background Tab Behavior > should handle tab going to background\n × src/test/mobile-safari-sse.test.js > Mobile Safari SSE Compatibility > Background Tab Behavior > should maintain connection in background for limited time\n   → expected 0 to be greater than 0\n ✓ src/test/mobile-safari-sse.test.js > Mobile Safari SSE Compatibility > Background Tab Behavior > should restore connection when tab returns to foreground\n ✓ src/test/mobile-safari-sse.test.js > Mobile Safari SSE Compatibility > Message Handling > should handle different message types\n ✓ src/test/mobile-safari-sse.test.js > Mobile Safari SSE Compatibility > Message Handling > should update last activity on message receipt\n ✓ src/test/mobile-safari-sse.test.js > Mobile Safari SSE Compatibility > Performance and Optimization > should establish connection within acceptable time\n ✓ src/test/mobile-safari-sse.test.js > Mobile Safari SSE Compatibility > Performance and Optimization > should handle rapid message sequences\n × src/test/mobile-safari-sse.test.js > Mobile Safari SSE Compatibility > Performance and Optimization > should cleanup resources on disconnect\n   → expected 0 to be greater than 0\n ✓ src/test/mobile-safari-sse.test.js > Mobile Safari SSE Compatibility > Error Handling > should handle EventSource creation errors\n ✓ src/test/mobile-safari-sse.test.js > Mobile Safari SSE Compatibility > Error Handling > should handle malformed message data\n ✓ src/test/mobile-safari-sse.test.js > Safari Streaming Integration > should integrate with Safari-specific streaming endpoint\n ✓ src/test/mobile-safari-sse.test.js > Safari Streaming Integration > should handle streaming first token within performance target\n\n Test Files  1 failed (1)\n      Tests  4 failed | 20 passed (24)\n   Start at  01:18:35\n   Duration  4.51s (transform 29ms, setup 78ms, collect 15ms, tests 3.80s, environment 323ms, prepare 46ms)\n\nJSON report written to /tmp/vitest-report.json\n",
      "validationResults": {
        "validated": false,
        "reason": "Test suite failed or no requirements specified"
      }
    },
    {
      "name": "Frontend JWT Integration Tests",
      "type": "javascript",
      "path": "src/test/jwt-function-url-integration.test.js",
      "description": "Validates frontend authentication integration",
      "criticalForPlan": true,
      "validatesRequirements": [
        "Two-table data model operational",
        "Frontend authentication flow"
      ],
      "status": "failed",
      "executionTime": 817,
      "testCount": 0,
      "passedTests": 0,
      "failedTests": 0,
      "skippedTests": 0,
      "errors": [],
      "output": "\n RUN  v2.1.9 /Users/chrismiller/Desktop/build-process/picasso-main\n\n\n Test Files  1 failed (1)\n      Tests  no tests\n   Start at  01:18:40\n   Duration  521ms (transform 14ms, setup 43ms, collect 0ms, tests 0ms, environment 213ms, prepare 42ms)\n\nJSON report written to /tmp/vitest-report.json\n",
      "validationResults": {
        "validated": false,
        "reason": "Test suite failed or no requirements specified"
      }
    }
  ],
  "summary": {
    "totalSuites": 6,
    "passedSuites": 0,
    "failedSuites": 6,
    "totalTests": 24,
    "passedTests": 20,
    "failedTests": 4,
    "skippedTests": 0,
    "executionTime": 7705
  },
  "planValidation": {
    "securityValidation": {
      "JWT tokens expire in ≤15 minutes": false,
      "Tenant inference never uses client input": false,
      "Cross-tenant access blocked (0% success rate)": false,
      "Mobile Safari SSE compatibility confirmed": false
    },
    "performanceTargets": {
      "JWT generation: <500ms": false,
      "Streaming first token: <1000ms": false,
      "State clearing: <200ms": false,
      "Summary retrieval: <300ms": false
    },
    "complianceRequirements": {
      "/state/clear endpoint functional": false,
      "Audit events for all operations": false,
      "No full message persistence beyond 24h": false,
      "Conversation summaries ≤7 days TTL": false
    },
    "technicalValidation": {
      "Function URLs with AuthType: NONE": false,
      "Internal JWT validation working": false,
      "Two-table data model operational": false,
      "Keep-alive heartbeats implemented": false
    }
  },
  "timestamp": "2025-08-13T06:18:33.536Z",
  "environment": {
    "node": "v20.19.2",
    "platform": "darwin",
    "arch": "arm64",
    "memory": "16GB"
  },
  "metadata": {
    "generatedBy": "Unified Coordination Architecture Test Runner",
    "version": "1.0.0",
    "description": "Comprehensive validation of the unified coordination architecture implementation",
    "planValidation": {
      "totalRequirements": 16,
      "validatedRequirements": 0,
      "validationRate": "0.0%"
    }
  }
}