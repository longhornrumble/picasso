var Th=Object.create;var js=Object.defineProperty;var Ah=Object.getOwnPropertyDescriptor;var Rh=Object.getOwnPropertyNames;var Nh=Object.getPrototypeOf,Oh=Object.prototype.hasOwnProperty;var Ca=(e,t)=>()=>(e&&(t=e(e=0)),t);var Wt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ti=(e,t)=>{for(var a in t)js(e,a,{get:t[a],enumerable:!0})},Ph=(e,t,a,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Rh(t))!Oh.call(e,n)&&n!==a&&js(e,n,{get:()=>t[n],enumerable:!(o=Ah(t,n))||o.enumerable});return e};var Y=(e,t,a)=>(a=e!=null?Th(Nh(e)):{},Ph(t||!e||!e.__esModule?js(a,"default",{value:e,enumerable:!0}):a,e));var Ld=Wt(ae=>{"use strict";var Pn=Symbol.for("react.element"),Dh=Symbol.for("react.portal"),Mh=Symbol.for("react.fragment"),Fh=Symbol.for("react.strict_mode"),zh=Symbol.for("react.profiler"),Uh=Symbol.for("react.provider"),Bh=Symbol.for("react.context"),Hh=Symbol.for("react.forward_ref"),$h=Symbol.for("react.suspense"),Wh=Symbol.for("react.memo"),Vh=Symbol.for("react.lazy"),pd=Symbol.iterator;function Gh(e){return e===null||typeof e!="object"?null:(e=pd&&e[pd]||e["@@iterator"],typeof e=="function"?e:null)}var hd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xd=Object.assign,vd={};function Vo(e,t,a){this.props=e,this.context=t,this.refs=vd,this.updater=a||hd}Vo.prototype.isReactComponent={};Vo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Vo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function yd(){}yd.prototype=Vo.prototype;function Ys(e,t,a){this.props=e,this.context=t,this.refs=vd,this.updater=a||hd}var Xs=Ys.prototype=new yd;Xs.constructor=Ys;xd(Xs,Vo.prototype);Xs.isPureReactComponent=!0;var md=Array.isArray,wd=Object.prototype.hasOwnProperty,Qs={current:null},Sd={key:!0,ref:!0,__self:!0,__source:!0};function Id(e,t,a){var o,n={},r=null,i=null;if(t!=null)for(o in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(r=""+t.key),t)wd.call(t,o)&&!Sd.hasOwnProperty(o)&&(n[o]=t[o]);var s=arguments.length-2;if(s===1)n.children=a;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];n.children=l}if(e&&e.defaultProps)for(o in s=e.defaultProps,s)n[o]===void 0&&(n[o]=s[o]);return{$$typeof:Pn,type:e,key:r,ref:i,props:n,_owner:Qs.current}}function qh(e,t){return{$$typeof:Pn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Js(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pn}function jh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(a){return t[a]})}var gd=/\/+/g;function Ks(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jh(""+e.key):t.toString(36)}function oi(e,t,a,o,n){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(r){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Pn:case Dh:i=!0}}if(i)return i=e,n=n(i),e=o===""?"."+Ks(i,0):o,md(n)?(a="",e!=null&&(a=e.replace(gd,"$&/")+"/"),oi(n,t,a,"",function(u){return u})):n!=null&&(Js(n)&&(n=qh(n,a+(!n.key||i&&i.key===n.key?"":(""+n.key).replace(gd,"$&/")+"/")+e)),t.push(n)),1;if(i=0,o=o===""?".":o+":",md(e))for(var s=0;s<e.length;s++){r=e[s];var l=o+Ks(r,s);i+=oi(r,t,a,l,n)}else if(l=Gh(e),typeof l=="function")for(e=l.call(e),s=0;!(r=e.next()).done;)r=r.value,l=o+Ks(r,s++),i+=oi(r,t,a,l,n);else if(r==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function ai(e,t,a){if(e==null)return e;var o=[],n=0;return oi(e,o,"","",function(r){return t.call(a,r,n++)}),o}function Kh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(a){(e._status===0||e._status===-1)&&(e._status=1,e._result=a)},function(a){(e._status===0||e._status===-1)&&(e._status=2,e._result=a)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ut={current:null},ni={transition:null},Yh={ReactCurrentDispatcher:ut,ReactCurrentBatchConfig:ni,ReactCurrentOwner:Qs};function bd(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:ai,forEach:function(e,t,a){ai(e,function(){t.apply(this,arguments)},a)},count:function(e){var t=0;return ai(e,function(){t++}),t},toArray:function(e){return ai(e,function(t){return t})||[]},only:function(e){if(!Js(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ae.Component=Vo;ae.Fragment=Mh;ae.Profiler=zh;ae.PureComponent=Ys;ae.StrictMode=Fh;ae.Suspense=$h;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yh;ae.act=bd;ae.cloneElement=function(e,t,a){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=xd({},e.props),n=e.key,r=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,i=Qs.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)wd.call(t,l)&&!Sd.hasOwnProperty(l)&&(o[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)o.children=a;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];o.children=s}return{$$typeof:Pn,type:e.type,key:n,ref:r,props:o,_owner:i}};ae.createContext=function(e){return e={$$typeof:Bh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Uh,_context:e},e.Consumer=e};ae.createElement=Id;ae.createFactory=function(e){var t=Id.bind(null,e);return t.type=e,t};ae.createRef=function(){return{current:null}};ae.forwardRef=function(e){return{$$typeof:Hh,render:e}};ae.isValidElement=Js;ae.lazy=function(e){return{$$typeof:Vh,_payload:{_status:-1,_result:e},_init:Kh}};ae.memo=function(e,t){return{$$typeof:Wh,type:e,compare:t===void 0?null:t}};ae.startTransition=function(e){var t=ni.transition;ni.transition={};try{e()}finally{ni.transition=t}};ae.unstable_act=bd;ae.useCallback=function(e,t){return ut.current.useCallback(e,t)};ae.useContext=function(e){return ut.current.useContext(e)};ae.useDebugValue=function(){};ae.useDeferredValue=function(e){return ut.current.useDeferredValue(e)};ae.useEffect=function(e,t){return ut.current.useEffect(e,t)};ae.useId=function(){return ut.current.useId()};ae.useImperativeHandle=function(e,t,a){return ut.current.useImperativeHandle(e,t,a)};ae.useInsertionEffect=function(e,t){return ut.current.useInsertionEffect(e,t)};ae.useLayoutEffect=function(e,t){return ut.current.useLayoutEffect(e,t)};ae.useMemo=function(e,t){return ut.current.useMemo(e,t)};ae.useReducer=function(e,t,a){return ut.current.useReducer(e,t,a)};ae.useRef=function(e){return ut.current.useRef(e)};ae.useState=function(e){return ut.current.useState(e)};ae.useSyncExternalStore=function(e,t,a){return ut.current.useSyncExternalStore(e,t,a)};ae.useTransition=function(){return ut.current.useTransition()};ae.version="18.3.1"});var Fe=Wt((Ky,_d)=>{"use strict";_d.exports=Ld()});var Dd=Wt(we=>{"use strict";function al(e,t){var a=e.length;e.push(t);e:for(;0<a;){var o=a-1>>>1,n=e[o];if(0<ri(n,t))e[o]=t,e[a]=n,a=o;else break e}}function na(e){return e.length===0?null:e[0]}function si(e){if(e.length===0)return null;var t=e[0],a=e.pop();if(a!==t){e[0]=a;e:for(var o=0,n=e.length,r=n>>>1;o<r;){var i=2*(o+1)-1,s=e[i],l=i+1,u=e[l];if(0>ri(s,a))l<n&&0>ri(u,s)?(e[o]=u,e[l]=a,o=l):(e[o]=s,e[i]=a,o=i);else if(l<n&&0>ri(u,a))e[o]=u,e[l]=a,o=l;else break e}}return t}function ri(e,t){var a=e.sortIndex-t.sortIndex;return a!==0?a:e.id-t.id}typeof performance=="object"&&typeof performance.now=="function"?(kd=performance,we.unstable_now=function(){return kd.now()}):(Zs=Date,Cd=Zs.now(),we.unstable_now=function(){return Zs.now()-Cd});var kd,Zs,Cd,va=[],Wa=[],Xh=1,Vt=null,ot=3,li=!1,xo=!1,Mn=!1,Ad=typeof setTimeout=="function"?setTimeout:null,Rd=typeof clearTimeout=="function"?clearTimeout:null,Ed=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ol(e){for(var t=na(Wa);t!==null;){if(t.callback===null)si(Wa);else if(t.startTime<=e)si(Wa),t.sortIndex=t.expirationTime,al(va,t);else break;t=na(Wa)}}function nl(e){if(Mn=!1,ol(e),!xo)if(na(va)!==null)xo=!0,il(rl);else{var t=na(Wa);t!==null&&sl(nl,t.startTime-e)}}function rl(e,t){xo=!1,Mn&&(Mn=!1,Rd(Fn),Fn=-1),li=!0;var a=ot;try{for(ol(t),Vt=na(va);Vt!==null&&(!(Vt.expirationTime>t)||e&&!Pd());){var o=Vt.callback;if(typeof o=="function"){Vt.callback=null,ot=Vt.priorityLevel;var n=o(Vt.expirationTime<=t);t=we.unstable_now(),typeof n=="function"?Vt.callback=n:Vt===na(va)&&si(va),ol(t)}else si(va);Vt=na(va)}if(Vt!==null)var r=!0;else{var i=na(Wa);i!==null&&sl(nl,i.startTime-t),r=!1}return r}finally{Vt=null,ot=a,li=!1}}var ui=!1,ii=null,Fn=-1,Nd=5,Od=-1;function Pd(){return!(we.unstable_now()-Od<Nd)}function el(){if(ii!==null){var e=we.unstable_now();Od=e;var t=!0;try{t=ii(!0,e)}finally{t?Dn():(ui=!1,ii=null)}}else ui=!1}var Dn;typeof Ed=="function"?Dn=function(){Ed(el)}:typeof MessageChannel<"u"?(tl=new MessageChannel,Td=tl.port2,tl.port1.onmessage=el,Dn=function(){Td.postMessage(null)}):Dn=function(){Ad(el,0)};var tl,Td;function il(e){ii=e,ui||(ui=!0,Dn())}function sl(e,t){Fn=Ad(function(){e(we.unstable_now())},t)}we.unstable_IdlePriority=5;we.unstable_ImmediatePriority=1;we.unstable_LowPriority=4;we.unstable_NormalPriority=3;we.unstable_Profiling=null;we.unstable_UserBlockingPriority=2;we.unstable_cancelCallback=function(e){e.callback=null};we.unstable_continueExecution=function(){xo||li||(xo=!0,il(rl))};we.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Nd=0<e?Math.floor(1e3/e):5};we.unstable_getCurrentPriorityLevel=function(){return ot};we.unstable_getFirstCallbackNode=function(){return na(va)};we.unstable_next=function(e){switch(ot){case 1:case 2:case 3:var t=3;break;default:t=ot}var a=ot;ot=t;try{return e()}finally{ot=a}};we.unstable_pauseExecution=function(){};we.unstable_requestPaint=function(){};we.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var a=ot;ot=e;try{return t()}finally{ot=a}};we.unstable_scheduleCallback=function(e,t,a){var o=we.unstable_now();switch(typeof a=="object"&&a!==null?(a=a.delay,a=typeof a=="number"&&0<a?o+a:o):a=o,e){case 1:var n=-1;break;case 2:n=250;break;case 5:n=1073741823;break;case 4:n=1e4;break;default:n=5e3}return n=a+n,e={id:Xh++,callback:t,priorityLevel:e,startTime:a,expirationTime:n,sortIndex:-1},a>o?(e.sortIndex=a,al(Wa,e),na(va)===null&&e===na(Wa)&&(Mn?(Rd(Fn),Fn=-1):Mn=!0,sl(nl,a-o))):(e.sortIndex=n,al(va,e),xo||li||(xo=!0,il(rl))),e};we.unstable_shouldYield=Pd;we.unstable_wrapCallback=function(e){var t=ot;return function(){var a=ot;ot=t;try{return e.apply(this,arguments)}finally{ot=a}}}});var Fd=Wt((Xy,Md)=>{"use strict";Md.exports=Dd()});var $m=Wt(Dt=>{"use strict";var Qh=Fe(),Ot=Fd();function T(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gf=new Set,rr={};function Ao(e,t){fn(e,t),fn(e+"Capture",t)}function fn(e,t){for(rr[e]=t,e=0;e<t.length;e++)Gf.add(t[e])}var Oa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Al=Object.prototype.hasOwnProperty,Jh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zd={},Ud={};function Zh(e){return Al.call(Ud,e)?!0:Al.call(zd,e)?!1:Jh.test(e)?Ud[e]=!0:(zd[e]=!0,!1)}function ex(e,t,a,o){if(a!==null&&a.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function tx(e,t,a,o){if(t===null||typeof t>"u"||ex(e,t,a,o))return!0;if(o)return!1;if(a!==null)switch(a.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ft(e,t,a,o,n,r,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=n,this.mustUseProperty=a,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=i}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Je[e]=new ft(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Je[t]=new ft(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Je[e]=new ft(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Je[e]=new ft(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Je[e]=new ft(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Je[e]=new ft(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Je[e]=new ft(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Je[e]=new ft(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Je[e]=new ft(e,5,!1,e.toLowerCase(),null,!1,!1)});var Iu=/[\-:]([a-z])/g;function bu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Iu,bu);Je[t]=new ft(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Iu,bu);Je[t]=new ft(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Iu,bu);Je[t]=new ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Je[e]=new ft(e,1,!1,e.toLowerCase(),null,!1,!1)});Je.xlinkHref=new ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Je[e]=new ft(e,1,!1,e.toLowerCase(),null,!0,!0)});function Lu(e,t,a,o){var n=Je.hasOwnProperty(t)?Je[t]:null;(n!==null?n.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(tx(t,a,n,o)&&(a=null),o||n===null?Zh(t)&&(a===null?e.removeAttribute(t):e.setAttribute(t,""+a)):n.mustUseProperty?e[n.propertyName]=a===null?n.type===3?!1:"":a:(t=n.attributeName,o=n.attributeNamespace,a===null?e.removeAttribute(t):(n=n.type,a=n===3||n===4&&a===!0?"":""+a,o?e.setAttributeNS(o,t,a):e.setAttribute(t,a))))}var Fa=Qh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ci=Symbol.for("react.element"),jo=Symbol.for("react.portal"),Ko=Symbol.for("react.fragment"),_u=Symbol.for("react.strict_mode"),Rl=Symbol.for("react.profiler"),qf=Symbol.for("react.provider"),jf=Symbol.for("react.context"),ku=Symbol.for("react.forward_ref"),Nl=Symbol.for("react.suspense"),Ol=Symbol.for("react.suspense_list"),Cu=Symbol.for("react.memo"),Ga=Symbol.for("react.lazy");Symbol.for("react.scope");Symbol.for("react.debug_trace_mode");var Kf=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden");Symbol.for("react.cache");Symbol.for("react.tracing_marker");var Bd=Symbol.iterator;function zn(e){return e===null||typeof e!="object"?null:(e=Bd&&e[Bd]||e["@@iterator"],typeof e=="function"?e:null)}var Re=Object.assign,ll;function qn(e){if(ll===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);ll=t&&t[1]||""}return`
`+ll+e}var ul=!1;function cl(e,t){if(!e||ul)return"";ul=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var o=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){o=u}e.call(t.prototype)}else{try{throw Error()}catch(u){o=u}e()}}catch(u){if(u&&o&&typeof u.stack=="string"){for(var n=u.stack.split(`
`),r=o.stack.split(`
`),i=n.length-1,s=r.length-1;1<=i&&0<=s&&n[i]!==r[s];)s--;for(;1<=i&&0<=s;i--,s--)if(n[i]!==r[s]){if(i!==1||s!==1)do if(i--,s--,0>s||n[i]!==r[s]){var l=`
`+n[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=i&&0<=s);break}}}finally{ul=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?qn(e):""}function ax(e){switch(e.tag){case 5:return qn(e.type);case 16:return qn("Lazy");case 13:return qn("Suspense");case 19:return qn("SuspenseList");case 0:case 2:case 15:return e=cl(e.type,!1),e;case 11:return e=cl(e.type.render,!1),e;case 1:return e=cl(e.type,!0),e;default:return""}}function Pl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ko:return"Fragment";case jo:return"Portal";case Rl:return"Profiler";case _u:return"StrictMode";case Nl:return"Suspense";case Ol:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case jf:return(e.displayName||"Context")+".Consumer";case qf:return(e._context.displayName||"Context")+".Provider";case ku:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Cu:return t=e.displayName||null,t!==null?t:Pl(e.type)||"Memo";case Ga:t=e._payload,e=e._init;try{return Pl(e(t))}catch{}}return null}function ox(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pl(t);case 8:return t===_u?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ro(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Yf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function nx(e){var t=Yf(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var n=a.get,r=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(i){o=""+i,r.call(this,i)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(i){o=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function di(e){e._valueTracker||(e._valueTracker=nx(e))}function Xf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),o="";return e&&(o=Yf(e)?e.checked?"true":"false":e.value),e=o,e!==a?(t.setValue(e),!0):!1}function Ui(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Dl(e,t){var a=t.checked;return Re({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function Hd(e,t){var a=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;a=ro(t.value!=null?t.value:a),e._wrapperState={initialChecked:o,initialValue:a,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Qf(e,t){t=t.checked,t!=null&&Lu(e,"checked",t,!1)}function Ml(e,t){Qf(e,t);var a=ro(t.value),o=t.type;if(a!=null)o==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fl(e,t.type,a):t.hasOwnProperty("defaultValue")&&Fl(e,t.type,ro(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function $d(e,t,a){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,a||t===e.value||(e.value=t),e.defaultValue=t}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function Fl(e,t,a){(t!=="number"||Ui(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var jn=Array.isArray;function rn(e,t,a,o){if(e=e.options,t){t={};for(var n=0;n<a.length;n++)t["$"+a[n]]=!0;for(a=0;a<e.length;a++)n=t.hasOwnProperty("$"+e[a].value),e[a].selected!==n&&(e[a].selected=n),n&&o&&(e[a].defaultSelected=!0)}else{for(a=""+ro(a),t=null,n=0;n<e.length;n++){if(e[n].value===a){e[n].selected=!0,o&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function zl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(T(91));return Re({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Wd(e,t){var a=t.value;if(a==null){if(a=t.children,t=t.defaultValue,a!=null){if(t!=null)throw Error(T(92));if(jn(a)){if(1<a.length)throw Error(T(93));a=a[0]}t=a}t==null&&(t=""),a=t}e._wrapperState={initialValue:ro(a)}}function Jf(e,t){var a=ro(t.value),o=ro(t.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),t.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),o!=null&&(e.defaultValue=""+o)}function Vd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Zf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ul(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Zf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var fi,ep=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,a,o,n){MSApp.execUnsafeLocalFunction(function(){return e(t,a,o,n)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(fi=fi||document.createElement("div"),fi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ir(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Xn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rx=["Webkit","ms","Moz","O"];Object.keys(Xn).forEach(function(e){rx.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Xn[t]=Xn[e]})});function tp(e,t,a){return t==null||typeof t=="boolean"||t===""?"":a||typeof t!="number"||t===0||Xn.hasOwnProperty(e)&&Xn[e]?(""+t).trim():t+"px"}function ap(e,t){e=e.style;for(var a in t)if(t.hasOwnProperty(a)){var o=a.indexOf("--")===0,n=tp(a,t[a],o);a==="float"&&(a="cssFloat"),o?e.setProperty(a,n):e[a]=n}}var ix=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bl(e,t){if(t){if(ix[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(T(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(T(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(T(61))}if(t.style!=null&&typeof t.style!="object")throw Error(T(62))}}function Hl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $l=null;function Eu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wl=null,sn=null,ln=null;function Gd(e){if(e=Lr(e)){if(typeof Wl!="function")throw Error(T(280));var t=e.stateNode;t&&(t=ps(t),Wl(e.stateNode,e.type,t))}}function op(e){sn?ln?ln.push(e):ln=[e]:sn=e}function np(){if(sn){var e=sn,t=ln;if(ln=sn=null,Gd(e),t)for(e=0;e<t.length;e++)Gd(t[e])}}function rp(e,t){return e(t)}function ip(){}var dl=!1;function sp(e,t,a){if(dl)return e(t,a);dl=!0;try{return rp(e,t,a)}finally{dl=!1,(sn!==null||ln!==null)&&(ip(),np())}}function sr(e,t){var a=e.stateNode;if(a===null)return null;var o=ps(a);if(o===null)return null;a=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(T(231,t,typeof a));return a}var Vl=!1;if(Oa)try{Go={},Object.defineProperty(Go,"passive",{get:function(){Vl=!0}}),window.addEventListener("test",Go,Go),window.removeEventListener("test",Go,Go)}catch{Vl=!1}var Go;function sx(e,t,a,o,n,r,i,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(a,u)}catch(d){this.onError(d)}}var Qn=!1,Bi=null,Hi=!1,Gl=null,lx={onError:function(e){Qn=!0,Bi=e}};function ux(e,t,a,o,n,r,i,s,l){Qn=!1,Bi=null,sx.apply(lx,arguments)}function cx(e,t,a,o,n,r,i,s,l){if(ux.apply(this,arguments),Qn){if(Qn){var u=Bi;Qn=!1,Bi=null}else throw Error(T(198));Hi||(Hi=!0,Gl=u)}}function Ro(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function lp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qd(e){if(Ro(e)!==e)throw Error(T(188))}function dx(e){var t=e.alternate;if(!t){if(t=Ro(e),t===null)throw Error(T(188));return t!==e?null:e}for(var a=e,o=t;;){var n=a.return;if(n===null)break;var r=n.alternate;if(r===null){if(o=n.return,o!==null){a=o;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===a)return qd(n),e;if(r===o)return qd(n),t;r=r.sibling}throw Error(T(188))}if(a.return!==o.return)a=n,o=r;else{for(var i=!1,s=n.child;s;){if(s===a){i=!0,a=n,o=r;break}if(s===o){i=!0,o=n,a=r;break}s=s.sibling}if(!i){for(s=r.child;s;){if(s===a){i=!0,a=r,o=n;break}if(s===o){i=!0,o=r,a=n;break}s=s.sibling}if(!i)throw Error(T(189))}}if(a.alternate!==o)throw Error(T(190))}if(a.tag!==3)throw Error(T(188));return a.stateNode.current===a?e:t}function up(e){return e=dx(e),e!==null?cp(e):null}function cp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=cp(e);if(t!==null)return t;e=e.sibling}return null}var dp=Ot.unstable_scheduleCallback,jd=Ot.unstable_cancelCallback,fx=Ot.unstable_shouldYield,px=Ot.unstable_requestPaint,ze=Ot.unstable_now,mx=Ot.unstable_getCurrentPriorityLevel,Tu=Ot.unstable_ImmediatePriority,fp=Ot.unstable_UserBlockingPriority,$i=Ot.unstable_NormalPriority,gx=Ot.unstable_LowPriority,pp=Ot.unstable_IdlePriority,us=null,Ia=null;function hx(e){if(Ia&&typeof Ia.onCommitFiberRoot=="function")try{Ia.onCommitFiberRoot(us,e,void 0,(e.current.flags&128)===128)}catch{}}var ua=Math.clz32?Math.clz32:yx,xx=Math.log,vx=Math.LN2;function yx(e){return e>>>=0,e===0?32:31-(xx(e)/vx|0)|0}var pi=64,mi=4194304;function Kn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Wi(e,t){var a=e.pendingLanes;if(a===0)return 0;var o=0,n=e.suspendedLanes,r=e.pingedLanes,i=a&268435455;if(i!==0){var s=i&~n;s!==0?o=Kn(s):(r&=i,r!==0&&(o=Kn(r)))}else i=a&~n,i!==0?o=Kn(i):r!==0&&(o=Kn(r));if(o===0)return 0;if(t!==0&&t!==o&&(t&n)===0&&(n=o&-o,r=t&-t,n>=r||n===16&&(r&4194240)!==0))return t;if((o&4)!==0&&(o|=a&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)a=31-ua(t),n=1<<a,o|=e[a],t&=~n;return o}function wx(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sx(e,t){for(var a=e.suspendedLanes,o=e.pingedLanes,n=e.expirationTimes,r=e.pendingLanes;0<r;){var i=31-ua(r),s=1<<i,l=n[i];l===-1?((s&a)===0||(s&o)!==0)&&(n[i]=wx(s,t)):l<=t&&(e.expiredLanes|=s),r&=~s}}function ql(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function mp(){var e=pi;return pi<<=1,(pi&4194240)===0&&(pi=64),e}function fl(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Ir(e,t,a){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ua(t),e[t]=a}function Ix(e,t){var a=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<a;){var n=31-ua(a),r=1<<n;t[n]=0,o[n]=-1,e[n]=-1,a&=~r}}function Au(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var o=31-ua(a),n=1<<o;n&t|e[o]&t&&(e[o]|=t),a&=~n}}var me=0;function gp(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var hp,Ru,xp,vp,yp,jl=!1,gi=[],Qa=null,Ja=null,Za=null,lr=new Map,ur=new Map,ja=[],bx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kd(e,t){switch(e){case"focusin":case"focusout":Qa=null;break;case"dragenter":case"dragleave":Ja=null;break;case"mouseover":case"mouseout":Za=null;break;case"pointerover":case"pointerout":lr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ur.delete(t.pointerId)}}function Un(e,t,a,o,n,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:a,eventSystemFlags:o,nativeEvent:r,targetContainers:[n]},t!==null&&(t=Lr(t),t!==null&&Ru(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function Lx(e,t,a,o,n){switch(t){case"focusin":return Qa=Un(Qa,e,t,a,o,n),!0;case"dragenter":return Ja=Un(Ja,e,t,a,o,n),!0;case"mouseover":return Za=Un(Za,e,t,a,o,n),!0;case"pointerover":var r=n.pointerId;return lr.set(r,Un(lr.get(r)||null,e,t,a,o,n)),!0;case"gotpointercapture":return r=n.pointerId,ur.set(r,Un(ur.get(r)||null,e,t,a,o,n)),!0}return!1}function wp(e){var t=wo(e.target);if(t!==null){var a=Ro(t);if(a!==null){if(t=a.tag,t===13){if(t=lp(a),t!==null){e.blockedOn=t,yp(e.priority,function(){xp(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ti(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Kl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);$l=o,a.target.dispatchEvent(o),$l=null}else return t=Lr(a),t!==null&&Ru(t),e.blockedOn=a,!1;t.shift()}return!0}function Yd(e,t,a){Ti(e)&&a.delete(t)}function _x(){jl=!1,Qa!==null&&Ti(Qa)&&(Qa=null),Ja!==null&&Ti(Ja)&&(Ja=null),Za!==null&&Ti(Za)&&(Za=null),lr.forEach(Yd),ur.forEach(Yd)}function Bn(e,t){e.blockedOn===t&&(e.blockedOn=null,jl||(jl=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,_x)))}function cr(e){function t(n){return Bn(n,e)}if(0<gi.length){Bn(gi[0],e);for(var a=1;a<gi.length;a++){var o=gi[a];o.blockedOn===e&&(o.blockedOn=null)}}for(Qa!==null&&Bn(Qa,e),Ja!==null&&Bn(Ja,e),Za!==null&&Bn(Za,e),lr.forEach(t),ur.forEach(t),a=0;a<ja.length;a++)o=ja[a],o.blockedOn===e&&(o.blockedOn=null);for(;0<ja.length&&(a=ja[0],a.blockedOn===null);)wp(a),a.blockedOn===null&&ja.shift()}var un=Fa.ReactCurrentBatchConfig,Vi=!0;function kx(e,t,a,o){var n=me,r=un.transition;un.transition=null;try{me=1,Nu(e,t,a,o)}finally{me=n,un.transition=r}}function Cx(e,t,a,o){var n=me,r=un.transition;un.transition=null;try{me=4,Nu(e,t,a,o)}finally{me=n,un.transition=r}}function Nu(e,t,a,o){if(Vi){var n=Kl(e,t,a,o);if(n===null)yl(e,t,o,Gi,a),Kd(e,o);else if(Lx(n,e,t,a,o))o.stopPropagation();else if(Kd(e,o),t&4&&-1<bx.indexOf(e)){for(;n!==null;){var r=Lr(n);if(r!==null&&hp(r),r=Kl(e,t,a,o),r===null&&yl(e,t,o,Gi,a),r===n)break;n=r}n!==null&&o.stopPropagation()}else yl(e,t,o,null,a)}}var Gi=null;function Kl(e,t,a,o){if(Gi=null,e=Eu(o),e=wo(e),e!==null)if(t=Ro(e),t===null)e=null;else if(a=t.tag,a===13){if(e=lp(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gi=e,null}function Sp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mx()){case Tu:return 1;case fp:return 4;case $i:case gx:return 16;case pp:return 536870912;default:return 16}default:return 16}}var Ya=null,Ou=null,Ai=null;function Ip(){if(Ai)return Ai;var e,t=Ou,a=t.length,o,n="value"in Ya?Ya.value:Ya.textContent,r=n.length;for(e=0;e<a&&t[e]===n[e];e++);var i=a-e;for(o=1;o<=i&&t[a-o]===n[r-o];o++);return Ai=n.slice(e,1<o?1-o:void 0)}function Ri(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function hi(){return!0}function Xd(){return!1}function Pt(e){function t(a,o,n,r,i){this._reactName=a,this._targetInst=n,this.type=o,this.nativeEvent=r,this.target=i,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(a=e[s],this[s]=a?a(r):r[s]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?hi:Xd,this.isPropagationStopped=Xd,this}return Re(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=hi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=hi)},persist:function(){},isPersistent:hi}),t}var yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pu=Pt(yn),br=Re({},yn,{view:0,detail:0}),Ex=Pt(br),pl,ml,Hn,cs=Re({},br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Du,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hn&&(Hn&&e.type==="mousemove"?(pl=e.screenX-Hn.screenX,ml=e.screenY-Hn.screenY):ml=pl=0,Hn=e),pl)},movementY:function(e){return"movementY"in e?e.movementY:ml}}),Qd=Pt(cs),Tx=Re({},cs,{dataTransfer:0}),Ax=Pt(Tx),Rx=Re({},br,{relatedTarget:0}),gl=Pt(Rx),Nx=Re({},yn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ox=Pt(Nx),Px=Re({},yn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dx=Pt(Px),Mx=Re({},yn,{data:0}),Jd=Pt(Mx),Fx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ux={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ux[e])?!!t[e]:!1}function Du(){return Bx}var Hx=Re({},br,{key:function(e){if(e.key){var t=Fx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ri(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Du,charCode:function(e){return e.type==="keypress"?Ri(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ri(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$x=Pt(Hx),Wx=Re({},cs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zd=Pt(Wx),Vx=Re({},br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Du}),Gx=Pt(Vx),qx=Re({},yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),jx=Pt(qx),Kx=Re({},cs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Yx=Pt(Kx),Xx=[9,13,27,32],Mu=Oa&&"CompositionEvent"in window,Jn=null;Oa&&"documentMode"in document&&(Jn=document.documentMode);var Qx=Oa&&"TextEvent"in window&&!Jn,bp=Oa&&(!Mu||Jn&&8<Jn&&11>=Jn),ef=" ",tf=!1;function Lp(e,t){switch(e){case"keyup":return Xx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _p(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yo=!1;function Jx(e,t){switch(e){case"compositionend":return _p(t);case"keypress":return t.which!==32?null:(tf=!0,ef);case"textInput":return e=t.data,e===ef&&tf?null:e;default:return null}}function Zx(e,t){if(Yo)return e==="compositionend"||!Mu&&Lp(e,t)?(e=Ip(),Ai=Ou=Ya=null,Yo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bp&&t.locale!=="ko"?null:t.data;default:return null}}var ev={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function af(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ev[e.type]:t==="textarea"}function kp(e,t,a,o){op(o),t=qi(t,"onChange"),0<t.length&&(a=new Pu("onChange","change",null,a,o),e.push({event:a,listeners:t}))}var Zn=null,dr=null;function tv(e){Fp(e,0)}function ds(e){var t=Jo(e);if(Xf(t))return e}function av(e,t){if(e==="change")return t}var Cp=!1;Oa&&(Oa?(vi="oninput"in document,vi||(hl=document.createElement("div"),hl.setAttribute("oninput","return;"),vi=typeof hl.oninput=="function"),xi=vi):xi=!1,Cp=xi&&(!document.documentMode||9<document.documentMode));var xi,vi,hl;function of(){Zn&&(Zn.detachEvent("onpropertychange",Ep),dr=Zn=null)}function Ep(e){if(e.propertyName==="value"&&ds(dr)){var t=[];kp(t,dr,e,Eu(e)),sp(tv,t)}}function ov(e,t,a){e==="focusin"?(of(),Zn=t,dr=a,Zn.attachEvent("onpropertychange",Ep)):e==="focusout"&&of()}function nv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ds(dr)}function rv(e,t){if(e==="click")return ds(t)}function iv(e,t){if(e==="input"||e==="change")return ds(t)}function sv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var da=typeof Object.is=="function"?Object.is:sv;function fr(e,t){if(da(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var n=a[o];if(!Al.call(t,n)||!da(e[n],t[n]))return!1}return!0}function nf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rf(e,t){var a=nf(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=t&&o>=t)return{node:a,offset:t-e};e=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=nf(a)}}function Tp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Tp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ap(){for(var e=window,t=Ui();t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Ui(e.document)}return t}function Fu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function lv(e){var t=Ap(),a=e.focusedElem,o=e.selectionRange;if(t!==a&&a&&a.ownerDocument&&Tp(a.ownerDocument.documentElement,a)){if(o!==null&&Fu(a)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in a)a.selectionStart=t,a.selectionEnd=Math.min(e,a.value.length);else if(e=(t=a.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=a.textContent.length,r=Math.min(o.start,n);o=o.end===void 0?r:Math.min(o.end,n),!e.extend&&r>o&&(n=o,o=r,r=n),n=rf(a,r);var i=rf(a,o);n&&i&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),r>o?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=a;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<t.length;a++)e=t[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var uv=Oa&&"documentMode"in document&&11>=document.documentMode,Xo=null,Yl=null,er=null,Xl=!1;function sf(e,t,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Xl||Xo==null||Xo!==Ui(o)||(o=Xo,"selectionStart"in o&&Fu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),er&&fr(er,o)||(er=o,o=qi(Yl,"onSelect"),0<o.length&&(t=new Pu("onSelect","select",null,t,a),e.push({event:t,listeners:o}),t.target=Xo)))}function yi(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Qo={animationend:yi("Animation","AnimationEnd"),animationiteration:yi("Animation","AnimationIteration"),animationstart:yi("Animation","AnimationStart"),transitionend:yi("Transition","TransitionEnd")},xl={},Rp={};Oa&&(Rp=document.createElement("div").style,"AnimationEvent"in window||(delete Qo.animationend.animation,delete Qo.animationiteration.animation,delete Qo.animationstart.animation),"TransitionEvent"in window||delete Qo.transitionend.transition);function fs(e){if(xl[e])return xl[e];if(!Qo[e])return e;var t=Qo[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Rp)return xl[e]=t[a];return e}var Np=fs("animationend"),Op=fs("animationiteration"),Pp=fs("animationstart"),Dp=fs("transitionend"),Mp=new Map,lf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function so(e,t){Mp.set(e,t),Ao(t,[e])}for(wi=0;wi<lf.length;wi++)Si=lf[wi],uf=Si.toLowerCase(),cf=Si[0].toUpperCase()+Si.slice(1),so(uf,"on"+cf);var Si,uf,cf,wi;so(Np,"onAnimationEnd");so(Op,"onAnimationIteration");so(Pp,"onAnimationStart");so("dblclick","onDoubleClick");so("focusin","onFocus");so("focusout","onBlur");so(Dp,"onTransitionEnd");fn("onMouseEnter",["mouseout","mouseover"]);fn("onMouseLeave",["mouseout","mouseover"]);fn("onPointerEnter",["pointerout","pointerover"]);fn("onPointerLeave",["pointerout","pointerover"]);Ao("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ao("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ao("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ao("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ao("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ao("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yn));function df(e,t,a){var o=e.type||"unknown-event";e.currentTarget=a,cx(o,t,void 0,e),e.currentTarget=null}function Fp(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],n=o.event;o=o.listeners;e:{var r=void 0;if(t)for(var i=o.length-1;0<=i;i--){var s=o[i],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==r&&n.isPropagationStopped())break e;df(n,s,u),r=l}else for(i=0;i<o.length;i++){if(s=o[i],l=s.instance,u=s.currentTarget,s=s.listener,l!==r&&n.isPropagationStopped())break e;df(n,s,u),r=l}}}if(Hi)throw e=Gl,Hi=!1,Gl=null,e}function be(e,t){var a=t[tu];a===void 0&&(a=t[tu]=new Set);var o=e+"__bubble";a.has(o)||(zp(t,e,2,!1),a.add(o))}function vl(e,t,a){var o=0;t&&(o|=4),zp(a,e,o,t)}var Ii="_reactListening"+Math.random().toString(36).slice(2);function pr(e){if(!e[Ii]){e[Ii]=!0,Gf.forEach(function(a){a!=="selectionchange"&&(cv.has(a)||vl(a,!1,e),vl(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ii]||(t[Ii]=!0,vl("selectionchange",!1,t))}}function zp(e,t,a,o){switch(Sp(t)){case 1:var n=kx;break;case 4:n=Cx;break;default:n=Nu}a=n.bind(null,t,a,e),n=void 0,!Vl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),o?n!==void 0?e.addEventListener(t,a,{capture:!0,passive:n}):e.addEventListener(t,a,!0):n!==void 0?e.addEventListener(t,a,{passive:n}):e.addEventListener(t,a,!1)}function yl(e,t,a,o,n){var r=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var i=o.tag;if(i===3||i===4){var s=o.stateNode.containerInfo;if(s===n||s.nodeType===8&&s.parentNode===n)break;if(i===4)for(i=o.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;i=i.return}for(;s!==null;){if(i=wo(s),i===null)return;if(l=i.tag,l===5||l===6){o=r=i;continue e}s=s.parentNode}}o=o.return}sp(function(){var u=r,d=Eu(a),h=[];e:{var x=Mp.get(e);if(x!==void 0){var v=Pu,y=e;switch(e){case"keypress":if(Ri(a)===0)break e;case"keydown":case"keyup":v=$x;break;case"focusin":y="focus",v=gl;break;case"focusout":y="blur",v=gl;break;case"beforeblur":case"afterblur":v=gl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Qd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Ax;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Gx;break;case Np:case Op:case Pp:v=Ox;break;case Dp:v=jx;break;case"scroll":v=Ex;break;case"wheel":v=Yx;break;case"copy":case"cut":case"paste":v=Dx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Zd}var I=(t&4)!==0,F=!I&&e==="scroll",f=I?x!==null?x+"Capture":null:x;I=[];for(var c=u,p;c!==null;){p=c;var w=p.stateNode;if(p.tag===5&&w!==null&&(p=w,f!==null&&(w=sr(c,f),w!=null&&I.push(mr(c,w,p)))),F)break;c=c.return}0<I.length&&(x=new v(x,y,null,a,d),h.push({event:x,listeners:I}))}}if((t&7)===0){e:{if(x=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",x&&a!==$l&&(y=a.relatedTarget||a.fromElement)&&(wo(y)||y[Pa]))break e;if((v||x)&&(x=d.window===d?d:(x=d.ownerDocument)?x.defaultView||x.parentWindow:window,v?(y=a.relatedTarget||a.toElement,v=u,y=y?wo(y):null,y!==null&&(F=Ro(y),y!==F||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=u),v!==y)){if(I=Qd,w="onMouseLeave",f="onMouseEnter",c="mouse",(e==="pointerout"||e==="pointerover")&&(I=Zd,w="onPointerLeave",f="onPointerEnter",c="pointer"),F=v==null?x:Jo(v),p=y==null?x:Jo(y),x=new I(w,c+"leave",v,a,d),x.target=F,x.relatedTarget=p,w=null,wo(d)===u&&(I=new I(f,c+"enter",y,a,d),I.target=p,I.relatedTarget=F,w=I),F=w,v&&y)t:{for(I=v,f=y,c=0,p=I;p;p=qo(p))c++;for(p=0,w=f;w;w=qo(w))p++;for(;0<c-p;)I=qo(I),c--;for(;0<p-c;)f=qo(f),p--;for(;c--;){if(I===f||f!==null&&I===f.alternate)break t;I=qo(I),f=qo(f)}I=null}else I=null;v!==null&&ff(h,x,v,I,!1),y!==null&&F!==null&&ff(h,F,y,I,!0)}}e:{if(x=u?Jo(u):window,v=x.nodeName&&x.nodeName.toLowerCase(),v==="select"||v==="input"&&x.type==="file")var L=av;else if(af(x))if(Cp)L=iv;else{L=nv;var _=ov}else(v=x.nodeName)&&v.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(L=rv);if(L&&(L=L(e,u))){kp(h,L,a,d);break e}_&&_(e,x,u),e==="focusout"&&(_=x._wrapperState)&&_.controlled&&x.type==="number"&&Fl(x,"number",x.value)}switch(_=u?Jo(u):window,e){case"focusin":(af(_)||_.contentEditable==="true")&&(Xo=_,Yl=u,er=null);break;case"focusout":er=Yl=Xo=null;break;case"mousedown":Xl=!0;break;case"contextmenu":case"mouseup":case"dragend":Xl=!1,sf(h,a,d);break;case"selectionchange":if(uv)break;case"keydown":case"keyup":sf(h,a,d)}var S;if(Mu)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Yo?Lp(e,a)&&(b="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(b="onCompositionStart");b&&(bp&&a.locale!=="ko"&&(Yo||b!=="onCompositionStart"?b==="onCompositionEnd"&&Yo&&(S=Ip()):(Ya=d,Ou="value"in Ya?Ya.value:Ya.textContent,Yo=!0)),_=qi(u,b),0<_.length&&(b=new Jd(b,e,null,a,d),h.push({event:b,listeners:_}),S?b.data=S:(S=_p(a),S!==null&&(b.data=S)))),(S=Qx?Jx(e,a):Zx(e,a))&&(u=qi(u,"onBeforeInput"),0<u.length&&(d=new Jd("onBeforeInput","beforeinput",null,a,d),h.push({event:d,listeners:u}),d.data=S))}Fp(h,t)})}function mr(e,t,a){return{instance:e,listener:t,currentTarget:a}}function qi(e,t){for(var a=t+"Capture",o=[];e!==null;){var n=e,r=n.stateNode;n.tag===5&&r!==null&&(n=r,r=sr(e,a),r!=null&&o.unshift(mr(e,r,n)),r=sr(e,t),r!=null&&o.push(mr(e,r,n))),e=e.return}return o}function qo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ff(e,t,a,o,n){for(var r=t._reactName,i=[];a!==null&&a!==o;){var s=a,l=s.alternate,u=s.stateNode;if(l!==null&&l===o)break;s.tag===5&&u!==null&&(s=u,n?(l=sr(a,r),l!=null&&i.unshift(mr(a,l,s))):n||(l=sr(a,r),l!=null&&i.push(mr(a,l,s)))),a=a.return}i.length!==0&&e.push({event:t,listeners:i})}var dv=/\r\n?/g,fv=/\u0000|\uFFFD/g;function pf(e){return(typeof e=="string"?e:""+e).replace(dv,`
`).replace(fv,"")}function bi(e,t,a){if(t=pf(t),pf(e)!==t&&a)throw Error(T(425))}function ji(){}var Ql=null,Jl=null;function Zl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var eu=typeof setTimeout=="function"?setTimeout:void 0,pv=typeof clearTimeout=="function"?clearTimeout:void 0,mf=typeof Promise=="function"?Promise:void 0,mv=typeof queueMicrotask=="function"?queueMicrotask:typeof mf<"u"?function(e){return mf.resolve(null).then(e).catch(gv)}:eu;function gv(e){setTimeout(function(){throw e})}function wl(e,t){var a=t,o=0;do{var n=a.nextSibling;if(e.removeChild(a),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(o===0){e.removeChild(n),cr(t);return}o--}else a!=="$"&&a!=="$?"&&a!=="$!"||o++;a=n}while(a);cr(t)}function eo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function gf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}var wn=Math.random().toString(36).slice(2),Sa="__reactFiber$"+wn,gr="__reactProps$"+wn,Pa="__reactContainer$"+wn,tu="__reactEvents$"+wn,hv="__reactListeners$"+wn,xv="__reactHandles$"+wn;function wo(e){var t=e[Sa];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Pa]||a[Sa]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=gf(e);e!==null;){if(a=e[Sa])return a;e=gf(e)}return t}e=a,a=e.parentNode}return null}function Lr(e){return e=e[Sa]||e[Pa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Jo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(T(33))}function ps(e){return e[gr]||null}var au=[],Zo=-1;function lo(e){return{current:e}}function Le(e){0>Zo||(e.current=au[Zo],au[Zo]=null,Zo--)}function Se(e,t){Zo++,au[Zo]=e.current,e.current=t}var io={},st=lo(io),St=lo(!1),_o=io;function pn(e,t){var a=e.type.contextTypes;if(!a)return io;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var n={},r;for(r in a)n[r]=t[r];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function It(e){return e=e.childContextTypes,e!=null}function Ki(){Le(St),Le(st)}function hf(e,t,a){if(st.current!==io)throw Error(T(168));Se(st,t),Se(St,a)}function Up(e,t,a){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return a;o=o.getChildContext();for(var n in o)if(!(n in t))throw Error(T(108,ox(e)||"Unknown",n));return Re({},a,o)}function Yi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||io,_o=st.current,Se(st,e),Se(St,St.current),!0}function xf(e,t,a){var o=e.stateNode;if(!o)throw Error(T(169));a?(e=Up(e,t,_o),o.__reactInternalMemoizedMergedChildContext=e,Le(St),Le(st),Se(st,e)):Le(St),Se(St,a)}var Ta=null,ms=!1,Sl=!1;function Bp(e){Ta===null?Ta=[e]:Ta.push(e)}function vv(e){ms=!0,Bp(e)}function uo(){if(!Sl&&Ta!==null){Sl=!0;var e=0,t=me;try{var a=Ta;for(me=1;e<a.length;e++){var o=a[e];do o=o(!0);while(o!==null)}Ta=null,ms=!1}catch(n){throw Ta!==null&&(Ta=Ta.slice(e+1)),dp(Tu,uo),n}finally{me=t,Sl=!1}}return null}var en=[],tn=0,Xi=null,Qi=0,Gt=[],qt=0,ko=null,Aa=1,Ra="";function vo(e,t){en[tn++]=Qi,en[tn++]=Xi,Xi=e,Qi=t}function Hp(e,t,a){Gt[qt++]=Aa,Gt[qt++]=Ra,Gt[qt++]=ko,ko=e;var o=Aa;e=Ra;var n=32-ua(o)-1;o&=~(1<<n),a+=1;var r=32-ua(t)+n;if(30<r){var i=n-n%5;r=(o&(1<<i)-1).toString(32),o>>=i,n-=i,Aa=1<<32-ua(t)+n|a<<n|o,Ra=r+e}else Aa=1<<r|a<<n|o,Ra=e}function zu(e){e.return!==null&&(vo(e,1),Hp(e,1,0))}function Uu(e){for(;e===Xi;)Xi=en[--tn],en[tn]=null,Qi=en[--tn],en[tn]=null;for(;e===ko;)ko=Gt[--qt],Gt[qt]=null,Ra=Gt[--qt],Gt[qt]=null,Aa=Gt[--qt],Gt[qt]=null}var Nt=null,Rt=null,Ee=!1,la=null;function $p(e,t){var a=jt(5,null,null,0);a.elementType="DELETED",a.stateNode=t,a.return=e,t=e.deletions,t===null?(e.deletions=[a],e.flags|=16):t.push(a)}function vf(e,t){switch(e.tag){case 5:var a=e.type;return t=t.nodeType!==1||a.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Nt=e,Rt=eo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Nt=e,Rt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(a=ko!==null?{id:Aa,overflow:Ra}:null,e.memoizedState={dehydrated:t,treeContext:a,retryLane:1073741824},a=jt(18,null,null,0),a.stateNode=t,a.return=e,e.child=a,Nt=e,Rt=null,!0):!1;default:return!1}}function ou(e){return(e.mode&1)!==0&&(e.flags&128)===0}function nu(e){if(Ee){var t=Rt;if(t){var a=t;if(!vf(e,t)){if(ou(e))throw Error(T(418));t=eo(a.nextSibling);var o=Nt;t&&vf(e,t)?$p(o,a):(e.flags=e.flags&-4097|2,Ee=!1,Nt=e)}}else{if(ou(e))throw Error(T(418));e.flags=e.flags&-4097|2,Ee=!1,Nt=e}}}function yf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Nt=e}function Li(e){if(e!==Nt)return!1;if(!Ee)return yf(e),Ee=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Zl(e.type,e.memoizedProps)),t&&(t=Rt)){if(ou(e))throw Wp(),Error(T(418));for(;t;)$p(e,t),t=eo(t.nextSibling)}if(yf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(T(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(t===0){Rt=eo(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++}e=e.nextSibling}Rt=null}}else Rt=Nt?eo(e.stateNode.nextSibling):null;return!0}function Wp(){for(var e=Rt;e;)e=eo(e.nextSibling)}function mn(){Rt=Nt=null,Ee=!1}function Bu(e){la===null?la=[e]:la.push(e)}var yv=Fa.ReactCurrentBatchConfig;function $n(e,t,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(T(309));var o=a.stateNode}if(!o)throw Error(T(147,e));var n=o,r=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(i){var s=n.refs;i===null?delete s[r]:s[r]=i},t._stringRef=r,t)}if(typeof e!="string")throw Error(T(284));if(!a._owner)throw Error(T(290,e))}return e}function _i(e,t){throw e=Object.prototype.toString.call(t),Error(T(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wf(e){var t=e._init;return t(e._payload)}function Vp(e){function t(f,c){if(e){var p=f.deletions;p===null?(f.deletions=[c],f.flags|=16):p.push(c)}}function a(f,c){if(!e)return null;for(;c!==null;)t(f,c),c=c.sibling;return null}function o(f,c){for(f=new Map;c!==null;)c.key!==null?f.set(c.key,c):f.set(c.index,c),c=c.sibling;return f}function n(f,c){return f=no(f,c),f.index=0,f.sibling=null,f}function r(f,c,p){return f.index=p,e?(p=f.alternate,p!==null?(p=p.index,p<c?(f.flags|=2,c):p):(f.flags|=2,c)):(f.flags|=1048576,c)}function i(f){return e&&f.alternate===null&&(f.flags|=2),f}function s(f,c,p,w){return c===null||c.tag!==6?(c=El(p,f.mode,w),c.return=f,c):(c=n(c,p),c.return=f,c)}function l(f,c,p,w){var L=p.type;return L===Ko?d(f,c,p.props.children,w,p.key):c!==null&&(c.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ga&&wf(L)===c.type)?(w=n(c,p.props),w.ref=$n(f,c,p),w.return=f,w):(w=zi(p.type,p.key,p.props,null,f.mode,w),w.ref=$n(f,c,p),w.return=f,w)}function u(f,c,p,w){return c===null||c.tag!==4||c.stateNode.containerInfo!==p.containerInfo||c.stateNode.implementation!==p.implementation?(c=Tl(p,f.mode,w),c.return=f,c):(c=n(c,p.children||[]),c.return=f,c)}function d(f,c,p,w,L){return c===null||c.tag!==7?(c=Lo(p,f.mode,w,L),c.return=f,c):(c=n(c,p),c.return=f,c)}function h(f,c,p){if(typeof c=="string"&&c!==""||typeof c=="number")return c=El(""+c,f.mode,p),c.return=f,c;if(typeof c=="object"&&c!==null){switch(c.$$typeof){case ci:return p=zi(c.type,c.key,c.props,null,f.mode,p),p.ref=$n(f,null,c),p.return=f,p;case jo:return c=Tl(c,f.mode,p),c.return=f,c;case Ga:var w=c._init;return h(f,w(c._payload),p)}if(jn(c)||zn(c))return c=Lo(c,f.mode,p,null),c.return=f,c;_i(f,c)}return null}function x(f,c,p,w){var L=c!==null?c.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return L!==null?null:s(f,c,""+p,w);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ci:return p.key===L?l(f,c,p,w):null;case jo:return p.key===L?u(f,c,p,w):null;case Ga:return L=p._init,x(f,c,L(p._payload),w)}if(jn(p)||zn(p))return L!==null?null:d(f,c,p,w,null);_i(f,p)}return null}function v(f,c,p,w,L){if(typeof w=="string"&&w!==""||typeof w=="number")return f=f.get(p)||null,s(c,f,""+w,L);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ci:return f=f.get(w.key===null?p:w.key)||null,l(c,f,w,L);case jo:return f=f.get(w.key===null?p:w.key)||null,u(c,f,w,L);case Ga:var _=w._init;return v(f,c,p,_(w._payload),L)}if(jn(w)||zn(w))return f=f.get(p)||null,d(c,f,w,L,null);_i(c,w)}return null}function y(f,c,p,w){for(var L=null,_=null,S=c,b=c=0,$=null;S!==null&&b<p.length;b++){S.index>b?($=S,S=null):$=S.sibling;var O=x(f,S,p[b],w);if(O===null){S===null&&(S=$);break}e&&S&&O.alternate===null&&t(f,S),c=r(O,c,b),_===null?L=O:_.sibling=O,_=O,S=$}if(b===p.length)return a(f,S),Ee&&vo(f,b),L;if(S===null){for(;b<p.length;b++)S=h(f,p[b],w),S!==null&&(c=r(S,c,b),_===null?L=S:_.sibling=S,_=S);return Ee&&vo(f,b),L}for(S=o(f,S);b<p.length;b++)$=v(S,f,b,p[b],w),$!==null&&(e&&$.alternate!==null&&S.delete($.key===null?b:$.key),c=r($,c,b),_===null?L=$:_.sibling=$,_=$);return e&&S.forEach(function(D){return t(f,D)}),Ee&&vo(f,b),L}function I(f,c,p,w){var L=zn(p);if(typeof L!="function")throw Error(T(150));if(p=L.call(p),p==null)throw Error(T(151));for(var _=L=null,S=c,b=c=0,$=null,O=p.next();S!==null&&!O.done;b++,O=p.next()){S.index>b?($=S,S=null):$=S.sibling;var D=x(f,S,O.value,w);if(D===null){S===null&&(S=$);break}e&&S&&D.alternate===null&&t(f,S),c=r(D,c,b),_===null?L=D:_.sibling=D,_=D,S=$}if(O.done)return a(f,S),Ee&&vo(f,b),L;if(S===null){for(;!O.done;b++,O=p.next())O=h(f,O.value,w),O!==null&&(c=r(O,c,b),_===null?L=O:_.sibling=O,_=O);return Ee&&vo(f,b),L}for(S=o(f,S);!O.done;b++,O=p.next())O=v(S,f,b,O.value,w),O!==null&&(e&&O.alternate!==null&&S.delete(O.key===null?b:O.key),c=r(O,c,b),_===null?L=O:_.sibling=O,_=O);return e&&S.forEach(function(G){return t(f,G)}),Ee&&vo(f,b),L}function F(f,c,p,w){if(typeof p=="object"&&p!==null&&p.type===Ko&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case ci:e:{for(var L=p.key,_=c;_!==null;){if(_.key===L){if(L=p.type,L===Ko){if(_.tag===7){a(f,_.sibling),c=n(_,p.props.children),c.return=f,f=c;break e}}else if(_.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ga&&wf(L)===_.type){a(f,_.sibling),c=n(_,p.props),c.ref=$n(f,_,p),c.return=f,f=c;break e}a(f,_);break}else t(f,_);_=_.sibling}p.type===Ko?(c=Lo(p.props.children,f.mode,w,p.key),c.return=f,f=c):(w=zi(p.type,p.key,p.props,null,f.mode,w),w.ref=$n(f,c,p),w.return=f,f=w)}return i(f);case jo:e:{for(_=p.key;c!==null;){if(c.key===_)if(c.tag===4&&c.stateNode.containerInfo===p.containerInfo&&c.stateNode.implementation===p.implementation){a(f,c.sibling),c=n(c,p.children||[]),c.return=f,f=c;break e}else{a(f,c);break}else t(f,c);c=c.sibling}c=Tl(p,f.mode,w),c.return=f,f=c}return i(f);case Ga:return _=p._init,F(f,c,_(p._payload),w)}if(jn(p))return y(f,c,p,w);if(zn(p))return I(f,c,p,w);_i(f,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,c!==null&&c.tag===6?(a(f,c.sibling),c=n(c,p),c.return=f,f=c):(a(f,c),c=El(p,f.mode,w),c.return=f,f=c),i(f)):a(f,c)}return F}var gn=Vp(!0),Gp=Vp(!1),Ji=lo(null),Zi=null,an=null,Hu=null;function $u(){Hu=an=Zi=null}function Wu(e){var t=Ji.current;Le(Ji),e._currentValue=t}function ru(e,t,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===a)break;e=e.return}}function cn(e,t){Zi=e,Hu=an=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(wt=!0),e.firstContext=null)}function Yt(e){var t=e._currentValue;if(Hu!==e)if(e={context:e,memoizedValue:t,next:null},an===null){if(Zi===null)throw Error(T(308));an=e,Zi.dependencies={lanes:0,firstContext:e}}else an=an.next=e;return t}var So=null;function Vu(e){So===null?So=[e]:So.push(e)}function qp(e,t,a,o){var n=t.interleaved;return n===null?(a.next=a,Vu(t)):(a.next=n.next,n.next=a),t.interleaved=a,Da(e,o)}function Da(e,t){e.lanes|=t;var a=e.alternate;for(a!==null&&(a.lanes|=t),a=e,e=e.return;e!==null;)e.childLanes|=t,a=e.alternate,a!==null&&(a.childLanes|=t),a=e,e=e.return;return a.tag===3?a.stateNode:null}var qa=!1;function Gu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Na(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function to(e,t,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(ie&2)!==0){var n=o.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),o.pending=t,Da(e,a)}return n=o.interleaved,n===null?(t.next=t,Vu(o)):(t.next=n.next,n.next=t),o.interleaved=t,Da(e,a)}function Ni(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,a|=o,t.lanes=a,Au(e,a)}}function Sf(e,t){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var n=null,r=null;if(a=a.firstBaseUpdate,a!==null){do{var i={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};r===null?n=r=i:r=r.next=i,a=a.next}while(a!==null);r===null?n=r=t:r=r.next=t}else n=r=t;a={baseState:o.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:o.shared,effects:o.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}function es(e,t,a,o){var n=e.updateQueue;qa=!1;var r=n.firstBaseUpdate,i=n.lastBaseUpdate,s=n.shared.pending;if(s!==null){n.shared.pending=null;var l=s,u=l.next;l.next=null,i===null?r=u:i.next=u,i=l;var d=e.alternate;d!==null&&(d=d.updateQueue,s=d.lastBaseUpdate,s!==i&&(s===null?d.firstBaseUpdate=u:s.next=u,d.lastBaseUpdate=l))}if(r!==null){var h=n.baseState;i=0,d=u=l=null,s=r;do{var x=s.lane,v=s.eventTime;if((o&x)===x){d!==null&&(d=d.next={eventTime:v,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var y=e,I=s;switch(x=t,v=a,I.tag){case 1:if(y=I.payload,typeof y=="function"){h=y.call(v,h,x);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=I.payload,x=typeof y=="function"?y.call(v,h,x):y,x==null)break e;h=Re({},h,x);break e;case 2:qa=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,x=n.effects,x===null?n.effects=[s]:x.push(s))}else v={eventTime:v,lane:x,tag:s.tag,payload:s.payload,callback:s.callback,next:null},d===null?(u=d=v,l=h):d=d.next=v,i|=x;if(s=s.next,s===null){if(s=n.shared.pending,s===null)break;x=s,s=x.next,x.next=null,n.lastBaseUpdate=x,n.shared.pending=null}}while(!0);if(d===null&&(l=h),n.baseState=l,n.firstBaseUpdate=u,n.lastBaseUpdate=d,t=n.shared.interleaved,t!==null){n=t;do i|=n.lane,n=n.next;while(n!==t)}else r===null&&(n.shared.lanes=0);Eo|=i,e.lanes=i,e.memoizedState=h}}function If(e,t,a){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],n=o.callback;if(n!==null){if(o.callback=null,o=a,typeof n!="function")throw Error(T(191,n));n.call(o)}}}var _r={},ba=lo(_r),hr=lo(_r),xr=lo(_r);function Io(e){if(e===_r)throw Error(T(174));return e}function qu(e,t){switch(Se(xr,t),Se(hr,e),Se(ba,_r),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ul(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ul(t,e)}Le(ba),Se(ba,t)}function hn(){Le(ba),Le(hr),Le(xr)}function Kp(e){Io(xr.current);var t=Io(ba.current),a=Ul(t,e.type);t!==a&&(Se(hr,e),Se(ba,a))}function ju(e){hr.current===e&&(Le(ba),Le(hr))}var Te=lo(0);function ts(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Il=[];function Ku(){for(var e=0;e<Il.length;e++)Il[e]._workInProgressVersionPrimary=null;Il.length=0}var Oi=Fa.ReactCurrentDispatcher,bl=Fa.ReactCurrentBatchConfig,Co=0,Ae=null,$e=null,qe=null,as=!1,tr=!1,vr=0,wv=0;function nt(){throw Error(T(321))}function Yu(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!da(e[a],t[a]))return!1;return!0}function Xu(e,t,a,o,n,r){if(Co=r,Ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Oi.current=e===null||e.memoizedState===null?Lv:_v,e=a(o,n),tr){r=0;do{if(tr=!1,vr=0,25<=r)throw Error(T(301));r+=1,qe=$e=null,t.updateQueue=null,Oi.current=kv,e=a(o,n)}while(tr)}if(Oi.current=os,t=$e!==null&&$e.next!==null,Co=0,qe=$e=Ae=null,as=!1,t)throw Error(T(300));return e}function Qu(){var e=vr!==0;return vr=0,e}function wa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Ae.memoizedState=qe=e:qe=qe.next=e,qe}function Xt(){if($e===null){var e=Ae.alternate;e=e!==null?e.memoizedState:null}else e=$e.next;var t=qe===null?Ae.memoizedState:qe.next;if(t!==null)qe=t,$e=e;else{if(e===null)throw Error(T(310));$e=e,e={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},qe===null?Ae.memoizedState=qe=e:qe=qe.next=e}return qe}function yr(e,t){return typeof t=="function"?t(e):t}function Ll(e){var t=Xt(),a=t.queue;if(a===null)throw Error(T(311));a.lastRenderedReducer=e;var o=$e,n=o.baseQueue,r=a.pending;if(r!==null){if(n!==null){var i=n.next;n.next=r.next,r.next=i}o.baseQueue=n=r,a.pending=null}if(n!==null){r=n.next,o=o.baseState;var s=i=null,l=null,u=r;do{var d=u.lane;if((Co&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),o=u.hasEagerState?u.eagerState:e(o,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=h,i=o):l=l.next=h,Ae.lanes|=d,Eo|=d}u=u.next}while(u!==null&&u!==r);l===null?i=o:l.next=s,da(o,t.memoizedState)||(wt=!0),t.memoizedState=o,t.baseState=i,t.baseQueue=l,a.lastRenderedState=o}if(e=a.interleaved,e!==null){n=e;do r=n.lane,Ae.lanes|=r,Eo|=r,n=n.next;while(n!==e)}else n===null&&(a.lanes=0);return[t.memoizedState,a.dispatch]}function _l(e){var t=Xt(),a=t.queue;if(a===null)throw Error(T(311));a.lastRenderedReducer=e;var o=a.dispatch,n=a.pending,r=t.memoizedState;if(n!==null){a.pending=null;var i=n=n.next;do r=e(r,i.action),i=i.next;while(i!==n);da(r,t.memoizedState)||(wt=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),a.lastRenderedState=r}return[r,o]}function Yp(){}function Xp(e,t){var a=Ae,o=Xt(),n=t(),r=!da(o.memoizedState,n);if(r&&(o.memoizedState=n,wt=!0),o=o.queue,Ju(Zp.bind(null,a,o,e),[e]),o.getSnapshot!==t||r||qe!==null&&qe.memoizedState.tag&1){if(a.flags|=2048,wr(9,Jp.bind(null,a,o,n,t),void 0,null),je===null)throw Error(T(349));(Co&30)!==0||Qp(a,t,n)}return n}function Qp(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Jp(e,t,a,o){t.value=a,t.getSnapshot=o,em(t)&&tm(e)}function Zp(e,t,a){return a(function(){em(t)&&tm(e)})}function em(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!da(e,a)}catch{return!0}}function tm(e){var t=Da(e,1);t!==null&&ca(t,e,1,-1)}function bf(e){var t=wa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yr,lastRenderedState:e},t.queue=e,e=e.dispatch=bv.bind(null,Ae,e),[t.memoizedState,e]}function wr(e,t,a,o){return e={tag:e,create:t,destroy:a,deps:o,next:null},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.lastEffect=e.next=e):(a=t.lastEffect,a===null?t.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,t.lastEffect=e)),e}function am(){return Xt().memoizedState}function Pi(e,t,a,o){var n=wa();Ae.flags|=e,n.memoizedState=wr(1|t,a,void 0,o===void 0?null:o)}function gs(e,t,a,o){var n=Xt();o=o===void 0?null:o;var r=void 0;if($e!==null){var i=$e.memoizedState;if(r=i.destroy,o!==null&&Yu(o,i.deps)){n.memoizedState=wr(t,a,r,o);return}}Ae.flags|=e,n.memoizedState=wr(1|t,a,r,o)}function Lf(e,t){return Pi(8390656,8,e,t)}function Ju(e,t){return gs(2048,8,e,t)}function om(e,t){return gs(4,2,e,t)}function nm(e,t){return gs(4,4,e,t)}function rm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function im(e,t,a){return a=a!=null?a.concat([e]):null,gs(4,4,rm.bind(null,t,e),a)}function Zu(){}function sm(e,t){var a=Xt();t=t===void 0?null:t;var o=a.memoizedState;return o!==null&&t!==null&&Yu(t,o[1])?o[0]:(a.memoizedState=[e,t],e)}function lm(e,t){var a=Xt();t=t===void 0?null:t;var o=a.memoizedState;return o!==null&&t!==null&&Yu(t,o[1])?o[0]:(e=e(),a.memoizedState=[e,t],e)}function um(e,t,a){return(Co&21)===0?(e.baseState&&(e.baseState=!1,wt=!0),e.memoizedState=a):(da(a,t)||(a=mp(),Ae.lanes|=a,Eo|=a,e.baseState=!0),t)}function Sv(e,t){var a=me;me=a!==0&&4>a?a:4,e(!0);var o=bl.transition;bl.transition={};try{e(!1),t()}finally{me=a,bl.transition=o}}function cm(){return Xt().memoizedState}function Iv(e,t,a){var o=oo(e);if(a={lane:o,action:a,hasEagerState:!1,eagerState:null,next:null},dm(e))fm(t,a);else if(a=qp(e,t,a,o),a!==null){var n=dt();ca(a,e,o,n),pm(a,t,o)}}function bv(e,t,a){var o=oo(e),n={lane:o,action:a,hasEagerState:!1,eagerState:null,next:null};if(dm(e))fm(t,n);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var i=t.lastRenderedState,s=r(i,a);if(n.hasEagerState=!0,n.eagerState=s,da(s,i)){var l=t.interleaved;l===null?(n.next=n,Vu(t)):(n.next=l.next,l.next=n),t.interleaved=n;return}}catch{}finally{}a=qp(e,t,n,o),a!==null&&(n=dt(),ca(a,e,o,n),pm(a,t,o))}}function dm(e){var t=e.alternate;return e===Ae||t!==null&&t===Ae}function fm(e,t){tr=as=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function pm(e,t,a){if((a&4194240)!==0){var o=t.lanes;o&=e.pendingLanes,a|=o,t.lanes=a,Au(e,a)}}var os={readContext:Yt,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},Lv={readContext:Yt,useCallback:function(e,t){return wa().memoizedState=[e,t===void 0?null:t],e},useContext:Yt,useEffect:Lf,useImperativeHandle:function(e,t,a){return a=a!=null?a.concat([e]):null,Pi(4194308,4,rm.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Pi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pi(4,2,e,t)},useMemo:function(e,t){var a=wa();return t=t===void 0?null:t,e=e(),a.memoizedState=[e,t],e},useReducer:function(e,t,a){var o=wa();return t=a!==void 0?a(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=Iv.bind(null,Ae,e),[o.memoizedState,e]},useRef:function(e){var t=wa();return e={current:e},t.memoizedState=e},useState:bf,useDebugValue:Zu,useDeferredValue:function(e){return wa().memoizedState=e},useTransition:function(){var e=bf(!1),t=e[0];return e=Sv.bind(null,e[1]),wa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,a){var o=Ae,n=wa();if(Ee){if(a===void 0)throw Error(T(407));a=a()}else{if(a=t(),je===null)throw Error(T(349));(Co&30)!==0||Qp(o,t,a)}n.memoizedState=a;var r={value:a,getSnapshot:t};return n.queue=r,Lf(Zp.bind(null,o,r,e),[e]),o.flags|=2048,wr(9,Jp.bind(null,o,r,a,t),void 0,null),a},useId:function(){var e=wa(),t=je.identifierPrefix;if(Ee){var a=Ra,o=Aa;a=(o&~(1<<32-ua(o)-1)).toString(32)+a,t=":"+t+"R"+a,a=vr++,0<a&&(t+="H"+a.toString(32)),t+=":"}else a=wv++,t=":"+t+"r"+a.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_v={readContext:Yt,useCallback:sm,useContext:Yt,useEffect:Ju,useImperativeHandle:im,useInsertionEffect:om,useLayoutEffect:nm,useMemo:lm,useReducer:Ll,useRef:am,useState:function(){return Ll(yr)},useDebugValue:Zu,useDeferredValue:function(e){var t=Xt();return um(t,$e.memoizedState,e)},useTransition:function(){var e=Ll(yr)[0],t=Xt().memoizedState;return[e,t]},useMutableSource:Yp,useSyncExternalStore:Xp,useId:cm,unstable_isNewReconciler:!1},kv={readContext:Yt,useCallback:sm,useContext:Yt,useEffect:Ju,useImperativeHandle:im,useInsertionEffect:om,useLayoutEffect:nm,useMemo:lm,useReducer:_l,useRef:am,useState:function(){return _l(yr)},useDebugValue:Zu,useDeferredValue:function(e){var t=Xt();return $e===null?t.memoizedState=e:um(t,$e.memoizedState,e)},useTransition:function(){var e=_l(yr)[0],t=Xt().memoizedState;return[e,t]},useMutableSource:Yp,useSyncExternalStore:Xp,useId:cm,unstable_isNewReconciler:!1};function ia(e,t){if(e&&e.defaultProps){t=Re({},t),e=e.defaultProps;for(var a in e)t[a]===void 0&&(t[a]=e[a]);return t}return t}function iu(e,t,a,o){t=e.memoizedState,a=a(o,t),a=a==null?t:Re({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var hs={isMounted:function(e){return(e=e._reactInternals)?Ro(e)===e:!1},enqueueSetState:function(e,t,a){e=e._reactInternals;var o=dt(),n=oo(e),r=Na(o,n);r.payload=t,a!=null&&(r.callback=a),t=to(e,r,n),t!==null&&(ca(t,e,n,o),Ni(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var o=dt(),n=oo(e),r=Na(o,n);r.tag=1,r.payload=t,a!=null&&(r.callback=a),t=to(e,r,n),t!==null&&(ca(t,e,n,o),Ni(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=dt(),o=oo(e),n=Na(a,o);n.tag=2,t!=null&&(n.callback=t),t=to(e,n,o),t!==null&&(ca(t,e,o,a),Ni(t,e,o))}};function _f(e,t,a,o,n,r,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,r,i):t.prototype&&t.prototype.isPureReactComponent?!fr(a,o)||!fr(n,r):!0}function mm(e,t,a){var o=!1,n=io,r=t.contextType;return typeof r=="object"&&r!==null?r=Yt(r):(n=It(t)?_o:st.current,o=t.contextTypes,r=(o=o!=null)?pn(e,n):io),t=new t(a,r),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=hs,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=r),t}function kf(e,t,a,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,o),t.state!==e&&hs.enqueueReplaceState(t,t.state,null)}function su(e,t,a,o){var n=e.stateNode;n.props=a,n.state=e.memoizedState,n.refs={},Gu(e);var r=t.contextType;typeof r=="object"&&r!==null?n.context=Yt(r):(r=It(t)?_o:st.current,n.context=pn(e,r)),n.state=e.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(iu(e,t,r,a),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&hs.enqueueReplaceState(n,n.state,null),es(e,a,n,o),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function xn(e,t){try{var a="",o=t;do a+=ax(o),o=o.return;while(o);var n=a}catch(r){n=`
Error generating stack: `+r.message+`
`+r.stack}return{value:e,source:t,stack:n,digest:null}}function kl(e,t,a){return{value:e,source:null,stack:a??null,digest:t??null}}function lu(e,t){try{console.error(t.value)}catch(a){setTimeout(function(){throw a})}}var Cv=typeof WeakMap=="function"?WeakMap:Map;function gm(e,t,a){a=Na(-1,a),a.tag=3,a.payload={element:null};var o=t.value;return a.callback=function(){rs||(rs=!0,vu=o),lu(e,t)},a}function hm(e,t,a){a=Na(-1,a),a.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var n=t.value;a.payload=function(){return o(n)},a.callback=function(){lu(e,t)}}var r=e.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(a.callback=function(){lu(e,t),typeof o!="function"&&(ao===null?ao=new Set([this]):ao.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),a}function Cf(e,t,a){var o=e.pingCache;if(o===null){o=e.pingCache=new Cv;var n=new Set;o.set(t,n)}else n=o.get(t),n===void 0&&(n=new Set,o.set(t,n));n.has(a)||(n.add(a),e=Hv.bind(null,e,t,a),t.then(e,e))}function Ef(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Tf(e,t,a,o,n){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(t=Na(-1,1),t.tag=2,to(a,t,1))),a.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var Ev=Fa.ReactCurrentOwner,wt=!1;function ct(e,t,a,o){t.child=e===null?Gp(t,null,a,o):gn(t,e.child,a,o)}function Af(e,t,a,o,n){a=a.render;var r=t.ref;return cn(t,n),o=Xu(e,t,a,o,r,n),a=Qu(),e!==null&&!wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ma(e,t,n)):(Ee&&a&&zu(t),t.flags|=1,ct(e,t,o,n),t.child)}function Rf(e,t,a,o,n){if(e===null){var r=a.type;return typeof r=="function"&&!sc(r)&&r.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(t.tag=15,t.type=r,xm(e,t,r,o,n)):(e=zi(a.type,null,o,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,(e.lanes&n)===0){var i=r.memoizedProps;if(a=a.compare,a=a!==null?a:fr,a(i,o)&&e.ref===t.ref)return Ma(e,t,n)}return t.flags|=1,e=no(r,o),e.ref=t.ref,e.return=t,t.child=e}function xm(e,t,a,o,n){if(e!==null){var r=e.memoizedProps;if(fr(r,o)&&e.ref===t.ref)if(wt=!1,t.pendingProps=o=r,(e.lanes&n)!==0)(e.flags&131072)!==0&&(wt=!0);else return t.lanes=e.lanes,Ma(e,t,n)}return uu(e,t,a,o,n)}function vm(e,t,a){var o=t.pendingProps,n=o.children,r=e!==null?e.memoizedState:null;if(o.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(nn,At),At|=a;else{if((a&1073741824)===0)return e=r!==null?r.baseLanes|a:a,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Se(nn,At),At|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=r!==null?r.baseLanes:a,Se(nn,At),At|=o}else r!==null?(o=r.baseLanes|a,t.memoizedState=null):o=a,Se(nn,At),At|=o;return ct(e,t,n,a),t.child}function ym(e,t){var a=t.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(t.flags|=512,t.flags|=2097152)}function uu(e,t,a,o,n){var r=It(a)?_o:st.current;return r=pn(t,r),cn(t,n),a=Xu(e,t,a,o,r,n),o=Qu(),e!==null&&!wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ma(e,t,n)):(Ee&&o&&zu(t),t.flags|=1,ct(e,t,a,n),t.child)}function Nf(e,t,a,o,n){if(It(a)){var r=!0;Yi(t)}else r=!1;if(cn(t,n),t.stateNode===null)Di(e,t),mm(t,a,o),su(t,a,o,n),o=!0;else if(e===null){var i=t.stateNode,s=t.memoizedProps;i.props=s;var l=i.context,u=a.contextType;typeof u=="object"&&u!==null?u=Yt(u):(u=It(a)?_o:st.current,u=pn(t,u));var d=a.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==o||l!==u)&&kf(t,i,o,u),qa=!1;var x=t.memoizedState;i.state=x,es(t,o,i,n),l=t.memoizedState,s!==o||x!==l||St.current||qa?(typeof d=="function"&&(iu(t,a,d,o),l=t.memoizedState),(s=qa||_f(t,a,s,o,x,l,u))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=l),i.props=o,i.state=l,i.context=u,o=s):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{i=t.stateNode,jp(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ia(t.type,s),i.props=u,h=t.pendingProps,x=i.context,l=a.contextType,typeof l=="object"&&l!==null?l=Yt(l):(l=It(a)?_o:st.current,l=pn(t,l));var v=a.getDerivedStateFromProps;(d=typeof v=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==h||x!==l)&&kf(t,i,o,l),qa=!1,x=t.memoizedState,i.state=x,es(t,o,i,n);var y=t.memoizedState;s!==h||x!==y||St.current||qa?(typeof v=="function"&&(iu(t,a,v,o),y=t.memoizedState),(u=qa||_f(t,a,u,o,x,y,l)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(o,y,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(o,y,l)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||s===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=y),i.props=o,i.state=y,i.context=l,o=u):(typeof i.componentDidUpdate!="function"||s===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),o=!1)}return cu(e,t,a,o,r,n)}function cu(e,t,a,o,n,r){ym(e,t);var i=(t.flags&128)!==0;if(!o&&!i)return n&&xf(t,a,!1),Ma(e,t,r);o=t.stateNode,Ev.current=t;var s=i&&typeof a.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&i?(t.child=gn(t,e.child,null,r),t.child=gn(t,null,s,r)):ct(e,t,s,r),t.memoizedState=o.state,n&&xf(t,a,!0),t.child}function wm(e){var t=e.stateNode;t.pendingContext?hf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&hf(e,t.context,!1),qu(e,t.containerInfo)}function Of(e,t,a,o,n){return mn(),Bu(n),t.flags|=256,ct(e,t,a,o),t.child}var du={dehydrated:null,treeContext:null,retryLane:0};function fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Sm(e,t,a){var o=t.pendingProps,n=Te.current,r=!1,i=(t.flags&128)!==0,s;if((s=i)||(s=e!==null&&e.memoizedState===null?!1:(n&2)!==0),s?(r=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),Se(Te,n&1),e===null)return nu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(i=o.children,e=o.fallback,r?(o=t.mode,r=t.child,i={mode:"hidden",children:i},(o&1)===0&&r!==null?(r.childLanes=0,r.pendingProps=i):r=ys(i,o,0,null),e=Lo(e,o,a,null),r.return=t,e.return=t,r.sibling=e,t.child=r,t.child.memoizedState=fu(a),t.memoizedState=du,e):ec(t,i));if(n=e.memoizedState,n!==null&&(s=n.dehydrated,s!==null))return Tv(e,t,i,o,s,n,a);if(r){r=o.fallback,i=t.mode,n=e.child,s=n.sibling;var l={mode:"hidden",children:o.children};return(i&1)===0&&t.child!==n?(o=t.child,o.childLanes=0,o.pendingProps=l,t.deletions=null):(o=no(n,l),o.subtreeFlags=n.subtreeFlags&14680064),s!==null?r=no(s,r):(r=Lo(r,i,a,null),r.flags|=2),r.return=t,o.return=t,o.sibling=r,t.child=o,o=r,r=t.child,i=e.child.memoizedState,i=i===null?fu(a):{baseLanes:i.baseLanes|a,cachePool:null,transitions:i.transitions},r.memoizedState=i,r.childLanes=e.childLanes&~a,t.memoizedState=du,o}return r=e.child,e=r.sibling,o=no(r,{mode:"visible",children:o.children}),(t.mode&1)===0&&(o.lanes=a),o.return=t,o.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=o,t.memoizedState=null,o}function ec(e,t){return t=ys({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ki(e,t,a,o){return o!==null&&Bu(o),gn(t,e.child,null,a),e=ec(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Tv(e,t,a,o,n,r,i){if(a)return t.flags&256?(t.flags&=-257,o=kl(Error(T(422))),ki(e,t,i,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(r=o.fallback,n=t.mode,o=ys({mode:"visible",children:o.children},n,0,null),r=Lo(r,n,i,null),r.flags|=2,o.return=t,r.return=t,o.sibling=r,t.child=o,(t.mode&1)!==0&&gn(t,e.child,null,i),t.child.memoizedState=fu(i),t.memoizedState=du,r);if((t.mode&1)===0)return ki(e,t,i,null);if(n.data==="$!"){if(o=n.nextSibling&&n.nextSibling.dataset,o)var s=o.dgst;return o=s,r=Error(T(419)),o=kl(r,o,void 0),ki(e,t,i,o)}if(s=(i&e.childLanes)!==0,wt||s){if(o=je,o!==null){switch(i&-i){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=(n&(o.suspendedLanes|i))!==0?0:n,n!==0&&n!==r.retryLane&&(r.retryLane=n,Da(e,n),ca(o,e,n,-1))}return ic(),o=kl(Error(T(421))),ki(e,t,i,o)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=$v.bind(null,e),n._reactRetry=t,null):(e=r.treeContext,Rt=eo(n.nextSibling),Nt=t,Ee=!0,la=null,e!==null&&(Gt[qt++]=Aa,Gt[qt++]=Ra,Gt[qt++]=ko,Aa=e.id,Ra=e.overflow,ko=t),t=ec(t,o.children),t.flags|=4096,t)}function Pf(e,t,a){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),ru(e.return,t,a)}function Cl(e,t,a,o,n){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:n}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=o,r.tail=a,r.tailMode=n)}function Im(e,t,a){var o=t.pendingProps,n=o.revealOrder,r=o.tail;if(ct(e,t,o.children,a),o=Te.current,(o&2)!==0)o=o&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Pf(e,a,t);else if(e.tag===19)Pf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(Se(Te,o),(t.mode&1)===0)t.memoizedState=null;else switch(n){case"forwards":for(a=t.child,n=null;a!==null;)e=a.alternate,e!==null&&ts(e)===null&&(n=a),a=a.sibling;a=n,a===null?(n=t.child,t.child=null):(n=a.sibling,a.sibling=null),Cl(t,!1,n,a,r);break;case"backwards":for(a=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&ts(e)===null){t.child=n;break}e=n.sibling,n.sibling=a,a=n,n=e}Cl(t,!0,a,null,r);break;case"together":Cl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Di(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ma(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Eo|=t.lanes,(a&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(T(153));if(t.child!==null){for(e=t.child,a=no(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=no(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Av(e,t,a){switch(t.tag){case 3:wm(t),mn();break;case 5:Kp(t);break;case 1:It(t.type)&&Yi(t);break;case 4:qu(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,n=t.memoizedProps.value;Se(Ji,o._currentValue),o._currentValue=n;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(Se(Te,Te.current&1),t.flags|=128,null):(a&t.child.childLanes)!==0?Sm(e,t,a):(Se(Te,Te.current&1),e=Ma(e,t,a),e!==null?e.sibling:null);Se(Te,Te.current&1);break;case 19:if(o=(a&t.childLanes)!==0,(e.flags&128)!==0){if(o)return Im(e,t,a);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Se(Te,Te.current),o)break;return null;case 22:case 23:return t.lanes=0,vm(e,t,a)}return Ma(e,t,a)}var bm,pu,Lm,_m;bm=function(e,t){for(var a=t.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};pu=function(){};Lm=function(e,t,a,o){var n=e.memoizedProps;if(n!==o){e=t.stateNode,Io(ba.current);var r=null;switch(a){case"input":n=Dl(e,n),o=Dl(e,o),r=[];break;case"select":n=Re({},n,{value:void 0}),o=Re({},o,{value:void 0}),r=[];break;case"textarea":n=zl(e,n),o=zl(e,o),r=[];break;default:typeof n.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=ji)}Bl(a,o);var i;a=null;for(u in n)if(!o.hasOwnProperty(u)&&n.hasOwnProperty(u)&&n[u]!=null)if(u==="style"){var s=n[u];for(i in s)s.hasOwnProperty(i)&&(a||(a={}),a[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(rr.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in o){var l=o[u];if(s=n?.[u],o.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(i in s)!s.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(a||(a={}),a[i]="");for(i in l)l.hasOwnProperty(i)&&s[i]!==l[i]&&(a||(a={}),a[i]=l[i])}else a||(r||(r=[]),r.push(u,a)),a=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(r=r||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(rr.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&be("scroll",e),r||s===l||(r=[])):(r=r||[]).push(u,l))}a&&(r=r||[]).push("style",a);var u=r;(t.updateQueue=u)&&(t.flags|=4)}};_m=function(e,t,a,o){a!==o&&(t.flags|=4)};function Wn(e,t){if(!Ee)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function rt(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(t)for(var n=e.child;n!==null;)a|=n.lanes|n.childLanes,o|=n.subtreeFlags&14680064,o|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)a|=n.lanes|n.childLanes,o|=n.subtreeFlags,o|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=o,e.childLanes=a,t}function Rv(e,t,a){var o=t.pendingProps;switch(Uu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(t),null;case 1:return It(t.type)&&Ki(),rt(t),null;case 3:return o=t.stateNode,hn(),Le(St),Le(st),Ku(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Li(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,la!==null&&(Su(la),la=null))),pu(e,t),rt(t),null;case 5:ju(t);var n=Io(xr.current);if(a=t.type,e!==null&&t.stateNode!=null)Lm(e,t,a,o,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(T(166));return rt(t),null}if(e=Io(ba.current),Li(t)){o=t.stateNode,a=t.type;var r=t.memoizedProps;switch(o[Sa]=t,o[gr]=r,e=(t.mode&1)!==0,a){case"dialog":be("cancel",o),be("close",o);break;case"iframe":case"object":case"embed":be("load",o);break;case"video":case"audio":for(n=0;n<Yn.length;n++)be(Yn[n],o);break;case"source":be("error",o);break;case"img":case"image":case"link":be("error",o),be("load",o);break;case"details":be("toggle",o);break;case"input":Hd(o,r),be("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!r.multiple},be("invalid",o);break;case"textarea":Wd(o,r),be("invalid",o)}Bl(a,r),n=null;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];i==="children"?typeof s=="string"?o.textContent!==s&&(r.suppressHydrationWarning!==!0&&bi(o.textContent,s,e),n=["children",s]):typeof s=="number"&&o.textContent!==""+s&&(r.suppressHydrationWarning!==!0&&bi(o.textContent,s,e),n=["children",""+s]):rr.hasOwnProperty(i)&&s!=null&&i==="onScroll"&&be("scroll",o)}switch(a){case"input":di(o),$d(o,r,!0);break;case"textarea":di(o),Vd(o);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(o.onclick=ji)}o=n,t.updateQueue=o,o!==null&&(t.flags|=4)}else{i=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Zf(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=i.createElement(a,{is:o.is}):(e=i.createElement(a),a==="select"&&(i=e,o.multiple?i.multiple=!0:o.size&&(i.size=o.size))):e=i.createElementNS(e,a),e[Sa]=t,e[gr]=o,bm(e,t,!1,!1),t.stateNode=e;e:{switch(i=Hl(a,o),a){case"dialog":be("cancel",e),be("close",e),n=o;break;case"iframe":case"object":case"embed":be("load",e),n=o;break;case"video":case"audio":for(n=0;n<Yn.length;n++)be(Yn[n],e);n=o;break;case"source":be("error",e),n=o;break;case"img":case"image":case"link":be("error",e),be("load",e),n=o;break;case"details":be("toggle",e),n=o;break;case"input":Hd(e,o),n=Dl(e,o),be("invalid",e);break;case"option":n=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},n=Re({},o,{value:void 0}),be("invalid",e);break;case"textarea":Wd(e,o),n=zl(e,o),be("invalid",e);break;default:n=o}Bl(a,n),s=n;for(r in s)if(s.hasOwnProperty(r)){var l=s[r];r==="style"?ap(e,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ep(e,l)):r==="children"?typeof l=="string"?(a!=="textarea"||l!=="")&&ir(e,l):typeof l=="number"&&ir(e,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(rr.hasOwnProperty(r)?l!=null&&r==="onScroll"&&be("scroll",e):l!=null&&Lu(e,r,l,i))}switch(a){case"input":di(e),$d(e,o,!1);break;case"textarea":di(e),Vd(e);break;case"option":o.value!=null&&e.setAttribute("value",""+ro(o.value));break;case"select":e.multiple=!!o.multiple,r=o.value,r!=null?rn(e,!!o.multiple,r,!1):o.defaultValue!=null&&rn(e,!!o.multiple,o.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=ji)}switch(a){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return rt(t),null;case 6:if(e&&t.stateNode!=null)_m(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(T(166));if(a=Io(xr.current),Io(ba.current),Li(t)){if(o=t.stateNode,a=t.memoizedProps,o[Sa]=t,(r=o.nodeValue!==a)&&(e=Nt,e!==null))switch(e.tag){case 3:bi(o.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&bi(o.nodeValue,a,(e.mode&1)!==0)}r&&(t.flags|=4)}else o=(a.nodeType===9?a:a.ownerDocument).createTextNode(o),o[Sa]=t,t.stateNode=o}return rt(t),null;case 13:if(Le(Te),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ee&&Rt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Wp(),mn(),t.flags|=98560,r=!1;else if(r=Li(t),o!==null&&o.dehydrated!==null){if(e===null){if(!r)throw Error(T(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(T(317));r[Sa]=t}else mn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;rt(t),r=!1}else la!==null&&(Su(la),la=null),r=!0;if(!r)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=a,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Te.current&1)!==0?We===0&&(We=3):ic())),t.updateQueue!==null&&(t.flags|=4),rt(t),null);case 4:return hn(),pu(e,t),e===null&&pr(t.stateNode.containerInfo),rt(t),null;case 10:return Wu(t.type._context),rt(t),null;case 17:return It(t.type)&&Ki(),rt(t),null;case 19:if(Le(Te),r=t.memoizedState,r===null)return rt(t),null;if(o=(t.flags&128)!==0,i=r.rendering,i===null)if(o)Wn(r,!1);else{if(We!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=ts(e),i!==null){for(t.flags|=128,Wn(r,!1),o=i.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=a,a=t.child;a!==null;)r=a,e=o,r.flags&=14680066,i=r.alternate,i===null?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=i.childLanes,r.lanes=i.lanes,r.child=i.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=i.memoizedProps,r.memoizedState=i.memoizedState,r.updateQueue=i.updateQueue,r.type=i.type,e=i.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return Se(Te,Te.current&1|2),t.child}e=e.sibling}r.tail!==null&&ze()>vn&&(t.flags|=128,o=!0,Wn(r,!1),t.lanes=4194304)}else{if(!o)if(e=ts(i),e!==null){if(t.flags|=128,o=!0,a=e.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),Wn(r,!0),r.tail===null&&r.tailMode==="hidden"&&!i.alternate&&!Ee)return rt(t),null}else 2*ze()-r.renderingStartTime>vn&&a!==1073741824&&(t.flags|=128,o=!0,Wn(r,!1),t.lanes=4194304);r.isBackwards?(i.sibling=t.child,t.child=i):(a=r.last,a!==null?a.sibling=i:t.child=i,r.last=i)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=ze(),t.sibling=null,a=Te.current,Se(Te,o?a&1|2:a&1),t):(rt(t),null);case 22:case 23:return rc(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&(t.mode&1)!==0?(At&1073741824)!==0&&(rt(t),t.subtreeFlags&6&&(t.flags|=8192)):rt(t),null;case 24:return null;case 25:return null}throw Error(T(156,t.tag))}function Nv(e,t){switch(Uu(t),t.tag){case 1:return It(t.type)&&Ki(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hn(),Le(St),Le(st),Ku(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return ju(t),null;case 13:if(Le(Te),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(T(340));mn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Le(Te),null;case 4:return hn(),null;case 10:return Wu(t.type._context),null;case 22:case 23:return rc(),null;case 24:return null;default:return null}}var Ci=!1,it=!1,Ov=typeof WeakSet=="function"?WeakSet:Set,z=null;function on(e,t){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(o){Oe(e,t,o)}else a.current=null}function mu(e,t,a){try{a()}catch(o){Oe(e,t,o)}}var Df=!1;function Pv(e,t){if(Ql=Vi,e=Ap(),Fu(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var n=o.anchorOffset,r=o.focusNode;o=o.focusOffset;try{a.nodeType,r.nodeType}catch{a=null;break e}var i=0,s=-1,l=-1,u=0,d=0,h=e,x=null;t:for(;;){for(var v;h!==a||n!==0&&h.nodeType!==3||(s=i+n),h!==r||o!==0&&h.nodeType!==3||(l=i+o),h.nodeType===3&&(i+=h.nodeValue.length),(v=h.firstChild)!==null;)x=h,h=v;for(;;){if(h===e)break t;if(x===a&&++u===n&&(s=i),x===r&&++d===o&&(l=i),(v=h.nextSibling)!==null)break;h=x,x=h.parentNode}h=v}a=s===-1||l===-1?null:{start:s,end:l}}else a=null}a=a||{start:0,end:0}}else a=null;for(Jl={focusedElem:e,selectionRange:a},Vi=!1,z=t;z!==null;)if(t=z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,z=e;else for(;z!==null;){t=z;try{var y=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var I=y.memoizedProps,F=y.memoizedState,f=t.stateNode,c=f.getSnapshotBeforeUpdate(t.elementType===t.type?I:ia(t.type,I),F);f.__reactInternalSnapshotBeforeUpdate=c}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(w){Oe(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,z=e;break}z=t.return}return y=Df,Df=!1,y}function ar(e,t,a){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var n=o=o.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,r!==void 0&&mu(t,a,r)}n=n.next}while(n!==o)}}function xs(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var a=t=t.next;do{if((a.tag&e)===e){var o=a.create;a.destroy=o()}a=a.next}while(a!==t)}}function gu(e){var t=e.ref;if(t!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof t=="function"?t(e):t.current=e}}function km(e){var t=e.alternate;t!==null&&(e.alternate=null,km(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Sa],delete t[gr],delete t[tu],delete t[hv],delete t[xv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Cm(e){return e.tag===5||e.tag===3||e.tag===4}function Mf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Cm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hu(e,t,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?a.nodeType===8?a.parentNode.insertBefore(e,t):a.insertBefore(e,t):(a.nodeType===8?(t=a.parentNode,t.insertBefore(e,a)):(t=a,t.appendChild(e)),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=ji));else if(o!==4&&(e=e.child,e!==null))for(hu(e,t,a),e=e.sibling;e!==null;)hu(e,t,a),e=e.sibling}function xu(e,t,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(xu(e,t,a),e=e.sibling;e!==null;)xu(e,t,a),e=e.sibling}var Xe=null,sa=!1;function Va(e,t,a){for(a=a.child;a!==null;)Em(e,t,a),a=a.sibling}function Em(e,t,a){if(Ia&&typeof Ia.onCommitFiberUnmount=="function")try{Ia.onCommitFiberUnmount(us,a)}catch{}switch(a.tag){case 5:it||on(a,t);case 6:var o=Xe,n=sa;Xe=null,Va(e,t,a),Xe=o,sa=n,Xe!==null&&(sa?(e=Xe,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):Xe.removeChild(a.stateNode));break;case 18:Xe!==null&&(sa?(e=Xe,a=a.stateNode,e.nodeType===8?wl(e.parentNode,a):e.nodeType===1&&wl(e,a),cr(e)):wl(Xe,a.stateNode));break;case 4:o=Xe,n=sa,Xe=a.stateNode.containerInfo,sa=!0,Va(e,t,a),Xe=o,sa=n;break;case 0:case 11:case 14:case 15:if(!it&&(o=a.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){n=o=o.next;do{var r=n,i=r.destroy;r=r.tag,i!==void 0&&((r&2)!==0||(r&4)!==0)&&mu(a,t,i),n=n.next}while(n!==o)}Va(e,t,a);break;case 1:if(!it&&(on(a,t),o=a.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=a.memoizedProps,o.state=a.memoizedState,o.componentWillUnmount()}catch(s){Oe(a,t,s)}Va(e,t,a);break;case 21:Va(e,t,a);break;case 22:a.mode&1?(it=(o=it)||a.memoizedState!==null,Va(e,t,a),it=o):Va(e,t,a);break;default:Va(e,t,a)}}function Ff(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new Ov),t.forEach(function(o){var n=Wv.bind(null,e,o);a.has(o)||(a.add(o),o.then(n,n))})}}function ra(e,t){var a=t.deletions;if(a!==null)for(var o=0;o<a.length;o++){var n=a[o];try{var r=e,i=t,s=i;e:for(;s!==null;){switch(s.tag){case 5:Xe=s.stateNode,sa=!1;break e;case 3:Xe=s.stateNode.containerInfo,sa=!0;break e;case 4:Xe=s.stateNode.containerInfo,sa=!0;break e}s=s.return}if(Xe===null)throw Error(T(160));Em(r,i,n),Xe=null,sa=!1;var l=n.alternate;l!==null&&(l.return=null),n.return=null}catch(u){Oe(n,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Tm(t,e),t=t.sibling}function Tm(e,t){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ra(t,e),ya(e),o&4){try{ar(3,e,e.return),xs(3,e)}catch(I){Oe(e,e.return,I)}try{ar(5,e,e.return)}catch(I){Oe(e,e.return,I)}}break;case 1:ra(t,e),ya(e),o&512&&a!==null&&on(a,a.return);break;case 5:if(ra(t,e),ya(e),o&512&&a!==null&&on(a,a.return),e.flags&32){var n=e.stateNode;try{ir(n,"")}catch(I){Oe(e,e.return,I)}}if(o&4&&(n=e.stateNode,n!=null)){var r=e.memoizedProps,i=a!==null?a.memoizedProps:r,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&r.type==="radio"&&r.name!=null&&Qf(n,r),Hl(s,i);var u=Hl(s,r);for(i=0;i<l.length;i+=2){var d=l[i],h=l[i+1];d==="style"?ap(n,h):d==="dangerouslySetInnerHTML"?ep(n,h):d==="children"?ir(n,h):Lu(n,d,h,u)}switch(s){case"input":Ml(n,r);break;case"textarea":Jf(n,r);break;case"select":var x=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!r.multiple;var v=r.value;v!=null?rn(n,!!r.multiple,v,!1):x!==!!r.multiple&&(r.defaultValue!=null?rn(n,!!r.multiple,r.defaultValue,!0):rn(n,!!r.multiple,r.multiple?[]:"",!1))}n[gr]=r}catch(I){Oe(e,e.return,I)}}break;case 6:if(ra(t,e),ya(e),o&4){if(e.stateNode===null)throw Error(T(162));n=e.stateNode,r=e.memoizedProps;try{n.nodeValue=r}catch(I){Oe(e,e.return,I)}}break;case 3:if(ra(t,e),ya(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{cr(t.containerInfo)}catch(I){Oe(e,e.return,I)}break;case 4:ra(t,e),ya(e);break;case 13:ra(t,e),ya(e),n=e.child,n.flags&8192&&(r=n.memoizedState!==null,n.stateNode.isHidden=r,!r||n.alternate!==null&&n.alternate.memoizedState!==null||(oc=ze())),o&4&&Ff(e);break;case 22:if(d=a!==null&&a.memoizedState!==null,e.mode&1?(it=(u=it)||d,ra(t,e),it=u):ra(t,e),ya(e),o&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&(e.mode&1)!==0)for(z=e,d=e.child;d!==null;){for(h=z=d;z!==null;){switch(x=z,v=x.child,x.tag){case 0:case 11:case 14:case 15:ar(4,x,x.return);break;case 1:on(x,x.return);var y=x.stateNode;if(typeof y.componentWillUnmount=="function"){o=x,a=x.return;try{t=o,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(I){Oe(o,a,I)}}break;case 5:on(x,x.return);break;case 22:if(x.memoizedState!==null){Uf(h);continue}}v!==null?(v.return=x,z=v):Uf(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{n=h.stateNode,u?(r=n.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(s=h.stateNode,l=h.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=tp("display",i))}catch(I){Oe(e,e.return,I)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(I){Oe(e,e.return,I)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ra(t,e),ya(e),o&4&&Ff(e);break;case 21:break;default:ra(t,e),ya(e)}}function ya(e){var t=e.flags;if(t&2){try{e:{for(var a=e.return;a!==null;){if(Cm(a)){var o=a;break e}a=a.return}throw Error(T(160))}switch(o.tag){case 5:var n=o.stateNode;o.flags&32&&(ir(n,""),o.flags&=-33);var r=Mf(e);xu(e,r,n);break;case 3:case 4:var i=o.stateNode.containerInfo,s=Mf(e);hu(e,s,i);break;default:throw Error(T(161))}}catch(l){Oe(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Dv(e,t,a){z=e,Am(e,t,a)}function Am(e,t,a){for(var o=(e.mode&1)!==0;z!==null;){var n=z,r=n.child;if(n.tag===22&&o){var i=n.memoizedState!==null||Ci;if(!i){var s=n.alternate,l=s!==null&&s.memoizedState!==null||it;s=Ci;var u=it;if(Ci=i,(it=l)&&!u)for(z=n;z!==null;)i=z,l=i.child,i.tag===22&&i.memoizedState!==null?Bf(n):l!==null?(l.return=i,z=l):Bf(n);for(;r!==null;)z=r,Am(r,t,a),r=r.sibling;z=n,Ci=s,it=u}zf(e,t,a)}else(n.subtreeFlags&8772)!==0&&r!==null?(r.return=n,z=r):zf(e,t,a)}}function zf(e){for(;z!==null;){var t=z;if((t.flags&8772)!==0){var a=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:it||xs(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!it)if(a===null)o.componentDidMount();else{var n=t.elementType===t.type?a.memoizedProps:ia(t.type,a.memoizedProps);o.componentDidUpdate(n,a.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&If(t,r,o);break;case 3:var i=t.updateQueue;if(i!==null){if(a=null,t.child!==null)switch(t.child.tag){case 5:a=t.child.stateNode;break;case 1:a=t.child.stateNode}If(t,i,a)}break;case 5:var s=t.stateNode;if(a===null&&t.flags&4){a=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&a.focus();break;case"img":l.src&&(a.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&cr(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}it||t.flags&512&&gu(t)}catch(x){Oe(t,t.return,x)}}if(t===e){z=null;break}if(a=t.sibling,a!==null){a.return=t.return,z=a;break}z=t.return}}function Uf(e){for(;z!==null;){var t=z;if(t===e){z=null;break}var a=t.sibling;if(a!==null){a.return=t.return,z=a;break}z=t.return}}function Bf(e){for(;z!==null;){var t=z;try{switch(t.tag){case 0:case 11:case 15:var a=t.return;try{xs(4,t)}catch(l){Oe(t,a,l)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var n=t.return;try{o.componentDidMount()}catch(l){Oe(t,n,l)}}var r=t.return;try{gu(t)}catch(l){Oe(t,r,l)}break;case 5:var i=t.return;try{gu(t)}catch(l){Oe(t,i,l)}}}catch(l){Oe(t,t.return,l)}if(t===e){z=null;break}var s=t.sibling;if(s!==null){s.return=t.return,z=s;break}z=t.return}}var Mv=Math.ceil,ns=Fa.ReactCurrentDispatcher,tc=Fa.ReactCurrentOwner,Kt=Fa.ReactCurrentBatchConfig,ie=0,je=null,Ue=null,Qe=0,At=0,nn=lo(0),We=0,Sr=null,Eo=0,vs=0,ac=0,or=null,yt=null,oc=0,vn=1/0,Ea=null,rs=!1,vu=null,ao=null,Ei=!1,Xa=null,is=0,nr=0,yu=null,Mi=-1,Fi=0;function dt(){return(ie&6)!==0?ze():Mi!==-1?Mi:Mi=ze()}function oo(e){return(e.mode&1)===0?1:(ie&2)!==0&&Qe!==0?Qe&-Qe:yv.transition!==null?(Fi===0&&(Fi=mp()),Fi):(e=me,e!==0||(e=window.event,e=e===void 0?16:Sp(e.type)),e)}function ca(e,t,a,o){if(50<nr)throw nr=0,yu=null,Error(T(185));Ir(e,a,o),((ie&2)===0||e!==je)&&(e===je&&((ie&2)===0&&(vs|=a),We===4&&Ka(e,Qe)),bt(e,o),a===1&&ie===0&&(t.mode&1)===0&&(vn=ze()+500,ms&&uo()))}function bt(e,t){var a=e.callbackNode;Sx(e,t);var o=Wi(e,e===je?Qe:0);if(o===0)a!==null&&jd(a),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(a!=null&&jd(a),t===1)e.tag===0?vv(Hf.bind(null,e)):Bp(Hf.bind(null,e)),mv(function(){(ie&6)===0&&uo()}),a=null;else{switch(gp(o)){case 1:a=Tu;break;case 4:a=fp;break;case 16:a=$i;break;case 536870912:a=pp;break;default:a=$i}a=zm(a,Rm.bind(null,e))}e.callbackPriority=t,e.callbackNode=a}}function Rm(e,t){if(Mi=-1,Fi=0,(ie&6)!==0)throw Error(T(327));var a=e.callbackNode;if(dn()&&e.callbackNode!==a)return null;var o=Wi(e,e===je?Qe:0);if(o===0)return null;if((o&30)!==0||(o&e.expiredLanes)!==0||t)t=ss(e,o);else{t=o;var n=ie;ie|=2;var r=Om();(je!==e||Qe!==t)&&(Ea=null,vn=ze()+500,bo(e,t));do try{Uv();break}catch(s){Nm(e,s)}while(!0);$u(),ns.current=r,ie=n,Ue!==null?t=0:(je=null,Qe=0,t=We)}if(t!==0){if(t===2&&(n=ql(e),n!==0&&(o=n,t=wu(e,n))),t===1)throw a=Sr,bo(e,0),Ka(e,o),bt(e,ze()),a;if(t===6)Ka(e,o);else{if(n=e.current.alternate,(o&30)===0&&!Fv(n)&&(t=ss(e,o),t===2&&(r=ql(e),r!==0&&(o=r,t=wu(e,r))),t===1))throw a=Sr,bo(e,0),Ka(e,o),bt(e,ze()),a;switch(e.finishedWork=n,e.finishedLanes=o,t){case 0:case 1:throw Error(T(345));case 2:yo(e,yt,Ea);break;case 3:if(Ka(e,o),(o&130023424)===o&&(t=oc+500-ze(),10<t)){if(Wi(e,0)!==0)break;if(n=e.suspendedLanes,(n&o)!==o){dt(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=eu(yo.bind(null,e,yt,Ea),t);break}yo(e,yt,Ea);break;case 4:if(Ka(e,o),(o&4194240)===o)break;for(t=e.eventTimes,n=-1;0<o;){var i=31-ua(o);r=1<<i,i=t[i],i>n&&(n=i),o&=~r}if(o=n,o=ze()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Mv(o/1960))-o,10<o){e.timeoutHandle=eu(yo.bind(null,e,yt,Ea),o);break}yo(e,yt,Ea);break;case 5:yo(e,yt,Ea);break;default:throw Error(T(329))}}}return bt(e,ze()),e.callbackNode===a?Rm.bind(null,e):null}function wu(e,t){var a=or;return e.current.memoizedState.isDehydrated&&(bo(e,t).flags|=256),e=ss(e,t),e!==2&&(t=yt,yt=a,t!==null&&Su(t)),e}function Su(e){yt===null?yt=e:yt.push.apply(yt,e)}function Fv(e){for(var t=e;;){if(t.flags&16384){var a=t.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var o=0;o<a.length;o++){var n=a[o],r=n.getSnapshot;n=n.value;try{if(!da(r(),n))return!1}catch{return!1}}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ka(e,t){for(t&=~ac,t&=~vs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var a=31-ua(t),o=1<<a;e[a]=-1,t&=~o}}function Hf(e){if((ie&6)!==0)throw Error(T(327));dn();var t=Wi(e,0);if((t&1)===0)return bt(e,ze()),null;var a=ss(e,t);if(e.tag!==0&&a===2){var o=ql(e);o!==0&&(t=o,a=wu(e,o))}if(a===1)throw a=Sr,bo(e,0),Ka(e,t),bt(e,ze()),a;if(a===6)throw Error(T(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yo(e,yt,Ea),bt(e,ze()),null}function nc(e,t){var a=ie;ie|=1;try{return e(t)}finally{ie=a,ie===0&&(vn=ze()+500,ms&&uo())}}function To(e){Xa!==null&&Xa.tag===0&&(ie&6)===0&&dn();var t=ie;ie|=1;var a=Kt.transition,o=me;try{if(Kt.transition=null,me=1,e)return e()}finally{me=o,Kt.transition=a,ie=t,(ie&6)===0&&uo()}}function rc(){At=nn.current,Le(nn)}function bo(e,t){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,pv(a)),Ue!==null)for(a=Ue.return;a!==null;){var o=a;switch(Uu(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Ki();break;case 3:hn(),Le(St),Le(st),Ku();break;case 5:ju(o);break;case 4:hn();break;case 13:Le(Te);break;case 19:Le(Te);break;case 10:Wu(o.type._context);break;case 22:case 23:rc()}a=a.return}if(je=e,Ue=e=no(e.current,null),Qe=At=t,We=0,Sr=null,ac=vs=Eo=0,yt=or=null,So!==null){for(t=0;t<So.length;t++)if(a=So[t],o=a.interleaved,o!==null){a.interleaved=null;var n=o.next,r=a.pending;if(r!==null){var i=r.next;r.next=n,o.next=i}a.pending=o}So=null}return e}function Nm(e,t){do{var a=Ue;try{if($u(),Oi.current=os,as){for(var o=Ae.memoizedState;o!==null;){var n=o.queue;n!==null&&(n.pending=null),o=o.next}as=!1}if(Co=0,qe=$e=Ae=null,tr=!1,vr=0,tc.current=null,a===null||a.return===null){We=1,Sr=t,Ue=null;break}e:{var r=e,i=a.return,s=a,l=t;if(t=Qe,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=s,h=d.tag;if((d.mode&1)===0&&(h===0||h===11||h===15)){var x=d.alternate;x?(d.updateQueue=x.updateQueue,d.memoizedState=x.memoizedState,d.lanes=x.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=Ef(i);if(v!==null){v.flags&=-257,Tf(v,i,s,r,t),v.mode&1&&Cf(r,u,t),t=v,l=u;var y=t.updateQueue;if(y===null){var I=new Set;I.add(l),t.updateQueue=I}else y.add(l);break e}else{if((t&1)===0){Cf(r,u,t),ic();break e}l=Error(T(426))}}else if(Ee&&s.mode&1){var F=Ef(i);if(F!==null){(F.flags&65536)===0&&(F.flags|=256),Tf(F,i,s,r,t),Bu(xn(l,s));break e}}r=l=xn(l,s),We!==4&&(We=2),or===null?or=[r]:or.push(r),r=i;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var f=gm(r,l,t);Sf(r,f);break e;case 1:s=l;var c=r.type,p=r.stateNode;if((r.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ao===null||!ao.has(p)))){r.flags|=65536,t&=-t,r.lanes|=t;var w=hm(r,s,t);Sf(r,w);break e}}r=r.return}while(r!==null)}Dm(a)}catch(L){t=L,Ue===a&&a!==null&&(Ue=a=a.return);continue}break}while(!0)}function Om(){var e=ns.current;return ns.current=os,e===null?os:e}function ic(){(We===0||We===3||We===2)&&(We=4),je===null||(Eo&268435455)===0&&(vs&268435455)===0||Ka(je,Qe)}function ss(e,t){var a=ie;ie|=2;var o=Om();(je!==e||Qe!==t)&&(Ea=null,bo(e,t));do try{zv();break}catch(n){Nm(e,n)}while(!0);if($u(),ie=a,ns.current=o,Ue!==null)throw Error(T(261));return je=null,Qe=0,We}function zv(){for(;Ue!==null;)Pm(Ue)}function Uv(){for(;Ue!==null&&!fx();)Pm(Ue)}function Pm(e){var t=Fm(e.alternate,e,At);e.memoizedProps=e.pendingProps,t===null?Dm(e):Ue=t,tc.current=null}function Dm(e){var t=e;do{var a=t.alternate;if(e=t.return,(t.flags&32768)===0){if(a=Rv(a,t,At),a!==null){Ue=a;return}}else{if(a=Nv(a,t),a!==null){a.flags&=32767,Ue=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{We=6,Ue=null;return}}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);We===0&&(We=5)}function yo(e,t,a){var o=me,n=Kt.transition;try{Kt.transition=null,me=1,Bv(e,t,a,o)}finally{Kt.transition=n,me=o}return null}function Bv(e,t,a,o){do dn();while(Xa!==null);if((ie&6)!==0)throw Error(T(327));a=e.finishedWork;var n=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(T(177));e.callbackNode=null,e.callbackPriority=0;var r=a.lanes|a.childLanes;if(Ix(e,r),e===je&&(Ue=je=null,Qe=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Ei||(Ei=!0,zm($i,function(){return dn(),null})),r=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||r){r=Kt.transition,Kt.transition=null;var i=me;me=1;var s=ie;ie|=4,tc.current=null,Pv(e,a),Tm(a,e),lv(Jl),Vi=!!Ql,Jl=Ql=null,e.current=a,Dv(a,e,n),px(),ie=s,me=i,Kt.transition=r}else e.current=a;if(Ei&&(Ei=!1,Xa=e,is=n),r=e.pendingLanes,r===0&&(ao=null),hx(a.stateNode,o),bt(e,ze()),t!==null)for(o=e.onRecoverableError,a=0;a<t.length;a++)n=t[a],o(n.value,{componentStack:n.stack,digest:n.digest});if(rs)throw rs=!1,e=vu,vu=null,e;return(is&1)!==0&&e.tag!==0&&dn(),r=e.pendingLanes,(r&1)!==0?e===yu?nr++:(nr=0,yu=e):nr=0,uo(),null}function dn(){if(Xa!==null){var e=gp(is),t=Kt.transition,a=me;try{if(Kt.transition=null,me=16>e?16:e,Xa===null)var o=!1;else{if(e=Xa,Xa=null,is=0,(ie&6)!==0)throw Error(T(331));var n=ie;for(ie|=4,z=e.current;z!==null;){var r=z,i=r.child;if((z.flags&16)!==0){var s=r.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(z=u;z!==null;){var d=z;switch(d.tag){case 0:case 11:case 15:ar(8,d,r)}var h=d.child;if(h!==null)h.return=d,z=h;else for(;z!==null;){d=z;var x=d.sibling,v=d.return;if(km(d),d===u){z=null;break}if(x!==null){x.return=v,z=x;break}z=v}}}var y=r.alternate;if(y!==null){var I=y.child;if(I!==null){y.child=null;do{var F=I.sibling;I.sibling=null,I=F}while(I!==null)}}z=r}}if((r.subtreeFlags&2064)!==0&&i!==null)i.return=r,z=i;else e:for(;z!==null;){if(r=z,(r.flags&2048)!==0)switch(r.tag){case 0:case 11:case 15:ar(9,r,r.return)}var f=r.sibling;if(f!==null){f.return=r.return,z=f;break e}z=r.return}}var c=e.current;for(z=c;z!==null;){i=z;var p=i.child;if((i.subtreeFlags&2064)!==0&&p!==null)p.return=i,z=p;else e:for(i=c;z!==null;){if(s=z,(s.flags&2048)!==0)try{switch(s.tag){case 0:case 11:case 15:xs(9,s)}}catch(L){Oe(s,s.return,L)}if(s===i){z=null;break e}var w=s.sibling;if(w!==null){w.return=s.return,z=w;break e}z=s.return}}if(ie=n,uo(),Ia&&typeof Ia.onPostCommitFiberRoot=="function")try{Ia.onPostCommitFiberRoot(us,e)}catch{}o=!0}return o}finally{me=a,Kt.transition=t}}return!1}function $f(e,t,a){t=xn(a,t),t=gm(e,t,1),e=to(e,t,1),t=dt(),e!==null&&(Ir(e,1,t),bt(e,t))}function Oe(e,t,a){if(e.tag===3)$f(e,e,a);else for(;t!==null;){if(t.tag===3){$f(t,e,a);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ao===null||!ao.has(o))){e=xn(a,e),e=hm(t,e,1),t=to(t,e,1),e=dt(),t!==null&&(Ir(t,1,e),bt(t,e));break}}t=t.return}}function Hv(e,t,a){var o=e.pingCache;o!==null&&o.delete(t),t=dt(),e.pingedLanes|=e.suspendedLanes&a,je===e&&(Qe&a)===a&&(We===4||We===3&&(Qe&130023424)===Qe&&500>ze()-oc?bo(e,0):ac|=a),bt(e,t)}function Mm(e,t){t===0&&((e.mode&1)===0?t=1:(t=mi,mi<<=1,(mi&130023424)===0&&(mi=4194304)));var a=dt();e=Da(e,t),e!==null&&(Ir(e,t,a),bt(e,a))}function $v(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Mm(e,a)}function Wv(e,t){var a=0;switch(e.tag){case 13:var o=e.stateNode,n=e.memoizedState;n!==null&&(a=n.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(T(314))}o!==null&&o.delete(t),Mm(e,a)}var Fm;Fm=function(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps||St.current)wt=!0;else{if((e.lanes&a)===0&&(t.flags&128)===0)return wt=!1,Av(e,t,a);wt=(e.flags&131072)!==0}else wt=!1,Ee&&(t.flags&1048576)!==0&&Hp(t,Qi,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;Di(e,t),e=t.pendingProps;var n=pn(t,st.current);cn(t,a),n=Xu(null,t,o,e,n,a);var r=Qu();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,It(o)?(r=!0,Yi(t)):r=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Gu(t),n.updater=hs,t.stateNode=n,n._reactInternals=t,su(t,o,e,a),t=cu(null,t,o,!0,r,a)):(t.tag=0,Ee&&r&&zu(t),ct(null,t,n,a),t=t.child),t;case 16:o=t.elementType;e:{switch(Di(e,t),e=t.pendingProps,n=o._init,o=n(o._payload),t.type=o,n=t.tag=Gv(o),e=ia(o,e),n){case 0:t=uu(null,t,o,e,a);break e;case 1:t=Nf(null,t,o,e,a);break e;case 11:t=Af(null,t,o,e,a);break e;case 14:t=Rf(null,t,o,ia(o.type,e),a);break e}throw Error(T(306,o,""))}return t;case 0:return o=t.type,n=t.pendingProps,n=t.elementType===o?n:ia(o,n),uu(e,t,o,n,a);case 1:return o=t.type,n=t.pendingProps,n=t.elementType===o?n:ia(o,n),Nf(e,t,o,n,a);case 3:e:{if(wm(t),e===null)throw Error(T(387));o=t.pendingProps,r=t.memoizedState,n=r.element,jp(e,t),es(t,o,null,a);var i=t.memoizedState;if(o=i.element,r.isDehydrated)if(r={element:o,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){n=xn(Error(T(423)),t),t=Of(e,t,o,a,n);break e}else if(o!==n){n=xn(Error(T(424)),t),t=Of(e,t,o,a,n);break e}else for(Rt=eo(t.stateNode.containerInfo.firstChild),Nt=t,Ee=!0,la=null,a=Gp(t,null,o,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(mn(),o===n){t=Ma(e,t,a);break e}ct(e,t,o,a)}t=t.child}return t;case 5:return Kp(t),e===null&&nu(t),o=t.type,n=t.pendingProps,r=e!==null?e.memoizedProps:null,i=n.children,Zl(o,n)?i=null:r!==null&&Zl(o,r)&&(t.flags|=32),ym(e,t),ct(e,t,i,a),t.child;case 6:return e===null&&nu(t),null;case 13:return Sm(e,t,a);case 4:return qu(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=gn(t,null,o,a):ct(e,t,o,a),t.child;case 11:return o=t.type,n=t.pendingProps,n=t.elementType===o?n:ia(o,n),Af(e,t,o,n,a);case 7:return ct(e,t,t.pendingProps,a),t.child;case 8:return ct(e,t,t.pendingProps.children,a),t.child;case 12:return ct(e,t,t.pendingProps.children,a),t.child;case 10:e:{if(o=t.type._context,n=t.pendingProps,r=t.memoizedProps,i=n.value,Se(Ji,o._currentValue),o._currentValue=i,r!==null)if(da(r.value,i)){if(r.children===n.children&&!St.current){t=Ma(e,t,a);break e}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var s=r.dependencies;if(s!==null){i=r.child;for(var l=s.firstContext;l!==null;){if(l.context===o){if(r.tag===1){l=Na(-1,a&-a),l.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}r.lanes|=a,l=r.alternate,l!==null&&(l.lanes|=a),ru(r.return,a,t),s.lanes|=a;break}l=l.next}}else if(r.tag===10)i=r.type===t.type?null:r.child;else if(r.tag===18){if(i=r.return,i===null)throw Error(T(341));i.lanes|=a,s=i.alternate,s!==null&&(s.lanes|=a),ru(i,a,t),i=r.sibling}else i=r.child;if(i!==null)i.return=r;else for(i=r;i!==null;){if(i===t){i=null;break}if(r=i.sibling,r!==null){r.return=i.return,i=r;break}i=i.return}r=i}ct(e,t,n.children,a),t=t.child}return t;case 9:return n=t.type,o=t.pendingProps.children,cn(t,a),n=Yt(n),o=o(n),t.flags|=1,ct(e,t,o,a),t.child;case 14:return o=t.type,n=ia(o,t.pendingProps),n=ia(o.type,n),Rf(e,t,o,n,a);case 15:return xm(e,t,t.type,t.pendingProps,a);case 17:return o=t.type,n=t.pendingProps,n=t.elementType===o?n:ia(o,n),Di(e,t),t.tag=1,It(o)?(e=!0,Yi(t)):e=!1,cn(t,a),mm(t,o,n),su(t,o,n,a),cu(null,t,o,!0,e,a);case 19:return Im(e,t,a);case 22:return vm(e,t,a)}throw Error(T(156,t.tag))};function zm(e,t){return dp(e,t)}function Vv(e,t,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(e,t,a,o){return new Vv(e,t,a,o)}function sc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Gv(e){if(typeof e=="function")return sc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ku)return 11;if(e===Cu)return 14}return 2}function no(e,t){var a=e.alternate;return a===null?(a=jt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function zi(e,t,a,o,n,r){var i=2;if(o=e,typeof e=="function")sc(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Ko:return Lo(a.children,n,r,t);case _u:i=8,n|=8;break;case Rl:return e=jt(12,a,t,n|2),e.elementType=Rl,e.lanes=r,e;case Nl:return e=jt(13,a,t,n),e.elementType=Nl,e.lanes=r,e;case Ol:return e=jt(19,a,t,n),e.elementType=Ol,e.lanes=r,e;case Kf:return ys(a,n,r,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case qf:i=10;break e;case jf:i=9;break e;case ku:i=11;break e;case Cu:i=14;break e;case Ga:i=16,o=null;break e}throw Error(T(130,e==null?e:typeof e,""))}return t=jt(i,a,t,n),t.elementType=e,t.type=o,t.lanes=r,t}function Lo(e,t,a,o){return e=jt(7,e,o,t),e.lanes=a,e}function ys(e,t,a,o){return e=jt(22,e,o,t),e.elementType=Kf,e.lanes=a,e.stateNode={isHidden:!1},e}function El(e,t,a){return e=jt(6,e,null,t),e.lanes=a,e}function Tl(e,t,a){return t=jt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qv(e,t,a,o,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fl(0),this.expirationTimes=fl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fl(0),this.identifierPrefix=o,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function lc(e,t,a,o,n,r,i,s,l){return e=new qv(e,t,a,s,l),t===1?(t=1,r===!0&&(t|=8)):t=0,r=jt(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:o,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gu(r),e}function jv(e,t,a){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jo,key:o==null?null:""+o,children:e,containerInfo:t,implementation:a}}function Um(e){if(!e)return io;e=e._reactInternals;e:{if(Ro(e)!==e||e.tag!==1)throw Error(T(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(It(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(T(171))}if(e.tag===1){var a=e.type;if(It(a))return Up(e,a,t)}return t}function Bm(e,t,a,o,n,r,i,s,l){return e=lc(a,o,!0,e,n,r,i,s,l),e.context=Um(null),a=e.current,o=dt(),n=oo(a),r=Na(o,n),r.callback=t??null,to(a,r,n),e.current.lanes=n,Ir(e,n,o),bt(e,o),e}function ws(e,t,a,o){var n=t.current,r=dt(),i=oo(n);return a=Um(a),t.context===null?t.context=a:t.pendingContext=a,t=Na(r,i),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=to(n,t,i),e!==null&&(ca(e,n,i,r),Ni(e,n,i)),i}function ls(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Wf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function uc(e,t){Wf(e,t),(e=e.alternate)&&Wf(e,t)}function Kv(){return null}var Hm=typeof reportError=="function"?reportError:function(e){console.error(e)};function cc(e){this._internalRoot=e}Ss.prototype.render=cc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(T(409));ws(e,t,null,null)};Ss.prototype.unmount=cc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;To(function(){ws(null,e,null,null)}),t[Pa]=null}};function Ss(e){this._internalRoot=e}Ss.prototype.unstable_scheduleHydration=function(e){if(e){var t=vp();e={blockedOn:null,target:e,priority:t};for(var a=0;a<ja.length&&t!==0&&t<ja[a].priority;a++);ja.splice(a,0,e),a===0&&wp(e)}};function dc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Is(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Vf(){}function Yv(e,t,a,o,n){if(n){if(typeof o=="function"){var r=o;o=function(){var u=ls(i);r.call(u)}}var i=Bm(t,o,e,0,null,!1,!1,"",Vf);return e._reactRootContainer=i,e[Pa]=i.current,pr(e.nodeType===8?e.parentNode:e),To(),i}for(;n=e.lastChild;)e.removeChild(n);if(typeof o=="function"){var s=o;o=function(){var u=ls(l);s.call(u)}}var l=lc(e,0,!1,null,null,!1,!1,"",Vf);return e._reactRootContainer=l,e[Pa]=l.current,pr(e.nodeType===8?e.parentNode:e),To(function(){ws(t,l,a,o)}),l}function bs(e,t,a,o,n){var r=a._reactRootContainer;if(r){var i=r;if(typeof n=="function"){var s=n;n=function(){var l=ls(i);s.call(l)}}ws(t,i,e,n)}else i=Yv(a,t,e,n,o);return ls(i)}hp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var a=Kn(t.pendingLanes);a!==0&&(Au(t,a|1),bt(t,ze()),(ie&6)===0&&(vn=ze()+500,uo()))}break;case 13:To(function(){var o=Da(e,1);if(o!==null){var n=dt();ca(o,e,1,n)}}),uc(e,1)}};Ru=function(e){if(e.tag===13){var t=Da(e,134217728);if(t!==null){var a=dt();ca(t,e,134217728,a)}uc(e,134217728)}};xp=function(e){if(e.tag===13){var t=oo(e),a=Da(e,t);if(a!==null){var o=dt();ca(a,e,t,o)}uc(e,t)}};vp=function(){return me};yp=function(e,t){var a=me;try{return me=e,t()}finally{me=a}};Wl=function(e,t,a){switch(t){case"input":if(Ml(e,a),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<a.length;t++){var o=a[t];if(o!==e&&o.form===e.form){var n=ps(o);if(!n)throw Error(T(90));Xf(o),Ml(o,n)}}}break;case"textarea":Jf(e,a);break;case"select":t=a.value,t!=null&&rn(e,!!a.multiple,t,!1)}};rp=nc;ip=To;var Xv={usingClientEntryPoint:!1,Events:[Lr,Jo,ps,op,np,nc]},Vn={findFiberByHostInstance:wo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qv={bundleType:Vn.bundleType,version:Vn.version,rendererPackageName:Vn.rendererPackageName,rendererConfig:Vn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fa.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=up(e),e===null?null:e.stateNode},findFiberByHostInstance:Vn.findFiberByHostInstance||Kv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(Gn=__REACT_DEVTOOLS_GLOBAL_HOOK__,!Gn.isDisabled&&Gn.supportsFiber))try{us=Gn.inject(Qv),Ia=Gn}catch{}var Gn;Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xv;Dt.createPortal=function(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dc(t))throw Error(T(200));return jv(e,t,null,a)};Dt.createRoot=function(e,t){if(!dc(e))throw Error(T(299));var a=!1,o="",n=Hm;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=lc(e,1,!1,null,null,a,!1,o,n),e[Pa]=t.current,pr(e.nodeType===8?e.parentNode:e),new cc(t)};Dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(T(188)):(e=Object.keys(e).join(","),Error(T(268,e)));return e=up(t),e=e===null?null:e.stateNode,e};Dt.flushSync=function(e){return To(e)};Dt.hydrate=function(e,t,a){if(!Is(t))throw Error(T(200));return bs(null,e,t,!0,a)};Dt.hydrateRoot=function(e,t,a){if(!dc(e))throw Error(T(405));var o=a!=null&&a.hydratedSources||null,n=!1,r="",i=Hm;if(a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(r=a.identifierPrefix),a.onRecoverableError!==void 0&&(i=a.onRecoverableError)),t=Bm(t,null,e,1,a??null,n,!1,r,i),e[Pa]=t.current,pr(e),o)for(e=0;e<o.length;e++)a=o[e],n=a._getVersion,n=n(a._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[a,n]:t.mutableSourceEagerHydrationData.push(a,n);return new Ss(t)};Dt.render=function(e,t,a){if(!Is(t))throw Error(T(200));return bs(null,e,t,!1,a)};Dt.unmountComponentAtNode=function(e){if(!Is(e))throw Error(T(40));return e._reactRootContainer?(To(function(){bs(null,null,e,!1,function(){e._reactRootContainer=null,e[Pa]=null})}),!0):!1};Dt.unstable_batchedUpdates=nc;Dt.unstable_renderSubtreeIntoContainer=function(e,t,a,o){if(!Is(a))throw Error(T(200));if(e==null||e._reactInternals===void 0)throw Error(T(38));return bs(e,t,a,!1,o)};Dt.version="18.3.1-next-f1338f8080-20240426"});var Gm=Wt((Jy,Vm)=>{"use strict";function Wm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wm)}catch(e){console.error(e)}}Wm(),Vm.exports=$m()});var jm=Wt(fc=>{"use strict";var qm=Gm();fc.createRoot=qm.createRoot,fc.hydrateRoot=qm.hydrateRoot;var Zy});var Jv,Zv,Pe,Ym,Q,Km,C,Lt=Ca(()=>{Jv=e=>{try{return new URL(e),!0}catch{return!1}},Zv=(e,t)=>{let o=["API_BASE_URL","CHAT_API_URL","WIDGET_DOMAIN"].filter(n=>!t[n]||!Jv(t[n]));return o.length>0?(console.error(`\u274C Invalid ${e} environment config. Missing/invalid URLs:`,o),!1):!0},Pe={development:{API_BASE_URL:"http://localhost:3000/api",CHAT_API_URL:"http://localhost:3000/api",ASSET_BASE_URL:"https://picasso-staging.s3.amazonaws.com",S3_BUCKET:"picasso-staging",WIDGET_DOMAIN:"http://localhost:8000",DEBUG:!0,CONFIG_ENDPOINT:typeof __CONFIG_ENDPOINT__<"u"?__CONFIG_ENDPOINT__:"https://chat.myrecruiter.ai/Master_Function?action=get_config",CHAT_ENDPOINT:typeof __CHAT_ENDPOINT__<"u"?__CHAT_ENDPOINT__:"https://chat.myrecruiter.ai/Master_Function?action=chat",ERROR_REPORTING_ENDPOINT:typeof __ERROR_REPORTING_ENDPOINT__<"u"?__ERROR_REPORTING_ENDPOINT__:"https://chat.myrecruiter.ai/Master_Function?action=log_error",STREAMING_ENDPOINT:typeof __STREAMING_ENDPOINT__<"u"?__STREAMING_ENDPOINT__:null,DEFAULT_TENANT_HASH:typeof __DEFAULT_TENANT_HASH__<"u"?__DEFAULT_TENANT_HASH__:"my87674d777bf9",CONVERSATION_ENDPOINT_AVAILABLE:!1,ENABLE_HOT_RELOAD:!0,LOG_LEVEL:"debug",CACHE_DISABLED:!0,MOCK_RESPONSES:!1,REQUEST_TIMEOUT:1e4,RETRY_ATTEMPTS:1,CORS_ENABLED:!0,STREAMING_DISABLED_REASON:"CORS issues with staging endpoint"},staging:{API_BASE_URL:"http://localhost:3000/api",CHAT_API_URL:"http://localhost:3000/api",ASSET_BASE_URL:"https://picasso-staging.s3.amazonaws.com",S3_BUCKET:"picasso-staging",WIDGET_DOMAIN:"http://localhost:8000",DEBUG:!0,CONFIG_ENDPOINT:typeof __CONFIG_ENDPOINT__<"u"?__CONFIG_ENDPOINT__:"https://xkjbyi3ushhuiytcfbuk5uaqom0ivhfk.lambda-url.us-east-1.on.aws/?action=get_config",CHAT_ENDPOINT:typeof __CHAT_ENDPOINT__<"u"?__CHAT_ENDPOINT__:"https://xkjbyi3ushhuiytcfbuk5uaqom0ivhfk.lambda-url.us-east-1.on.aws/?action=chat",CONVERSATION_ENDPOINT:typeof __CONVERSATION_ENDPOINT__<"u"?__CONVERSATION_ENDPOINT__:"https://xkjbyi3ushhuiytcfbuk5uaqom0ivhfk.lambda-url.us-east-1.on.aws/?action=conversation",ERROR_REPORTING_ENDPOINT:typeof __ERROR_REPORTING_ENDPOINT__<"u"?__ERROR_REPORTING_ENDPOINT__:"https://xkjbyi3ushhuiytcfbuk5uaqom0ivhfk.lambda-url.us-east-1.on.aws/?action=log_error",STREAMING_ENDPOINT:typeof __STREAMING_ENDPOINT__<"u"?__STREAMING_ENDPOINT__:"https://7pluzq3axftklmb4gbgchfdahu0lcnqd.lambda-url.us-east-1.on.aws",DEFAULT_TENANT_HASH:typeof __DEFAULT_TENANT_HASH__<"u"?__DEFAULT_TENANT_HASH__:"my87674d777bf9",CONVERSATION_ENDPOINT_AVAILABLE:!0,ENABLE_HOT_RELOAD:!1,LOG_LEVEL:"info",CACHE_DISABLED:!1,MOCK_RESPONSES:!1,REQUEST_TIMEOUT:8e3,RETRY_ATTEMPTS:2,CORS_ENABLED:!0,HEALTH_CHECK_INTERVAL:6e4},production:{API_BASE_URL:"http://localhost:3000/api",CHAT_API_URL:"http://localhost:3000/api",ASSET_BASE_URL:"https://picasso-staging.s3.amazonaws.com",S3_BUCKET:"picasso-production",WIDGET_DOMAIN:"http://localhost:8000",DEBUG:!1,CONFIG_ENDPOINT:typeof __CONFIG_ENDPOINT__<"u"?__CONFIG_ENDPOINT__:"https://chat.myrecruiter.ai/Master_Function?action=get_config",CHAT_ENDPOINT:typeof __CHAT_ENDPOINT__<"u"?__CHAT_ENDPOINT__:"https://chat.myrecruiter.ai/Master_Function?action=chat",ERROR_REPORTING_ENDPOINT:typeof __ERROR_REPORTING_ENDPOINT__<"u"?__ERROR_REPORTING_ENDPOINT__:"https://chat.myrecruiter.ai/Master_Function?action=log_error",STREAMING_ENDPOINT:typeof __STREAMING_ENDPOINT__<"u"?__STREAMING_ENDPOINT__:null,DEFAULT_TENANT_HASH:typeof __DEFAULT_TENANT_HASH__<"u"?__DEFAULT_TENANT_HASH__:"my87674d777bf9",CONVERSATION_ENDPOINT_AVAILABLE:!1,ENABLE_HOT_RELOAD:!1,LOG_LEVEL:"error",CACHE_DISABLED:!1,MOCK_RESPONSES:!1,REQUEST_TIMEOUT:6e3,RETRY_ATTEMPTS:2,CORS_ENABLED:!1,HEALTH_CHECK_INTERVAL:3e5,PERFORMANCE_MONITORING:!0,ERROR_REPORTING:!0}},Ym=null;if(typeof window<"u")try{let t=new URLSearchParams(window.location.search).get("picasso-env");t&&["development","staging","production"].includes(t)&&(Ym=t,console.log(`\u{1F3AF} RUNTIME OVERRIDE: Environment forced to ${t} via URL parameter`))}catch(e){console.warn("\u26A0\uFE0F Error checking URL parameters:",e)}Q=Ym||"development";console.log(`\u{1F527} Using clean environment configuration for ${Q}`);console.log(`\u{1F4CD} Environment ${Q} endpoints:`,{API_BASE_URL:Pe[Q].API_BASE_URL,CHAT_ENDPOINT:Pe[Q].CHAT_ENDPOINT,CONFIG_ENDPOINT:Pe[Q].CONFIG_ENDPOINT,STREAMING_ENDPOINT:Pe[Q].STREAMING_ENDPOINT});if(!Zv(Q,Pe[Q]))throw console.error(`\u274C Critical: Invalid ${Q} environment configuration!`),new Error(`Invalid environment configuration for: ${Q}`);Km=()=>{if(Q==="development"&&typeof window<"u"){let e=window.location.port;if(e&&window.location.hostname==="localhost")return`http://localhost:${e}`}return Pe[Q].WIDGET_DOMAIN},C={...Pe[Q],WIDGET_DOMAIN:Km(),ENVIRONMENT:Q,getConfigUrl:e=>{if(!e)throw new Error("getConfigUrl: tenantHash is required");return`${Pe[Q].CONFIG_ENDPOINT}&t=${encodeURIComponent(e)}`},getChatUrl:e=>{if(!e)throw new Error("getChatUrl: tenantHash is required");return`${Pe[Q].CHAT_ENDPOINT}&t=${encodeURIComponent(e)}`},getConversationUrl:(e,t)=>{if(!e)throw new Error("getConversationUrl: tenantHash is required");if(!t)throw new Error("getConversationUrl: operation is required");return`${Pe[Q].CONVERSATION_ENDPOINT}&operation=${encodeURIComponent(t)}&t=${encodeURIComponent(e)}`},getStreamTokenUrl:e=>{if(!e)throw new Error("getStreamTokenUrl: tenantHash is required");return`${Pe[Q].CHAT_ENDPOINT}&action=generate_stream_token&t=${encodeURIComponent(e)}`},getAssetUrl:e=>{if(!e)throw new Error("getAssetUrl: path is required");return`${Pe[Q].ASSET_BASE_URL}/${e}`.replace(/\/+/g,"/")},getTenantAssetUrl:(e,t)=>{if(!e||!t)throw new Error("getTenantAssetUrl: tenantHash and assetPath are required");return`${Pe[Q].ASSET_BASE_URL}/tenants/${e}/${t}`},getLegacyS3Url:(e,t)=>{if(!e||!t)throw new Error("getLegacyS3Url: tenantHash and assetPath are required");return Q==="development"?`https://picassostaging.s3.amazonaws.com/tenants/${e}/${t}`:Q==="staging"?`https://chat.myrecruiter.ai/staging/tenants/${e}/${t}`:`https://myrecruiter-picasso.s3.us-east-1.amazonaws.com/tenants/${e}/${t}`},isDevelopment:()=>Q==="development",isStaging:()=>Q==="staging",isProduction:()=>Q==="production",getDefaultTenantHash:()=>Pe[Q].DEFAULT_TENANT_HASH,getTenantHashFromURL:()=>{if(typeof window<"u")try{let t=new URLSearchParams(window.location.search).get("tenant");return t&&Q==="staging"&&!["staging_test_hash","my87674d777bf9"].includes(t)?(console.error("\u{1F6A8} SECURITY: Cross-environment tenant hash blocked in staging"),null):t}catch(e){return console.warn("\u26A0\uFE0F Error getting tenant hash from URL:",e),null}return null},getTenantHash:()=>C.getTenantHashFromURL()||C.getDefaultTenantHash(),log:(e,t,...a)=>{let o={debug:0,info:1,warn:2,error:3},n=o[Pe[Q].LOG_LEVEL]||3;(o[e]||3)>=n&&console[e](`[Picasso ${Q.toUpperCase()}]`,t,...a)},getRequestConfig:(e={})=>{let t={timeout:Math.min(Pe[Q].REQUEST_TIMEOUT,1e4),retries:Math.min(Pe[Q].RETRY_ATTEMPTS,2),headers:{"Content-Type":"application/json",Accept:"application/json",...e.headers}};t.mode="cors",t.credentials="omit";let a={...t,...e};return e.headers&&(a.headers={"Content-Type":"application/json",Accept:"application/json",...e.headers}),a},getHealthCheckUrl:()=>`${Pe[Q].API_BASE_URL}/health`,getWidgetDomain:()=>Km(),getStreamingUrl:e=>{if(!e)throw new Error("getStreamingUrl: tenantHash is required");return Pe[Q].STREAMING_ENDPOINT||"https://chat.myrecruiter.ai/Bedrock_Streaming_Handler"},isStreamingEnabled:e=>{if(typeof window<"u"&&window.PICASSO_DISABLE_STREAMING===!0||!!1)return!1;if(e?.features?.streaming_enabled===!0||e?.features?.streaming===!0||e?.features?.eventSource===!0||e?.features?.jwt_streaming===!0||e?.features?.function_url_streaming===!0||Q==="development"&&typeof window<"u"&&window.PICASSO_FORCE_STREAMING===!0)return!0;if(typeof window<"u")try{let a=new URLSearchParams(window.location.search);if(a.get("streaming")==="true")return!0;if(a.get("streaming")==="false")return!1}catch{}return!1},isJWTStreamingEnabled:e=>{if(typeof window<"u"&&window.PICASSO_DISABLE_STREAMING===!0||Q==="development")return!1;if(e?.features?.jwt_streaming===!0||e?.features?.function_url_streaming===!0||e?.features?.unified_coordination===!0)return!0;if(typeof window<"u")try{if(new URLSearchParams(window.location.search).get("jwt-streaming")==="true")return!0}catch{}return!1},getBuildInfo:()=>({environment:Q,timestamp:new Date().toISOString(),debug:Pe[Q].DEBUG,version:typeof process<"u"?process.env.npm_package_version:"unknown"}),validateStagingInfrastructure:()=>{if(Q!=="staging")return{valid:!0,message:"Not staging environment"};let e=Pe.staging,t=[];e.CHAT_ENDPOINT.includes("/primary/staging/Master_Function")||t.push("Chat endpoint not routing to staging Master_Function with Track A+"),e.WIDGET_DOMAIN.includes("/staging")||t.push("Widget domain not using staging infrastructure path"),e.ASSET_BASE_URL.includes("/staging")||t.push("Asset base URL not using staging CloudFront path"),e.STREAMING_ENDPOINT.includes("/primary/staging/")||t.push("Streaming endpoint not routing to staging infrastructure");let a=t.length===0;return{valid:a,message:a?"Staging infrastructure properly configured for Track A+":t.join("; "),issues:t,endpoints:{chat:e.CHAT_ENDPOINT,widget:e.WIDGET_DOMAIN,assets:e.ASSET_BASE_URL,streaming:e.STREAMING_ENDPOINT}}}};C.isDevelopment()&&typeof window<"u"&&(window.picassoConfig=C,window.picassoEnv=Q,window.switchPicassoEnv=e=>{if(["development","staging","production"].includes(e)){let t=new URL(window.location);t.searchParams.set("picasso-env",e),window.location.href=t.toString()}else console.error("Invalid environment. Use: development, staging, production")},window.enablePicassoStreaming=()=>{window.PICASSO_FORCE_STREAMING=!0,console.log("\u2705 Streaming enabled - refresh to apply")},window.disablePicassoStreaming=()=>{window.PICASSO_DISABLE_STREAMING=!0,console.log("\u274C Streaming disabled - refresh to apply")},window.resetPicassoStreaming=()=>{delete window.PICASSO_FORCE_STREAMING,delete window.PICASSO_DISABLE_STREAMING,console.log("\u{1F504} Streaming reset to default behavior - refresh to apply")},window.testStreamingFeatureFlag=e=>{let t=C.isStreamingEnabled(e),a=C.isJWTStreamingEnabled(e);return console.log("\u{1F9EA} Streaming Feature Flag Test:",{enabled:t,jwtEnabled:a,environment:Q,tenantFeatures:e?.features||{},globalOverrides:{forced:window.PICASSO_FORCE_STREAMING,disabled:window.PICASSO_DISABLE_STREAMING}}),{legacy:t,jwt:a}},window.validateStagingInfrastructure=()=>{let e=C.validateStagingInfrastructure();return console.log("\u{1F3D7}\uFE0F Staging Infrastructure Validation:",e),e},console.log(`
\u{1F6E0}\uFE0F  PICASSO DEVELOPMENT MODE ACTIVE
Environment: ${Q}
Streaming: DISABLED (${Pe[Q].STREAMING_DISABLED_REASON||"Environment default"})
Debug Commands:
  window.picassoConfig              - View current config
  window.switchPicassoEnv('staging') - Switch environments
  config.log('info', 'message')     - Environment-aware logging
  
\u{1F30A} Streaming Control:
  window.enablePicassoStreaming()   - Force enable streaming
  window.disablePicassoStreaming()  - Force disable streaming  
  window.resetPicassoStreaming()    - Reset to default behavior
  window.testStreamingFeatureFlag() - Test feature flag logic

\u{1F3D7}\uFE0F Infrastructure Validation:
  window.validateStagingInfrastructure() - Validate staging Track A+ routing
`));C.isProduction()&&C.PERFORMANCE_MONITORING&&console.log("\u{1F4CA} Picasso production monitoring initialized")});var Zm=Wt((iw,Jm)=>{"use strict";var e0="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";Jm.exports=e0});var og=Wt((sw,ag)=>{"use strict";var t0=Zm();function eg(){}function tg(){}tg.resetWarningCache=eg;ag.exports=function(){function e(o,n,r,i,s,l){if(l!==t0){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:tg,resetWarningCache:eg};return a.PropTypes=a,a}});var rg=Wt((cw,ng)=>{ng.exports=og()();var lw,uw});var Sg={};ti(Sg,{default:()=>wg});function gt(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var a=arguments.length,o=new Array(a>1?a-1:0),n=1;n<a;n++)o[n-1]=arguments[n];return vc(e,t,o)}}function u0(e){return function(){for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return yc(e,a)}}function oe(e,t){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ks;ig&&ig(e,null);let o=t.length;for(;o--;){let n=t[o];if(typeof n=="string"){let r=a(n);r!==n&&(a0(t)||(t[o]=r),n=r)}e[n]=!0}return e}function c0(e){for(let t=0;t<e.length;t++)fa(e,t)||(e[t]=null);return e}function za(e){let t=hg(null);for(let[a,o]of gg(e))fa(e,a)&&(Array.isArray(o)?t[a]=c0(o):o&&typeof o=="object"&&o.constructor===Object?t[a]=za(o):t[a]=o);return t}function Tr(e,t){for(;e!==null;){let o=n0(e,t);if(o){if(o.get)return gt(o.get);if(typeof o.value=="function")return gt(o.value)}e=o0(e)}function a(){return null}return a}function yg(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S0(),t=V=>yg(V);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==Ar.document||!e.Element)return t.isSupported=!1,t;let{document:a}=e,o=a,n=o.currentScript,{DocumentFragment:r,HTMLTemplateElement:i,Node:s,Element:l,NodeFilter:u,NamedNodeMap:d=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:h,DOMParser:x,trustedTypes:v}=e,y=l.prototype,I=Tr(y,"cloneNode"),F=Tr(y,"remove"),f=Tr(y,"nextSibling"),c=Tr(y,"childNodes"),p=Tr(y,"parentNode");if(typeof i=="function"){let V=a.createElement("template");V.content&&V.content.ownerDocument&&(a=V.content.ownerDocument)}let w,L="",{implementation:_,createNodeIterator:S,createDocumentFragment:b,getElementsByTagName:$}=a,{importNode:O}=o,D=mg();t.isSupported=typeof gg=="function"&&typeof p=="function"&&_&&_.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:G,ERB_EXPR:j,TMPLIT_EXPR:ce,DATA_ATTR:re,ARIA_ATTR:xt,IS_SCRIPT_OR_DATA:Ha,ATTR_WHITESPACE:Ye,CUSTOM_ELEMENT:Ht}=pg,{IS_ALLOWED_URI:xe}=pg,A=null,M=oe({},[...ug,...mc,...gc,...hc,...cg]),q=null,ue=oe({},[...dg,...xc,...fg,..._s]),ee=Object.seal(hg(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$t=null,pa=null,$a=!0,ma=!0,ho=!1,Uo=!0,ga=!1,Bo=!0,P=!1,U=!1,E=!1,R=!1,J=!1,B=!1,de=!0,ve=!1,Ne="user-content-",ke=!0,W=!1,Z={},fe=null,ha=oe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ge=null,Zc=oe({},["audio","video","img","source","image","track"]),Hs=null,ed=oe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Qr="http://www.w3.org/1998/Math/MathML",Jr="http://www.w3.org/2000/svg",La="http://www.w3.org/1999/xhtml",Ho=La,$s=!1,Ws=null,Ih=oe({},[Qr,Jr,La],pc),Zr=oe({},["mi","mo","mn","ms","mtext"]),ei=oe({},["annotation-xml"]),bh=oe({},["title","style","font","a","script"]),Nn=null,Lh=["application/xhtml+xml","text/html"],_h="text/html",Ge=null,$o=null,kh=a.createElement("form"),td=function(m){return m instanceof RegExp||m instanceof Function},Vs=function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!($o&&$o===m)){if((!m||typeof m!="object")&&(m={}),m=za(m),Nn=Lh.indexOf(m.PARSER_MEDIA_TYPE)===-1?_h:m.PARSER_MEDIA_TYPE,Ge=Nn==="application/xhtml+xml"?pc:ks,A=fa(m,"ALLOWED_TAGS")?oe({},m.ALLOWED_TAGS,Ge):M,q=fa(m,"ALLOWED_ATTR")?oe({},m.ALLOWED_ATTR,Ge):ue,Ws=fa(m,"ALLOWED_NAMESPACES")?oe({},m.ALLOWED_NAMESPACES,pc):Ih,Hs=fa(m,"ADD_URI_SAFE_ATTR")?oe(za(ed),m.ADD_URI_SAFE_ATTR,Ge):ed,ge=fa(m,"ADD_DATA_URI_TAGS")?oe(za(Zc),m.ADD_DATA_URI_TAGS,Ge):Zc,fe=fa(m,"FORBID_CONTENTS")?oe({},m.FORBID_CONTENTS,Ge):ha,$t=fa(m,"FORBID_TAGS")?oe({},m.FORBID_TAGS,Ge):za({}),pa=fa(m,"FORBID_ATTR")?oe({},m.FORBID_ATTR,Ge):za({}),Z=fa(m,"USE_PROFILES")?m.USE_PROFILES:!1,$a=m.ALLOW_ARIA_ATTR!==!1,ma=m.ALLOW_DATA_ATTR!==!1,ho=m.ALLOW_UNKNOWN_PROTOCOLS||!1,Uo=m.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ga=m.SAFE_FOR_TEMPLATES||!1,Bo=m.SAFE_FOR_XML!==!1,P=m.WHOLE_DOCUMENT||!1,R=m.RETURN_DOM||!1,J=m.RETURN_DOM_FRAGMENT||!1,B=m.RETURN_TRUSTED_TYPE||!1,E=m.FORCE_BODY||!1,de=m.SANITIZE_DOM!==!1,ve=m.SANITIZE_NAMED_PROPS||!1,ke=m.KEEP_CONTENT!==!1,W=m.IN_PLACE||!1,xe=m.ALLOWED_URI_REGEXP||xg,Ho=m.NAMESPACE||La,Zr=m.MATHML_TEXT_INTEGRATION_POINTS||Zr,ei=m.HTML_INTEGRATION_POINTS||ei,ee=m.CUSTOM_ELEMENT_HANDLING||{},m.CUSTOM_ELEMENT_HANDLING&&td(m.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ee.tagNameCheck=m.CUSTOM_ELEMENT_HANDLING.tagNameCheck),m.CUSTOM_ELEMENT_HANDLING&&td(m.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ee.attributeNameCheck=m.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),m.CUSTOM_ELEMENT_HANDLING&&typeof m.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ee.allowCustomizedBuiltInElements=m.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ga&&(ma=!1),J&&(R=!0),Z&&(A=oe({},cg),q=[],Z.html===!0&&(oe(A,ug),oe(q,dg)),Z.svg===!0&&(oe(A,mc),oe(q,xc),oe(q,_s)),Z.svgFilters===!0&&(oe(A,gc),oe(q,xc),oe(q,_s)),Z.mathMl===!0&&(oe(A,hc),oe(q,fg),oe(q,_s))),m.ADD_TAGS&&(A===M&&(A=za(A)),oe(A,m.ADD_TAGS,Ge)),m.ADD_ATTR&&(q===ue&&(q=za(q)),oe(q,m.ADD_ATTR,Ge)),m.ADD_URI_SAFE_ATTR&&oe(Hs,m.ADD_URI_SAFE_ATTR,Ge),m.FORBID_CONTENTS&&(fe===ha&&(fe=za(fe)),oe(fe,m.FORBID_CONTENTS,Ge)),ke&&(A["#text"]=!0),P&&oe(A,["html","head","body"]),A.table&&(oe(A,["tbody"]),delete $t.tbody),m.TRUSTED_TYPES_POLICY){if(typeof m.TRUSTED_TYPES_POLICY.createHTML!="function")throw Er('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof m.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Er('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=m.TRUSTED_TYPES_POLICY,L=w.createHTML("")}else w===void 0&&(w=I0(v,n)),w!==null&&typeof L=="string"&&(L=w.createHTML(""));mt&&mt(m),$o=m}},ad=oe({},[...mc,...gc,...d0]),od=oe({},[...hc,...f0]),Ch=function(m){let N=p(m);(!N||!N.tagName)&&(N={namespaceURI:Ho,tagName:"template"});let H=ks(m.tagName),Ce=ks(N.tagName);return Ws[m.namespaceURI]?m.namespaceURI===Jr?N.namespaceURI===La?H==="svg":N.namespaceURI===Qr?H==="svg"&&(Ce==="annotation-xml"||Zr[Ce]):!!ad[H]:m.namespaceURI===Qr?N.namespaceURI===La?H==="math":N.namespaceURI===Jr?H==="math"&&ei[Ce]:!!od[H]:m.namespaceURI===La?N.namespaceURI===Jr&&!ei[Ce]||N.namespaceURI===Qr&&!Zr[Ce]?!1:!od[H]&&(bh[H]||!ad[H]):!!(Nn==="application/xhtml+xml"&&Ws[m.namespaceURI]):!1},xa=function(m){kr(t.removed,{element:m});try{p(m).removeChild(m)}catch{F(m)}},Wo=function(m,N){try{kr(t.removed,{attribute:N.getAttributeNode(m),from:N})}catch{kr(t.removed,{attribute:null,from:N})}if(N.removeAttribute(m),m==="is")if(R||J)try{xa(N)}catch{}else try{N.setAttribute(m,"")}catch{}},nd=function(m){let N=null,H=null;if(E)m="<remove></remove>"+m;else{let He=lg(m,/^[\r\n\t ]+/);H=He&&He[0]}Nn==="application/xhtml+xml"&&Ho===La&&(m='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+m+"</body></html>");let Ce=w?w.createHTML(m):m;if(Ho===La)try{N=new x().parseFromString(Ce,Nn)}catch{}if(!N||!N.documentElement){N=_.createDocument(Ho,"template",null);try{N.documentElement.innerHTML=$s?L:Ce}catch{}}let tt=N.body||N.documentElement;return m&&H&&tt.insertBefore(a.createTextNode(H),tt.childNodes[0]||null),Ho===La?$.call(N,P?"html":"body")[0]:P?N.documentElement:tt},rd=function(m){return S.call(m.ownerDocument||m,m,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},Gs=function(m){return m instanceof h&&(typeof m.nodeName!="string"||typeof m.textContent!="string"||typeof m.removeChild!="function"||!(m.attributes instanceof d)||typeof m.removeAttribute!="function"||typeof m.setAttribute!="function"||typeof m.namespaceURI!="string"||typeof m.insertBefore!="function"||typeof m.hasChildNodes!="function")},id=function(m){return typeof s=="function"&&m instanceof s};function _a(V,m,N){Ls(V,H=>{H.call(t,m,N,$o)})}let sd=function(m){let N=null;if(_a(D.beforeSanitizeElements,m,null),Gs(m))return xa(m),!0;let H=Ge(m.nodeName);if(_a(D.uponSanitizeElement,m,{tagName:H,allowedTags:A}),Bo&&m.hasChildNodes()&&!id(m.firstElementChild)&&pt(/<[/\w!]/g,m.innerHTML)&&pt(/<[/\w!]/g,m.textContent)||m.nodeType===Ar.progressingInstruction||Bo&&m.nodeType===Ar.comment&&pt(/<[/\w]/g,m.data))return xa(m),!0;if(!A[H]||$t[H]){if(!$t[H]&&ud(H)&&(ee.tagNameCheck instanceof RegExp&&pt(ee.tagNameCheck,H)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(H)))return!1;if(ke&&!fe[H]){let Ce=p(m)||m.parentNode,tt=c(m)||m.childNodes;if(tt&&Ce){let He=tt.length;for(let vt=He-1;vt>=0;--vt){let ka=I(tt[vt],!0);ka.__removalCount=(m.__removalCount||0)+1,Ce.insertBefore(ka,f(m))}}}return xa(m),!0}return m instanceof l&&!Ch(m)||(H==="noscript"||H==="noembed"||H==="noframes")&&pt(/<\/no(script|embed|frames)/i,m.innerHTML)?(xa(m),!0):(ga&&m.nodeType===Ar.text&&(N=m.textContent,Ls([G,j,ce],Ce=>{N=Cr(N,Ce," ")}),m.textContent!==N&&(kr(t.removed,{element:m.cloneNode()}),m.textContent=N)),_a(D.afterSanitizeElements,m,null),!1)},ld=function(m,N,H){if(de&&(N==="id"||N==="name")&&(H in a||H in kh))return!1;if(!(ma&&!pa[N]&&pt(re,N))){if(!($a&&pt(xt,N))){if(!q[N]||pa[N]){if(!(ud(m)&&(ee.tagNameCheck instanceof RegExp&&pt(ee.tagNameCheck,m)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(m))&&(ee.attributeNameCheck instanceof RegExp&&pt(ee.attributeNameCheck,N)||ee.attributeNameCheck instanceof Function&&ee.attributeNameCheck(N))||N==="is"&&ee.allowCustomizedBuiltInElements&&(ee.tagNameCheck instanceof RegExp&&pt(ee.tagNameCheck,H)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(H))))return!1}else if(!Hs[N]){if(!pt(xe,Cr(H,Ye,""))){if(!((N==="src"||N==="xlink:href"||N==="href")&&m!=="script"&&s0(H,"data:")===0&&ge[m])){if(!(ho&&!pt(Ha,Cr(H,Ye,"")))){if(H)return!1}}}}}}return!0},ud=function(m){return m!=="annotation-xml"&&lg(m,Ht)},cd=function(m){_a(D.beforeSanitizeAttributes,m,null);let{attributes:N}=m;if(!N||Gs(m))return;let H={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:q,forceKeepAttr:void 0},Ce=N.length;for(;Ce--;){let tt=N[Ce],{name:He,namespaceURI:vt,value:ka}=tt,On=Ge(He),qs=ka,at=He==="value"?qs:l0(qs);if(H.attrName=On,H.attrValue=at,H.keepAttr=!0,H.forceKeepAttr=void 0,_a(D.uponSanitizeAttribute,m,H),at=H.attrValue,ve&&(On==="id"||On==="name")&&(Wo(He,m),at=Ne+at),Bo&&pt(/((--!?|])>)|<\/(style|title)/i,at)){Wo(He,m);continue}if(H.forceKeepAttr)continue;if(!H.keepAttr){Wo(He,m);continue}if(!Uo&&pt(/\/>/i,at)){Wo(He,m);continue}ga&&Ls([G,j,ce],fd=>{at=Cr(at,fd," ")});let dd=Ge(m.nodeName);if(!ld(dd,On,at)){Wo(He,m);continue}if(w&&typeof v=="object"&&typeof v.getAttributeType=="function"&&!vt)switch(v.getAttributeType(dd,On)){case"TrustedHTML":{at=w.createHTML(at);break}case"TrustedScriptURL":{at=w.createScriptURL(at);break}}if(at!==qs)try{vt?m.setAttributeNS(vt,He,at):m.setAttribute(He,at),Gs(m)?xa(m):sg(t.removed)}catch{Wo(He,m)}}_a(D.afterSanitizeAttributes,m,null)},Eh=function V(m){let N=null,H=rd(m);for(_a(D.beforeSanitizeShadowDOM,m,null);N=H.nextNode();)_a(D.uponSanitizeShadowNode,N,null),sd(N),cd(N),N.content instanceof r&&V(N.content);_a(D.afterSanitizeShadowDOM,m,null)};return t.sanitize=function(V){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},N=null,H=null,Ce=null,tt=null;if($s=!V,$s&&(V="<!-->"),typeof V!="string"&&!id(V))if(typeof V.toString=="function"){if(V=V.toString(),typeof V!="string")throw Er("dirty is not a string, aborting")}else throw Er("toString is not a function");if(!t.isSupported)return V;if(U||Vs(m),t.removed=[],typeof V=="string"&&(W=!1),W){if(V.nodeName){let ka=Ge(V.nodeName);if(!A[ka]||$t[ka])throw Er("root node is forbidden and cannot be sanitized in-place")}}else if(V instanceof s)N=nd("<!---->"),H=N.ownerDocument.importNode(V,!0),H.nodeType===Ar.element&&H.nodeName==="BODY"||H.nodeName==="HTML"?N=H:N.appendChild(H);else{if(!R&&!ga&&!P&&V.indexOf("<")===-1)return w&&B?w.createHTML(V):V;if(N=nd(V),!N)return R?null:B?L:""}N&&E&&xa(N.firstChild);let He=rd(W?V:N);for(;Ce=He.nextNode();)sd(Ce),cd(Ce),Ce.content instanceof r&&Eh(Ce.content);if(W)return V;if(R){if(J)for(tt=b.call(N.ownerDocument);N.firstChild;)tt.appendChild(N.firstChild);else tt=N;return(q.shadowroot||q.shadowrootmode)&&(tt=O.call(o,tt,!0)),tt}let vt=P?N.outerHTML:N.innerHTML;return P&&A["!doctype"]&&N.ownerDocument&&N.ownerDocument.doctype&&N.ownerDocument.doctype.name&&pt(vg,N.ownerDocument.doctype.name)&&(vt="<!DOCTYPE "+N.ownerDocument.doctype.name+`>
`+vt),ga&&Ls([G,j,ce],ka=>{vt=Cr(vt,ka," ")}),w&&B?w.createHTML(vt):vt},t.setConfig=function(){let V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Vs(V),U=!0},t.clearConfig=function(){$o=null,U=!1},t.isValidAttribute=function(V,m,N){$o||Vs({});let H=Ge(V),Ce=Ge(m);return ld(H,Ce,N)},t.addHook=function(V,m){typeof m=="function"&&kr(D[V],m)},t.removeHook=function(V,m){if(m!==void 0){let N=r0(D[V],m);return N===-1?void 0:i0(D[V],N,1)[0]}return sg(D[V])},t.removeHooks=function(V){D[V]=[]},t.removeAllHooks=function(){D=mg()},t}var gg,ig,a0,o0,n0,mt,Qt,hg,vc,yc,Ls,r0,sg,kr,i0,ks,pc,lg,Cr,s0,l0,fa,pt,Er,ug,mc,gc,d0,hc,f0,cg,dg,xc,fg,_s,p0,m0,g0,h0,x0,xg,v0,y0,vg,w0,pg,Ar,S0,I0,mg,wg,wc=Ca(()=>{({entries:gg,setPrototypeOf:ig,isFrozen:a0,getPrototypeOf:o0,getOwnPropertyDescriptor:n0}=Object),{freeze:mt,seal:Qt,create:hg}=Object,{apply:vc,construct:yc}=typeof Reflect<"u"&&Reflect;mt||(mt=function(t){return t});Qt||(Qt=function(t){return t});vc||(vc=function(t,a,o){return t.apply(a,o)});yc||(yc=function(t,a){return new t(...a)});Ls=gt(Array.prototype.forEach),r0=gt(Array.prototype.lastIndexOf),sg=gt(Array.prototype.pop),kr=gt(Array.prototype.push),i0=gt(Array.prototype.splice),ks=gt(String.prototype.toLowerCase),pc=gt(String.prototype.toString),lg=gt(String.prototype.match),Cr=gt(String.prototype.replace),s0=gt(String.prototype.indexOf),l0=gt(String.prototype.trim),fa=gt(Object.prototype.hasOwnProperty),pt=gt(RegExp.prototype.test),Er=u0(TypeError);ug=mt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),mc=mt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),gc=mt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),d0=mt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),hc=mt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),f0=mt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),cg=mt(["#text"]),dg=mt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),xc=mt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),fg=mt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),_s=mt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),p0=Qt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),m0=Qt(/<%[\w\W]*|[\w\W]*%>/gm),g0=Qt(/\$\{[\w\W]*/gm),h0=Qt(/^data-[\-\w.\u00B7-\uFFFF]+$/),x0=Qt(/^aria-[\-\w]+$/),xg=Qt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),v0=Qt(/^(?:\w+script|data):/i),y0=Qt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),vg=Qt(/^html$/i),w0=Qt(/^[a-z][.\w]*(-[.\w]+)+$/i),pg=Object.freeze({__proto__:null,ARIA_ATTR:x0,ATTR_WHITESPACE:y0,CUSTOM_ELEMENT:w0,DATA_ATTR:h0,DOCTYPE_NAME:vg,ERB_EXPR:m0,IS_ALLOWED_URI:xg,IS_SCRIPT_OR_DATA:v0,MUSTACHE_EXPR:p0,TMPLIT_EXPR:g0}),Ar={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},S0=function(){return typeof window>"u"?null:window},I0=function(t,a){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let o=null,n="data-tt-policy-suffix";a&&a.hasAttribute(n)&&(o=a.getAttribute(n));let r="dompurify"+(o?"#"+o:"");try{return t.createPolicy(r,{createHTML(i){return i},createScriptURL(i){return i}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}},mg=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};wg=yg()});var Ig,bg=Ca(()=>{wc();Ig=e=>{let t={message:"",stack:"",timestamp:Date.now()};return e instanceof Error?(t.message=e.message?e.message.substring(0,200):"Unknown error",t.stack=e.stack?e.stack.split(`
`).slice(0,3).join(`
`):""):typeof e=="string"?t.message=e.substring(0,200):t.message="Unknown error type",t.message=t.message.replace(/password|secret|key|token/gi,"[REDACTED]"),t}});var _t,kt,K,Cs,Ic,bc,Lg,Sc,g,_g,Jt,Zt=Ca(()=>{bg();Lt();_t={LOW:"low",MEDIUM:"medium",HIGH:"high",CRITICAL:"critical"},kt={NETWORK:"network",API:"api",UI:"ui",AUTHENTICATION:"authentication",VALIDATION:"validation",RENDERING:"rendering",CONFIGURATION:"configuration",UNKNOWN:"unknown"},K={NETWORK_ERROR:"network_error",TIMEOUT_ERROR:"timeout_error",RATE_LIMIT_ERROR:"rate_limit_error",CLIENT_ERROR:"client_error",SERVER_ERROR:"server_error",VALIDATION_ERROR:"validation_error",RENDER_ERROR:"render_error",CONFIG_ERROR:"config_error",JWT_ERROR:"jwt_error",JWT_EXPIRED_ERROR:"jwt_expired_error",JWT_VALIDATION_ERROR:"jwt_validation_error",FUNCTION_URL_ERROR:"function_url_error",UNKNOWN_ERROR:"unknown_error"},Cs=(e,t=null)=>{if(e.name==="AbortError"||e.message.includes("timeout"))return{type:K.TIMEOUT_ERROR,category:kt.NETWORK,severity:_t.MEDIUM,retryable:!0};if(e.message.includes("Failed to fetch")||e.message.includes("NetworkError")||e.message.includes("ERR_NETWORK"))return{type:K.NETWORK_ERROR,category:kt.NETWORK,severity:_t.MEDIUM,retryable:!0};if(t){if(t.status===429)return{type:K.RATE_LIMIT_ERROR,category:kt.API,severity:_t.MEDIUM,retryable:!0};if(t.status===401||t.status===403)return{type:K.CLIENT_ERROR,category:kt.AUTHENTICATION,severity:_t.HIGH,retryable:!1};if(t.status>=400&&t.status<500)return{type:K.CLIENT_ERROR,category:kt.VALIDATION,severity:_t.MEDIUM,retryable:!1};if(t.status>=500)return{type:K.SERVER_ERROR,category:kt.API,severity:_t.HIGH,retryable:!0}}return e.message.includes("React")||e.message.includes("render")?{type:K.RENDER_ERROR,category:kt.RENDERING,severity:_t.HIGH,retryable:!1}:e.message.includes("config")||e.message.includes("configuration")?{type:K.CONFIG_ERROR,category:kt.CONFIGURATION,severity:_t.CRITICAL,retryable:!1}:e.message.includes("JWT")||e.message.includes("jwt")?e.message.includes("expired")||e.message.includes("expir")?{type:K.JWT_EXPIRED_ERROR,category:kt.AUTHENTICATION,severity:_t.MEDIUM,retryable:!0}:e.message.includes("invalid")||e.message.includes("validation")?{type:K.JWT_VALIDATION_ERROR,category:kt.AUTHENTICATION,severity:_t.HIGH,retryable:!1}:e.message.includes("Token generation failed")?{type:K.JWT_ERROR,category:kt.AUTHENTICATION,severity:_t.HIGH,retryable:!0}:{type:K.JWT_ERROR,category:kt.AUTHENTICATION,severity:_t.HIGH,retryable:!1}:e.message.includes("Function URL")||e.message.includes("function_url")?{type:K.FUNCTION_URL_ERROR,category:kt.API,severity:_t.HIGH,retryable:!0}:{type:K.UNKNOWN_ERROR,category:kt.UNKNOWN,severity:_t.MEDIUM,retryable:!0}},Ic=(e,t,a=3)=>{if(!e.retryable)return!1;let n={[K.NETWORK_ERROR]:3,[K.TIMEOUT_ERROR]:3,[K.RATE_LIMIT_ERROR]:2,[K.SERVER_ERROR]:3,[K.JWT_ERROR]:2,[K.JWT_EXPIRED_ERROR]:1,[K.JWT_VALIDATION_ERROR]:0,[K.FUNCTION_URL_ERROR]:2,[K.UNKNOWN_ERROR]:1}[e.type]||1;return t<n},bc=(e,t,a=1e3)=>{let r=({[K.NETWORK_ERROR]:1e3,[K.TIMEOUT_ERROR]:2e3,[K.RATE_LIMIT_ERROR]:5e3,[K.SERVER_ERROR]:2e3,[K.JWT_ERROR]:1500,[K.JWT_EXPIRED_ERROR]:500,[K.JWT_VALIDATION_ERROR]:0,[K.FUNCTION_URL_ERROR]:2e3,[K.UNKNOWN_ERROR]:1e3}[e.type]||a)*Math.pow(2,t-1),i=Math.random()*.1*r;return Math.min(r+i,3e4)},Lg=(e,t=1)=>{let a={[K.NETWORK_ERROR]:"You appear to be offline. Please check your connection and try again.",[K.TIMEOUT_ERROR]:"The request is taking longer than expected. Please try again.",[K.RATE_LIMIT_ERROR]:"I'm receiving a lot of messages right now. Please wait a moment before trying again.",[K.SERVER_ERROR]:"Our chat service is temporarily unavailable. Please try again in a few moments.",[K.CLIENT_ERROR]:"I'm having trouble processing that request. Please check your input and try again.",[K.VALIDATION_ERROR]:"The information provided is invalid. Please check and try again.",[K.RENDER_ERROR]:"There was a problem displaying the chat. Please refresh the page.",[K.CONFIG_ERROR]:"There's a configuration issue. Please contact support.",[K.JWT_ERROR]:"Authentication failed. Please try again.",[K.JWT_EXPIRED_ERROR]:"Your session has expired. Please try again.",[K.JWT_VALIDATION_ERROR]:"Authentication validation failed. Please refresh and try again.",[K.FUNCTION_URL_ERROR]:"Chat service connection failed. Please try again.",[K.UNKNOWN_ERROR]:"Something unexpected happened. Please try again."},o=a[e.type]||a[K.UNKNOWN_ERROR];return t>1?`${o} (Attempt ${t})`:o},Sc=class{constructor(){this.logs=[],this.maxLogs=100,this.enabled=C.ENABLE_DEBUG_LOGGING||!1}logError(t,a={}){let o=a.classification||Cs(t,a.response),n=Ig(t),r={timestamp:new Date().toISOString(),errorId:this.generateErrorId(),message:n.message,stack:n.stack,classification:o,context:{url:window.location.href,userAgent:navigator.userAgent,tenantHash:a.tenantHash||"unknown",messageId:a.messageId,attempt:a.attempt,...a},environment:C.ENVIRONMENT,version:window.PICASSO_VERSION||"unknown"};return this.logs.push(r),this.logs.length>this.maxLogs&&this.logs.shift(),this.enabled?console.error("\u{1F6A8} Picasso Error:",r):console.error("\u{1F6A8} Picasso Error:",n.message),C.ENVIRONMENT,this.notifyParentWindow(r),r}logWarning(t,a={}){let o={timestamp:new Date().toISOString(),level:"warning",message:t,context:a,environment:C.ENVIRONMENT};this.logs.push(o),this.logs.length>this.maxLogs&&this.logs.shift(),this.enabled&&console.warn("\u26A0\uFE0F Picasso Warning:",o)}logInfo(t,a={}){if(!this.enabled)return;let o={timestamp:new Date().toISOString(),level:"info",message:t,context:a,environment:C.ENVIRONMENT};console.log("\u2139\uFE0F Picasso Info:",o)}generateErrorId(){return`ERR_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}reportToExternalService(t){try{let a=C.ERROR_REPORTING_ENDPOINT||window.PicassoConfig?.error_reporting_endpoint;if(a&&C.ERROR_REPORTING!==!1){let o=window.PicassoConfig?.tenant||window.PicassoConfig?.tenant_id||"unknown";fetch(a,{method:"POST",headers:{"Content-Type":"application/json","x-tenant-id":o},body:JSON.stringify({...t,source:"picasso-widget",iframeMode:document.body.getAttribute("data-iframe")==="true"}),credentials:"omit"}).catch(n=>{console.warn("Failed to report error to external service:",n)})}}catch(a){console.warn("Error reporting failed:",a)}}notifyParentWindow(t){try{window.parent&&window.parent!==window&&window.parent.postMessage({type:"PICASSO_ERROR",error:{id:t.errorId,message:t.message,classification:t.classification,timestamp:t.timestamp}},"*")}catch(a){console.warn("Failed to notify parent window:",a)}}getLogs(){return[...this.logs]}clearLogs(){this.logs=[]}exportLogs(){return{logs:this.logs,summary:{total:this.logs.length,bySeverity:this.logs.reduce((t,a)=>{let o=a.classification?.severity||"unknown";return t[o]=(t[o]||0)+1,t},{}),byCategory:this.logs.reduce((t,a)=>{let o=a.classification?.category||"unknown";return t[o]=(t[o]||0)+1,t},{})}}}},g=new Sc,_g=()=>{window.addEventListener("unhandledrejection",t=>{t.preventDefault(),g.logError(new Error(t.reason),{type:"unhandledrejection",promise:t.promise})}),window.addEventListener("error",t=>{t.preventDefault(),g.logError(t.error||new Error(t.message),{type:"global",filename:t.filename,lineno:t.lineno,colno:t.colno})});let e=console.error;console.error=(...t)=>{e.apply(console,t),!(t[0]&&typeof t[0]=="string"&&t[0].includes("\u{1F6A8} Picasso Error"))&&g.logError(new Error(t.join(" ")),{type:"console_error",originalArgs:t})}},Jt={marks:new Map,startTimer(e){this.marks.set(e,performance.now())},endTimer(e){let t=this.marks.get(e);if(t){let a=performance.now()-t;return this.marks.delete(e),C.ENABLE_DEBUG_LOGGING&&console.log(`\u23F1\uFE0F ${e}: ${a.toFixed(2)}ms`),a}return null},measure(e,t){this.startTimer(e);try{return t()}finally{this.endTimer(e)}}}});var Sn,Es,Mt,et,Ts,_c,In,As=Ca(()=>{Zt();Sn=null,Es=null,Mt=()=>{if(Sn!==null)return Sn;let e=navigator.userAgent;return/CriOS|FxiOS|OPiOS|mercury/i.test(e)?(Sn=!1,Sn):(Sn=/^((?!chrome|android).)*safari/i.test(e),Sn)},et=()=>(Es!==null||(Es=Mt()&&/iPhone|iPad|iPod/i.test(navigator.userAgent)),Es),Ts={requiresKeepAlive:()=>Mt(),pausesInBackground:()=>et(),hasAggressiveMemoryManagement:()=>Mt(),dropsOnNetworkChange:()=>Mt(),keepAliveInterval:()=>et()?3e4:45e3,reconnectionDelay:()=>et()?2e3:1e3,backgroundTabTimeout:()=>et()?6e4:3e5,maxReconnectionAttempts:()=>5,useExponentialBackoff:()=>!0},_c=null,In=()=>{if(_c)return _c;let e={withCredentials:!1,timeout:2e4,retryDelay:500,maxRetries:3};return Mt()&&(e.keepAliveInterval=et()?2e4:3e4,e.reconnectionDelay=et()?1e3:500,e.backgroundTabTimeout=et()?6e4:18e4,e.maxRetries=3,e.useExponentialBackoff=!1,et()&&(e.timeout=15e3,e.backgroundHandling=!0,e.pauseInBackground=!0)),_c=e,e}});var se,Ke,bn,kc=Ca(()=>{Zt();As();se={DISCONNECTED:"disconnected",CONNECTING:"connecting",CONNECTED:"connected",RECONNECTING:"reconnecting",FAILED:"failed"},Ke={CONNECTION_OPEN:"connection_open",CONNECTION_CLOSE:"connection_close",CONNECTION_ERROR:"connection_error",MESSAGE_RECEIVED:"message_received",KEEP_ALIVE:"keep_alive",RECONNECTING:"reconnecting",BACKGROUND_TAB:"background_tab",FOREGROUND_TAB:"foreground_tab"},bn=class{constructor(t={}){this.config={url:t.url||"",keepAliveInterval:2e4,reconnectionDelay:500,maxReconnectionAttempts:3,backgroundTabTimeout:3e4,exponentialBackoffBase:1.5,maxBackoffDelay:15e3,enableKeepAlive:!0,enableBackgroundHandling:!0,withCredentials:!1,headers:{},...In(),...t},this.state=se.DISCONNECTED,this.eventSource=null,this.reconnectionAttempts=0,this.lastSuccessfulConnection=null,this.lastActivity=Date.now(),this.keepAliveTimer=null,this.reconnectionTimer=null,this.backgroundTabTimer=null,this.connectionTimeoutTimer=null,this.isBackgroundTab=!1,this.visibilityChangeListener=null,this.eventListeners=new Map,this.isSafari=Mt(),this.isMobileSafari=et(),this.metrics={connectionStartTime:null,firstMessageTime:null,totalConnections:0,totalReconnections:0,totalMessages:0,averageLatency:0},this._setupVisibilityChangeListener(),g.logInfo("SSE Connection Manager initialized",{context:"sse_connection_manager_init",isSafari:this.isSafari,isMobileSafari:this.isMobileSafari,config:{keepAliveInterval:this.config.keepAliveInterval,reconnectionDelay:this.config.reconnectionDelay,maxReconnectionAttempts:this.config.maxReconnectionAttempts}})}addEventListener(t,a){this.eventListeners.has(t)||this.eventListeners.set(t,[]),this.eventListeners.get(t).push(a)}removeEventListener(t,a){if(this.eventListeners.has(t)){let o=this.eventListeners.get(t),n=o.indexOf(a);n>-1&&o.splice(n,1)}}_emitEvent(t,a={}){this.eventListeners.has(t)&&this.eventListeners.get(t).forEach(o=>{try{o(a)}catch(n){g.logError(n,{context:"sse_event_listener_error",eventType:t})}})}_setupVisibilityChangeListener(){typeof document>"u"||(this.visibilityChangeListener=()=>{let t=this.isBackgroundTab;this.isBackgroundTab=document.hidden,this.isBackgroundTab&&!t?this._handleBackgroundTab():!this.isBackgroundTab&&t&&this._handleForegroundTab()},document.addEventListener("visibilitychange",this.visibilityChangeListener))}_handleBackgroundTab(){g.logInfo("Tab went to background",{context:"sse_background_tab",state:this.state,isMobileSafari:this.isMobileSafari}),this._emitEvent(Ke.BACKGROUND_TAB,{timestamp:Date.now(),connectionState:this.state}),this.isSafari&&this.config.enableBackgroundHandling&&(this.keepAliveTimer&&(this._clearKeepAlive(),this._setupKeepAlive(6e4)),this.isMobileSafari&&this.state===se.CONNECTED&&(this.backgroundTabTimer=setTimeout(()=>{g.logWarning("Background tab timeout reached, disconnecting",{context:"sse_background_timeout"}),this._disconnect(!1)},this.config.backgroundTabTimeout)))}_handleForegroundTab(){g.logInfo("Tab returned to foreground",{context:"sse_foreground_tab",state:this.state,shouldReconnect:this.state===se.DISCONNECTED}),this._emitEvent(Ke.FOREGROUND_TAB,{timestamp:Date.now(),connectionState:this.state}),this.backgroundTabTimer&&(clearTimeout(this.backgroundTabTimer),this.backgroundTabTimer=null),this.isSafari&&this.keepAliveTimer&&(this._clearKeepAlive(),this._setupKeepAlive(this.config.keepAliveInterval)),this.state===se.DISCONNECTED&&this._scheduleReconnection(500)}async connect(t=null){if(this.state===se.CONNECTING||this.state===se.CONNECTED)return;let a=t||this.config.url;if(!a)throw new Error("SSE URL not provided");this.state=se.CONNECTING,this.metrics.connectionStartTime=Date.now(),this.metrics.totalConnections++,g.logInfo("Starting SSE connection",{context:"sse_connection_start",url:a,attempt:this.reconnectionAttempts+1,isSafari:this.isSafari,isBackground:this.isBackgroundTab});try{let o=this._buildEventSourceUrl(a);this.eventSource=new EventSource(o,{withCredentials:this.config.withCredentials}),this.connectionTimeoutTimer=setTimeout(()=>{this.state===se.CONNECTING&&(g.logWarning("Connection timeout reached",{context:"sse_connection_timeout"}),this._handleConnectionError("Connection timeout"))},5e3),this._setupEventSourceListeners()}catch(o){throw g.logError(o,{context:"sse_connection_creation_error",url:a}),this.state=se.FAILED,this._emitEvent(Ke.CONNECTION_ERROR,{error:o}),o}}_buildEventSourceUrl(t){let a=new URL(t);return this.isSafari&&(a.searchParams.set("safari","1"),a.searchParams.set("safari_version",this._getSafariVersion()),this.isMobileSafari&&(a.searchParams.set("mobile","1"),a.searchParams.set("ios_version",this._getIOSVersion())),this.config.enableKeepAlive&&a.searchParams.set("keepalive",this.config.keepAliveInterval.toString())),a.searchParams.set("attempt",(this.reconnectionAttempts+1).toString()),a.searchParams.set("background",this.isBackgroundTab?"1":"0"),a.toString()}_getSafariVersion(){let t=navigator.userAgent.match(/Version\/(\d+)\.(\d+)/);return t?`${t[1]}.${t[2]}`:"unknown"}_getIOSVersion(){let t=navigator.userAgent.match(/OS (\d+)_(\d+)/);return t?`${t[1]}.${t[2]}`:"unknown"}_setupEventSourceListeners(){this.eventSource&&(this.eventSource.onopen=t=>{this._clearConnectionTimeout(),this.state=se.CONNECTED,this.reconnectionAttempts=0,this.lastSuccessfulConnection=Date.now(),this.lastActivity=Date.now();let a=Date.now()-this.metrics.connectionStartTime;if(g.logInfo("SSE connection established",{context:"sse_connection_established",connectionTime:a+"ms",readyState:this.eventSource.readyState,attempt:this.metrics.totalConnections}),this._emitEvent(Ke.CONNECTION_OPEN,{timestamp:Date.now(),connectionTime:a,attempt:this.metrics.totalConnections}),this.config.enableKeepAlive&&this.isSafari){let o=this.isBackgroundTab?6e4:this.config.keepAliveInterval;this._setupKeepAlive(o)}},this.eventSource.onmessage=t=>{this._handleMessage(t)},this.eventSource.onerror=t=>{this._handleConnectionError("EventSource error",t)})}_handleMessage(t){let a=Date.now();if(this.lastActivity=a,this.metrics.totalMessages++,!this.metrics.firstMessageTime){this.metrics.firstMessageTime=a;let o=a-this.metrics.connectionStartTime;this.metrics.averageLatency=o,o>1e3?g.logWarning("Slow first SSE message",{context:"sse_first_message_slow",latency:o+"ms",target:"< 1000ms"}):g.logInfo("First SSE message received",{context:"sse_first_message",latency:o+"ms"})}try{let o;if(t.data==="[DONE]"){this._emitEvent(Ke.MESSAGE_RECEIVED,{type:"stream_complete",data:"[DONE]",timestamp:Date.now()});return}try{o=JSON.parse(t.data)}catch{o={type:"text",content:t.data}}if(o.type==="keepalive"||o.type==="ping"){this._handleKeepAliveMessage(o);return}this._emitEvent(Ke.MESSAGE_RECEIVED,{...o,timestamp:Date.now(),raw:t.data})}catch(o){g.logError(o,{context:"sse_message_parsing_error",eventData:t.data?.substring(0,200)})}}_handleKeepAliveMessage(t){g.logInfo("Keep-alive message received",{context:"sse_keepalive_received",serverTime:t.timestamp,expectResponse:t.expectResponse}),this._emitEvent(Ke.KEEP_ALIVE,{...t,clientTime:Date.now()}),t.expectResponse&&this._sendKeepAliveResponse()}_sendKeepAliveResponse(){g.logInfo("Sending keep-alive response",{context:"sse_keepalive_response"})}_setupKeepAlive(t){this._clearKeepAlive(),!(!this.config.enableKeepAlive||!this.isSafari)&&(this.keepAliveTimer=setInterval(()=>{this.state===se.CONNECTED&&this.eventSource&&this._sendKeepAlivePing()},t),g.logInfo("Keep-alive timer setup",{context:"sse_keepalive_setup",interval:t+"ms",isBackground:this.isBackgroundTab}))}_sendKeepAlivePing(){g.logInfo("Sending keep-alive ping",{context:"sse_keepalive_ping",lastActivity:Date.now()-this.lastActivity})}_clearKeepAlive(){this.keepAliveTimer&&(clearInterval(this.keepAliveTimer),this.keepAliveTimer=null)}_clearConnectionTimeout(){this.connectionTimeoutTimer&&(clearTimeout(this.connectionTimeoutTimer),this.connectionTimeoutTimer=null)}_handleConnectionError(t="Unknown error",a=null){this._clearConnectionTimeout(),this._clearKeepAlive();let o={reason:t,readyState:this.eventSource?.readyState,lastActivity:this.lastActivity,reconnectionAttempts:this.reconnectionAttempts,isBackground:this.isBackgroundTab,timeSinceLastSuccess:this.lastSuccessfulConnection?Date.now()-this.lastSuccessfulConnection:null};g.logError(t,{context:"sse_connection_error",...o}),this._emitEvent(Ke.CONNECTION_ERROR,o),this.eventSource&&(this.eventSource.close(),this.eventSource=null),this.reconnectionAttempts<this.config.maxReconnectionAttempts?(this.state=se.RECONNECTING,this._scheduleReconnection()):(this.state=se.FAILED,g.logWarning("Maximum reconnection attempts reached",{context:"sse_max_reconnections",attempts:this.reconnectionAttempts}))}_scheduleReconnection(t=null){let a=t;a===null&&(this.config.exponentialBackoffBase&&this.reconnectionAttempts>0?a=Math.min(this.config.reconnectionDelay*Math.pow(this.config.exponentialBackoffBase,this.reconnectionAttempts),this.config.maxBackoffDelay):a=this.config.reconnectionDelay*(this.reconnectionAttempts+1)),g.logInfo("Scheduling reconnection",{context:"sse_reconnection_scheduled",delay:a+"ms",attempt:this.reconnectionAttempts+1,maxAttempts:this.config.maxReconnectionAttempts}),this._emitEvent(Ke.RECONNECTING,{delay:a,attempt:this.reconnectionAttempts+1,maxAttempts:this.config.maxReconnectionAttempts}),this.reconnectionTimer=setTimeout(()=>{this.reconnectionAttempts++,this.metrics.totalReconnections++,this.connect()},a)}_disconnect(t=!1){this._clearKeepAlive(),this._clearConnectionTimeout(),this.reconnectionTimer&&(clearTimeout(this.reconnectionTimer),this.reconnectionTimer=null),this.backgroundTabTimer&&(clearTimeout(this.backgroundTabTimer),this.backgroundTabTimer=null),this.eventSource&&(this.eventSource.close(),this.eventSource=null);let a=this.state===se.CONNECTED;this.state=t?se.RECONNECTING:se.DISCONNECTED,a&&this._emitEvent(Ke.CONNECTION_CLOSE,{timestamp:Date.now(),allowReconnection:t}),g.logInfo("SSE connection disconnected",{context:"sse_disconnected",allowReconnection:t,wasConnected:a})}disconnect(){this._disconnect(!1)}getState(){return this.state}getMetrics(){return{...this.metrics,currentState:this.state,reconnectionAttempts:this.reconnectionAttempts,isBackground:this.isBackgroundTab,lastActivity:this.lastActivity,uptime:this.lastSuccessfulConnection?Date.now()-this.lastSuccessfulConnection:0}}isConnected(){return this.state===se.CONNECTED}destroy(){this._disconnect(!1),this.visibilityChangeListener&&typeof document<"u"&&(document.removeEventListener("visibilitychange",this.visibilityChangeListener),this.visibilityChangeListener=null),this.eventListeners.clear(),this.eventSource=null,this.metrics=null,this.config=null,g.logInfo("SSE Connection Manager destroyed",{context:"sse_manager_destroyed"})}}});var Eg={};ti(Eg,{useStreaming:()=>b0});var Me,b0,Tg=Ca(()=>{Me=Y(Fe(),1);Zt();As();kc();b0=({streamingEndpoint:e,tenantHash:t,jwt:a,onMessage:o,onComplete:n,onError:r,enableSafariOptimizations:i=!0})=>{let[s,l]=(0,Me.useState)(!1),[u,d]=(0,Me.useState)(se.DISCONNECTED),[h,x]=(0,Me.useState)({startTime:null,firstTokenTime:null,endTime:null,tokenCount:0,reconnectionAttempts:0,backgroundDisconnections:0,authMethod:a?"jwt":"legacy"}),[v]=(0,Me.useState)(()=>Mt()),[y]=(0,Me.useState)(()=>et()),I=(0,Me.useRef)(null),F=(0,Me.useRef)(null),f=(0,Me.useRef)(null),c=(0,Me.useRef)(!1),p=(0,Me.useRef)(null),w=(0,Me.useCallback)(()=>{if(!i||!v)return null;if(f.current&&f.current.config.url===e)return f.current;f.current&&f.current.destroy();let O=In();O.url=e,O.enableKeepAlive=!0,O.enableBackgroundHandling=!0,O.keepAliveInterval=2e4;let D=new bn(O);return f.current=D,D.addEventListener(Ke.CONNECTION_OPEN,G=>{d(se.CONNECTED),g.logInfo("Safari SSE streaming connection opened",{context:"safari_streaming_connected",connectionTime:G.connectionTime,isMobileSafari:y})}),D.addEventListener(Ke.CONNECTION_CLOSE,()=>{d(se.DISCONNECTED)}),D.addEventListener(Ke.CONNECTION_ERROR,G=>{x(j=>({...j,reconnectionAttempts:j.reconnectionAttempts+1})),g.logError(G.reason,{context:"safari_streaming_error",isMobileSafari:y,reconnectionAttempts:G.reconnectionAttempts})}),D.addEventListener(Ke.BACKGROUND_TAB,()=>{c.current=!0,x(G=>({...G,backgroundDisconnections:G.backgroundDisconnections+1}))}),D.addEventListener(Ke.FOREGROUND_TAB,()=>{c.current=!1}),D.addEventListener(Ke.RECONNECTING,G=>{d(se.RECONNECTING),g.logInfo("Safari SSE reconnecting",{context:"safari_streaming_reconnecting",attempt:G.attempt,delay:G.delay})}),D},[e,i,v,y]),L=(0,Me.useCallback)(async({userInput:O,sessionId:D,jwt:G})=>{let j=G||a;if(!e||!t){let re=new Error(e?"Tenant hash required for streaming":"Streaming endpoint not configured");g.logError(re,{context:"streaming_validation_error",tenantHash:t?.slice(0,8)+"...",hasEndpoint:!!e}),r?.(re);return}I.current&&(g.logInfo("\u{1F9F9} Cleaning up existing streaming connection"),I.current.close()),f.current&&f.current.disconnect(),l(!0),d(se.CONNECTING);let ce=Date.now();x(re=>({...re,startTime:ce,firstTokenTime:null,endTime:null,tokenCount:0})),p.current={userInput:O,sessionId:D,startTime:ce,jwt:j};try{if(i&&v){let xe=w();if(xe){xe.addEventListener(Ke.MESSAGE_RECEIVED,M=>{if(M.type==="stream_complete"||M.data==="[DONE]"){let q=Date.now();x(ue=>({...ue,endTime:q})),_(),n?.()}else{let q=Date.now();if(x(ue=>{let ee=ue.firstTokenTime||q;return{...ue,firstTokenTime:ee,tokenCount:ue.tokenCount+1}}),M.content)o?.(M.content);else if(M.raw&&M.raw!=="[DONE]")try{let ue=JSON.parse(M.raw);ue.type==="text"&&ue.content&&o?.(ue.content)}catch{o?.(M.raw)}}});let A;if(j){let M=new URLSearchParams({jwt:j,user_input:O,session_id:D,safari:"1",mobile:y?"1":"0"});A=`${e}?${M.toString()}`}else{let M=new URLSearchParams({t,user_input:O,session_id:D,safari:"1",mobile:y?"1":"0"});A=`${e}?${M.toString()}`}g.logInfo("\u{1F680} Starting Safari-optimized streaming connection",{endpoint:e,tenantHash:t?t.slice(0,8)+"...":"none",hasJWT:!!j,authMethod:j?"jwt":"legacy",isMobileSafari:y,timestamp:new Date().toISOString()}),await xe.connect(A);return}}let re;if(j){let xe=new URLSearchParams({jwt:j,user_input:O,session_id:D});re=`${e}?${xe.toString()}`}else{let xe=new URLSearchParams({t,user_input:O,session_id:D});re=`${e}?${xe.toString()}`}g.logInfo("\u{1F680} Starting standard streaming connection",{endpoint:e,tenantHash:t?t.slice(0,8)+"...":"none",hasJWT:!!j,authMethod:j?"jwt":"legacy",url:j?"[REDACTED - JWT URL]":re.replace(t||"",(t||"").slice(0,8)+"..."),timestamp:new Date().toISOString()});let xt=new EventSource(re);I.current=xt;let Ha=new AbortController;F.current=Ha;let Ht=setTimeout(()=>{g.logWarning("\u23F1\uFE0F Streaming timeout reached (optimized for performance)"),_(),r?.(new Error("Streaming response timeout"))},v?15e3:2e4);xt.onopen=()=>{let xe=Date.now()-ce;d(se.CONNECTED),g.logInfo("\u2705 Streaming connection opened",{connectionTime:xe+"ms",readyState:xt.readyState,url:e,isSafari:v}),Ht&&(clearTimeout(Ht),Ht=setTimeout(()=>{g.logWarning("\u23F1\uFE0F Streaming response timeout after connection (performance optimized)"),_(),r?.(new Error("Streaming response timeout"))},v?2e4:25e3))},xt.onmessage=xe=>{Ht&&clearTimeout(Ht);let A=Date.now();if(x(M=>{let q=M.firstTokenTime||A;return{...M,firstTokenTime:q,tokenCount:M.tokenCount+1}}),xe.data==="[DONE]")g.logInfo("\u2705 Streaming completed",{duration:A-h.startTime,tokenCount:h.tokenCount,isSafari:v}),x(M=>({...M,endTime:A})),_(),n?.();else try{let M=JSON.parse(xe.data);if(M.type==="text"&&M.content)o?.(M.content);else if(M.type==="error")throw new Error(M.message)}catch(M){if(M instanceof SyntaxError)o?.(xe.data);else throw M}},xt.onerror=xe=>{let A=xt.readyState,M="Streaming connection error",q="streaming_connection_error";switch(A){case EventSource.CONNECTING:M=j?"Failed to connect to streaming endpoint (JWT auth)":"Failed to connect to streaming endpoint",q=j?"streaming_jwt_connection_failed":"streaming_connection_failed";break;case EventSource.OPEN:M="Streaming connection interrupted",q="streaming_connection_interrupted";break;case EventSource.CLOSED:M=j?"JWT authenticated streaming connection was closed by server":"Streaming connection was closed by server",q=j?"streaming_jwt_connection_closed":"streaming_connection_closed";break;default:M="Unknown streaming connection error",q="streaming_unknown_error"}if(g.logError(xe,{context:q,readyState:A,errorMessage:M,streamingEndpoint:e,hasJWT:!!j,authMethod:j?"jwt":"legacy",isSafari:v,isMobileSafari:y,isBackgroundTab:c.current}),clearTimeout(Ht),v&&c.current){g.logInfo("Safari background tab detected, scheduling reconnection");return}_(),r?.(new Error(M))}}catch(re){g.logError(re,{context:"streaming_setup_error",isSafari:v}),l(!1),d(se.FAILED),r?.(re)}},[e,t,a,o,n,r,i,v,y,w]),_=(0,Me.useCallback)(()=>{I.current&&(I.current.close(),I.current=null),F.current&&(F.current.abort(),F.current=null),f.current&&f.current.disconnect(),l(!1),d(se.DISCONNECTED),x(O=>({...O,endTime:O.endTime||Date.now()})),p.current=null,g.logInfo("Streaming stopped",{context:"streaming_stopped",isSafari:v,finalMetrics:h})},[v,h]),S=(0,Me.useCallback)(()=>{let{startTime:O,firstTokenTime:D,endTime:G,tokenCount:j,reconnectionAttempts:ce,backgroundDisconnections:re}=h;return O?{timeToFirstToken:D?D-O:null,totalTime:G?G-O:null,tokenCount:j,tokensPerSecond:G&&j>0?(j/((G-O)/1e3)).toFixed(2):null,reconnectionAttempts:ce,backgroundDisconnections:re,safariOptimizationsUsed:i&&v,isMobileSafari:y,connectionState:u,authMethod:a?"jwt":"legacy",hasJWT:!!a}:null},[h,i,v,y,u]),b=(0,Me.useCallback)(()=>({isSafari:v,isMobileSafari:y,safariOptimizationsEnabled:i,connectionManagerActive:!!f.current,backgroundTabActive:c.current,safariSSEBehaviors:v?Ts:null}),[v,y,i]),$=(0,Me.useCallback)(()=>{if(p.current){let{userInput:O,sessionId:D,jwt:G}=p.current;g.logInfo("Manual reconnection triggered",{context:"streaming_manual_reconnect",isSafari:v,session:D,hasJWT:!!G,authMethod:G?"jwt":"legacy"}),_(),setTimeout(()=>{L({userInput:O,sessionId:D,jwt:G})},1e3)}},[L,_,v]);return(0,Me.useEffect)(()=>{if(!v||typeof document>"u")return;let O=()=>{let D=c.current;c.current=document.hidden,document.hidden&&!D?g.logInfo("Safari tab went to background during streaming",{context:"streaming_background_tab",isStreaming:s,connectionState:u}):!document.hidden&&D&&(g.logInfo("Safari tab returned to foreground during streaming",{context:"streaming_foreground_tab",isStreaming:s,connectionState:u}),s&&u===se.DISCONNECTED&&$())};return document.addEventListener("visibilitychange",O),()=>{document.removeEventListener("visibilitychange",O)}},[v,s,u,$]),(0,Me.useEffect)(()=>()=>{f.current&&(f.current.destroy(),f.current=null)},[]),{isStreaming:s,connectionState:u,isConnected:u===se.CONNECTED,isReconnecting:u===se.RECONNECTING,startStreaming:L,stopStreaming:_,reconnect:$,getMetrics:S,getSafariInfo:b,isSafari:v,isMobileSafari:y,safariOptimizationsEnabled:i,isBackgroundTab:c.current,connectionManager:f.current,hasJWT:!!a,authMethod:a?"jwt":"legacy"}}});var Ng={};ti(Ng,{generateStreamingDiagnostics:()=>Rg,quickStreamingHealthCheck:()=>Ag,validateStreamingEndpoint:()=>Rr});var Rr,Ag,Rg,Og=Ca(()=>{Zt();Lt();Rr=async(e,t)=>{let a=Date.now(),o={isValid:!1,endpoint:e,tenantHash:t?.slice(0,8)+"...",diagnostics:{connectionTest:null,responseTime:null,errorDetails:null,recommendations:[]},timestamp:new Date().toISOString()};try{if(!e)return o.diagnostics.errorDetails="No streaming endpoint provided",o.diagnostics.recommendations.push("Configure streaming endpoint in tenant config or environment"),o;if(!t)return o.diagnostics.errorDetails="No tenant hash provided",o.diagnostics.recommendations.push("Ensure tenant hash is available"),o;try{new URL(e)}catch(l){return o.diagnostics.errorDetails=`Invalid streaming endpoint URL: ${l.message}`,o.diagnostics.recommendations.push("Check streaming endpoint URL format"),o}g.logInfo("\u{1F50D} Testing streaming endpoint connectivity",{endpoint:e,tenantHash:o.tenantHash});let n=new URLSearchParams({t,user_input:"__CONNECTIVITY_TEST__",session_id:`test_${Date.now()}`}),r=`${e}?${n.toString()}`,s=await new Promise((l,u)=>{let d=new EventSource(r),h=!1,x=setTimeout(()=>{d.close(),h||u(new Error("Connection timeout - endpoint may not be available"))},1e4);d.onopen=()=>{h=!0;let v=Date.now()-a;clearTimeout(x),d.close(),l({success:!0,responseTime:v,message:"Connection established successfully"})},d.onerror=v=>{clearTimeout(x),d.close();let y=d.readyState===EventSource.CLOSED?"Connection was closed by server":"Connection error occurred";u(new Error(`${y} (ReadyState: ${d.readyState})`))},d.onmessage=v=>{clearTimeout(x),d.close();let y=Date.now()-a;l({success:!0,responseTime:y,message:"Received response from streaming endpoint",firstMessage:v.data?.substring(0,100)||"Empty message"})}});o.isValid=!0,o.diagnostics.connectionTest=s,o.diagnostics.responseTime=s.responseTime,g.logInfo("\u2705 Streaming endpoint validation successful",{endpoint:e,tenantHash:o.tenantHash,responseTime:s.responseTime+"ms"})}catch(n){o.diagnostics.errorDetails=n.message,o.diagnostics.connectionTest={success:!1,error:n.message},n.message.includes("timeout")?(o.diagnostics.recommendations.push("Check if streaming endpoint is responding"),o.diagnostics.recommendations.push("Verify Lambda function is deployed and accessible")):n.message.includes("Connection was closed")?(o.diagnostics.recommendations.push("Backend may not support streaming for this tenant"),o.diagnostics.recommendations.push("Check tenant hash configuration in backend")):n.message.includes("Connection error")&&(o.diagnostics.recommendations.push("Check network connectivity"),o.diagnostics.recommendations.push("Verify CORS configuration for streaming endpoint")),g.logError(n,{context:"streaming_endpoint_validation",endpoint:e,tenantHash:o.tenantHash})}return o.diagnostics.validationDuration=Date.now()-a,o},Ag=async e=>{try{let t=C.getStreamingUrl(e);return(await Rr(t,e)).isValid}catch(t){return g.logWarning("Quick streaming health check failed",{error:t.message,tenantHash:e?.slice(0,8)+"..."}),!1}},Rg=async(e,t)=>{let a={timestamp:new Date().toISOString(),tenantHash:t?.slice(0,8)+"...",configuration:{hasConfig:!!e,streamingFeature:e?.features?.streaming_enabled||e?.features?.streaming,configuredEndpoint:e?.endpoints?.streaming,environmentEndpoint:null,fallbackEndpoint:null},validation:{configEndpoint:null,environmentEndpoint:null,fallbackEndpoint:null},recommendations:[]};try{a.configuration.environmentEndpoint=C.getStreamingUrl(t),a.validation.environmentEndpoint=await Rr(a.configuration.environmentEndpoint,t),e?.endpoints?.streaming&&(a.validation.configEndpoint=await Rr(e.endpoints.streaming,t)),!a.validation.environmentEndpoint?.isValid&&!a.validation.configEndpoint?.isValid?(a.recommendations.push("\u274C No valid streaming endpoints found"),a.recommendations.push("\u{1F527} Check backend deployment and streaming Lambda function"),a.recommendations.push("\u{1F527} Verify tenant hash is configured in backend")):a.validation.environmentEndpoint?.isValid&&(a.recommendations.push("\u2705 Environment streaming endpoint is working"),a.recommendations.push("\u{1F4A1} Consider enabling streaming in tenant configuration")),a.validation.configEndpoint?.isValid&&a.recommendations.push("\u2705 Configured streaming endpoint is working");let o=a.validation.environmentEndpoint?.diagnostics?.responseTime;o>2e3&&(a.recommendations.push(`\u26A0\uFE0F Slow streaming response time: ${o}ms (target: <2000ms)`),a.recommendations.push("\u{1F527} Consider optimizing backend streaming performance"))}catch(o){a.error=o.message,a.recommendations.push("\u274C Failed to complete diagnostics"),a.recommendations.push("\u{1F527} Check network connectivity and endpoint availability")}return a};typeof window<"u"&&C.isDevelopment()&&(window.validateStreamingEndpoint=Rr,window.quickStreamingHealthCheck=Ag,window.generateStreamingDiagnostics=Rg,console.log("\u{1F527} STREAMING VALIDATION UTILITIES AVAILABLE:"),console.log("- validateStreamingEndpoint(endpoint, tenantHash)"),console.log("- quickStreamingHealthCheck(tenantHash)"),console.log("- generateStreamingDiagnostics(config, tenantHash)"))});var Yg={};ti(Yg,{Hooks:()=>No,Lexer:()=>ea,Marked:()=>Os,Parser:()=>ta,Renderer:()=>Po,TextRenderer:()=>Ln,Tokenizer:()=>Oo,defaults:()=>fo,getDefaults:()=>Ps,lexer:()=>uy,marked:()=>pe,options:()=>ay,parse:()=>sy,parseInline:()=>iy,parser:()=>ly,setOptions:()=>oy,use:()=>ny,walkTokens:()=>ry});function Ps(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}function Ug(e){fo=e}function Ft(e,t){if(t){if(Bg.test(e))return e.replace(L0,Pg)}else if(Hg.test(e))return e.replace(_0,Pg);return e}function he(e,t){let a=typeof e=="string"?e:e.source;t=t||"";let o={replace:(n,r)=>{let i=typeof r=="string"?r:r.source;return i=i.replace(C0,"$1"),a=a.replace(n,i),o},getRegex:()=>new RegExp(a,t)};return o}function Dg(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}function Mg(e,t){let a=e.replace(/\|/g,(r,i,s)=>{let l=!1,u=i;for(;--u>=0&&s[u]==="\\";)l=!l;return l?"|":" |"}),o=a.split(/ \|/),n=0;if(o[0].trim()||o.shift(),o.length>0&&!o[o.length-1].trim()&&o.pop(),t)if(o.length>t)o.splice(t);else for(;o.length<t;)o.push("");for(;n<o.length;n++)o[n]=o[n].trim().replace(/\\\|/g,"|");return o}function Nr(e,t,a){let o=e.length;if(o===0)return"";let n=0;for(;n<o;){let r=e.charAt(o-n-1);if(r===t&&!a)n++;else if(r!==t&&a)n++;else break}return e.slice(0,o-n)}function E0(e,t){if(e.indexOf(t[1])===-1)return-1;let a=0;for(let o=0;o<e.length;o++)if(e[o]==="\\")o++;else if(e[o]===t[0])a++;else if(e[o]===t[1]&&(a--,a<0))return o;return-1}function Fg(e,t,a,o){let n=t.href,r=t.title?Ft(t.title):null,i=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){o.state.inLink=!0;let s={type:"link",raw:a,href:n,title:r,text:i,tokens:o.inlineTokens(i)};return o.state.inLink=!1,s}return{type:"image",raw:a,href:n,title:r,text:Ft(i)}}function T0(e,t){let a=e.match(/^(\s+)(?:```)/);if(a===null)return t;let o=a[1];return t.split(`
`).map(n=>{let r=n.match(/^\s+/);if(r===null)return n;let[i]=r;return i.length>=o.length?n.slice(o.length):n}).join(`
`)}function pe(e,t){return Do.parse(e,t)}var fo,Bg,L0,Hg,_0,k0,Pg,C0,Pr,Oo,A0,R0,N0,Dr,O0,$g,Wg,Pc,P0,Dc,D0,M0,Ds,Mc,F0,Vg,z0,Fc,zg,U0,B0,Gg,H0,qg,$0,Mr,W0,V0,G0,q0,j0,K0,Y0,X0,Q0,Ns,J0,jg,Kg,Z0,zc,ey,Oc,ty,Rs,Or,ea,Po,Ln,ta,No,Os,Do,ay,oy,ny,ry,iy,sy,ly,uy,Xg=Ca(()=>{fo=Ps();Bg=/[&<>"']/,L0=new RegExp(Bg.source,"g"),Hg=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,_0=new RegExp(Hg.source,"g"),k0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Pg=e=>k0[e];C0=/(^|[^\[])\^/g;Pr={exec:()=>null};Oo=class{options;rules;lexer;constructor(t){this.options=t||fo}space(t){let a=this.rules.block.newline.exec(t);if(a&&a[0].length>0)return{type:"space",raw:a[0]}}code(t){let a=this.rules.block.code.exec(t);if(a){let o=a[0].replace(/^(?: {1,4}| {0,3}\t)/gm,"");return{type:"code",raw:a[0],codeBlockStyle:"indented",text:this.options.pedantic?o:Nr(o,`
`)}}}fences(t){let a=this.rules.block.fences.exec(t);if(a){let o=a[0],n=T0(o,a[3]||"");return{type:"code",raw:o,lang:a[2]?a[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):a[2],text:n}}}heading(t){let a=this.rules.block.heading.exec(t);if(a){let o=a[2].trim();if(/#$/.test(o)){let n=Nr(o,"#");(this.options.pedantic||!n||/ $/.test(n))&&(o=n.trim())}return{type:"heading",raw:a[0],depth:a[1].length,text:o,tokens:this.lexer.inline(o)}}}hr(t){let a=this.rules.block.hr.exec(t);if(a)return{type:"hr",raw:Nr(a[0],`
`)}}blockquote(t){let a=this.rules.block.blockquote.exec(t);if(a){let o=Nr(a[0],`
`).split(`
`),n="",r="",i=[];for(;o.length>0;){let s=!1,l=[],u;for(u=0;u<o.length;u++)if(/^ {0,3}>/.test(o[u]))l.push(o[u]),s=!0;else if(!s)l.push(o[u]);else break;o=o.slice(u);let d=l.join(`
`),h=d.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");n=n?`${n}
${d}`:d,r=r?`${r}
${h}`:h;let x=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,i,!0),this.lexer.state.top=x,o.length===0)break;let v=i[i.length-1];if(v?.type==="code")break;if(v?.type==="blockquote"){let y=v,I=y.raw+`
`+o.join(`
`),F=this.blockquote(I);i[i.length-1]=F,n=n.substring(0,n.length-y.raw.length)+F.raw,r=r.substring(0,r.length-y.text.length)+F.text;break}else if(v?.type==="list"){let y=v,I=y.raw+`
`+o.join(`
`),F=this.list(I);i[i.length-1]=F,n=n.substring(0,n.length-v.raw.length)+F.raw,r=r.substring(0,r.length-y.raw.length)+F.raw,o=I.substring(i[i.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:i,text:r}}}list(t){let a=this.rules.block.list.exec(t);if(a){let o=a[1].trim(),n=o.length>1,r={type:"list",raw:"",ordered:n,start:n?+o.slice(0,-1):"",loose:!1,items:[]};o=n?`\\d{1,9}\\${o.slice(-1)}`:`\\${o}`,this.options.pedantic&&(o=n?o:"[*+-]");let i=new RegExp(`^( {0,3}${o})((?:[	 ][^\\n]*)?(?:\\n|$))`),s=!1;for(;t;){let l=!1,u="",d="";if(!(a=i.exec(t))||this.rules.block.hr.test(t))break;u=a[0],t=t.substring(u.length);let h=a[2].split(`
`,1)[0].replace(/^\t+/,f=>" ".repeat(3*f.length)),x=t.split(`
`,1)[0],v=!h.trim(),y=0;if(this.options.pedantic?(y=2,d=h.trimStart()):v?y=a[1].length+1:(y=a[2].search(/[^ ]/),y=y>4?1:y,d=h.slice(y),y+=a[1].length),v&&/^[ \t]*$/.test(x)&&(u+=x+`
`,t=t.substring(x.length+1),l=!0),!l){let f=new RegExp(`^ {0,${Math.min(3,y-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),c=new RegExp(`^ {0,${Math.min(3,y-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),p=new RegExp(`^ {0,${Math.min(3,y-1)}}(?:\`\`\`|~~~)`),w=new RegExp(`^ {0,${Math.min(3,y-1)}}#`),L=new RegExp(`^ {0,${Math.min(3,y-1)}}<(?:[a-z].*>|!--)`,"i");for(;t;){let _=t.split(`
`,1)[0],S;if(x=_,this.options.pedantic?(x=x.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  "),S=x):S=x.replace(/\t/g,"    "),p.test(x)||w.test(x)||L.test(x)||f.test(x)||c.test(x))break;if(S.search(/[^ ]/)>=y||!x.trim())d+=`
`+S.slice(y);else{if(v||h.replace(/\t/g,"    ").search(/[^ ]/)>=4||p.test(h)||w.test(h)||c.test(h))break;d+=`
`+x}!v&&!x.trim()&&(v=!0),u+=_+`
`,t=t.substring(_.length+1),h=S.slice(y)}}r.loose||(s?r.loose=!0:/\n[ \t]*\n[ \t]*$/.test(u)&&(s=!0));let I=null,F;this.options.gfm&&(I=/^\[[ xX]\] /.exec(d),I&&(F=I[0]!=="[ ] ",d=d.replace(/^\[[ xX]\] +/,""))),r.items.push({type:"list_item",raw:u,task:!!I,checked:F,loose:!1,text:d,tokens:[]}),r.raw+=u}r.items[r.items.length-1].raw=r.items[r.items.length-1].raw.trimEnd(),r.items[r.items.length-1].text=r.items[r.items.length-1].text.trimEnd(),r.raw=r.raw.trimEnd();for(let l=0;l<r.items.length;l++)if(this.lexer.state.top=!1,r.items[l].tokens=this.lexer.blockTokens(r.items[l].text,[]),!r.loose){let u=r.items[l].tokens.filter(h=>h.type==="space"),d=u.length>0&&u.some(h=>/\n.*\n/.test(h.raw));r.loose=d}if(r.loose)for(let l=0;l<r.items.length;l++)r.items[l].loose=!0;return r}}html(t){let a=this.rules.block.html.exec(t);if(a)return{type:"html",block:!0,raw:a[0],pre:a[1]==="pre"||a[1]==="script"||a[1]==="style",text:a[0]}}def(t){let a=this.rules.block.def.exec(t);if(a){let o=a[1].toLowerCase().replace(/\s+/g," "),n=a[2]?a[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=a[3]?a[3].substring(1,a[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):a[3];return{type:"def",tag:o,raw:a[0],href:n,title:r}}}table(t){let a=this.rules.block.table.exec(t);if(!a||!/[:|]/.test(a[2]))return;let o=Mg(a[1]),n=a[2].replace(/^\||\| *$/g,"").split("|"),r=a[3]&&a[3].trim()?a[3].replace(/\n[ \t]*$/,"").split(`
`):[],i={type:"table",raw:a[0],header:[],align:[],rows:[]};if(o.length===n.length){for(let s of n)/^ *-+: *$/.test(s)?i.align.push("right"):/^ *:-+: *$/.test(s)?i.align.push("center"):/^ *:-+ *$/.test(s)?i.align.push("left"):i.align.push(null);for(let s=0;s<o.length;s++)i.header.push({text:o[s],tokens:this.lexer.inline(o[s]),header:!0,align:i.align[s]});for(let s of r)i.rows.push(Mg(s,i.header.length).map((l,u)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:i.align[u]})));return i}}lheading(t){let a=this.rules.block.lheading.exec(t);if(a)return{type:"heading",raw:a[0],depth:a[2].charAt(0)==="="?1:2,text:a[1],tokens:this.lexer.inline(a[1])}}paragraph(t){let a=this.rules.block.paragraph.exec(t);if(a){let o=a[1].charAt(a[1].length-1)===`
`?a[1].slice(0,-1):a[1];return{type:"paragraph",raw:a[0],text:o,tokens:this.lexer.inline(o)}}}text(t){let a=this.rules.block.text.exec(t);if(a)return{type:"text",raw:a[0],text:a[0],tokens:this.lexer.inline(a[0])}}escape(t){let a=this.rules.inline.escape.exec(t);if(a)return{type:"escape",raw:a[0],text:Ft(a[1])}}tag(t){let a=this.rules.inline.tag.exec(t);if(a)return!this.lexer.state.inLink&&/^<a /i.test(a[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(a[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(a[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(a[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:a[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:a[0]}}link(t){let a=this.rules.inline.link.exec(t);if(a){let o=a[2].trim();if(!this.options.pedantic&&/^</.test(o)){if(!/>$/.test(o))return;let i=Nr(o.slice(0,-1),"\\");if((o.length-i.length)%2===0)return}else{let i=E0(a[2],"()");if(i>-1){let l=(a[0].indexOf("!")===0?5:4)+a[1].length+i;a[2]=a[2].substring(0,i),a[0]=a[0].substring(0,l).trim(),a[3]=""}}let n=a[2],r="";if(this.options.pedantic){let i=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);i&&(n=i[1],r=i[3])}else r=a[3]?a[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(this.options.pedantic&&!/>$/.test(o)?n=n.slice(1):n=n.slice(1,-1)),Fg(a,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},a[0],this.lexer)}}reflink(t,a){let o;if((o=this.rules.inline.reflink.exec(t))||(o=this.rules.inline.nolink.exec(t))){let n=(o[2]||o[1]).replace(/\s+/g," "),r=a[n.toLowerCase()];if(!r){let i=o[0].charAt(0);return{type:"text",raw:i,text:i}}return Fg(o,r,o[0],this.lexer)}}emStrong(t,a,o=""){let n=this.rules.inline.emStrongLDelim.exec(t);if(!n||n[3]&&o.match(/[\p{L}\p{N}]/u))return;if(!(n[1]||n[2]||"")||!o||this.rules.inline.punctuation.exec(o)){let i=[...n[0]].length-1,s,l,u=i,d=0,h=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,a=a.slice(-1*t.length+i);(n=h.exec(a))!=null;){if(s=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!s)continue;if(l=[...s].length,n[3]||n[4]){u+=l;continue}else if((n[5]||n[6])&&i%3&&!((i+l)%3)){d+=l;continue}if(u-=l,u>0)continue;l=Math.min(l,l+u+d);let x=[...n[0]][0].length,v=t.slice(0,i+n.index+x+l);if(Math.min(i,l)%2){let I=v.slice(1,-1);return{type:"em",raw:v,text:I,tokens:this.lexer.inlineTokens(I)}}let y=v.slice(2,-2);return{type:"strong",raw:v,text:y,tokens:this.lexer.inlineTokens(y)}}}}codespan(t){let a=this.rules.inline.code.exec(t);if(a){let o=a[2].replace(/\n/g," "),n=/[^ ]/.test(o),r=/^ /.test(o)&&/ $/.test(o);return n&&r&&(o=o.substring(1,o.length-1)),o=Ft(o,!0),{type:"codespan",raw:a[0],text:o}}}br(t){let a=this.rules.inline.br.exec(t);if(a)return{type:"br",raw:a[0]}}del(t){let a=this.rules.inline.del.exec(t);if(a)return{type:"del",raw:a[0],text:a[2],tokens:this.lexer.inlineTokens(a[2])}}autolink(t){let a=this.rules.inline.autolink.exec(t);if(a){let o,n;return a[2]==="@"?(o=Ft(a[1]),n="mailto:"+o):(o=Ft(a[1]),n=o),{type:"link",raw:a[0],text:o,href:n,tokens:[{type:"text",raw:o,text:o}]}}}url(t){let a;if(a=this.rules.inline.url.exec(t)){let o,n;if(a[2]==="@")o=Ft(a[0]),n="mailto:"+o;else{let r;do r=a[0],a[0]=this.rules.inline._backpedal.exec(a[0])?.[0]??"";while(r!==a[0]);o=Ft(a[0]),a[1]==="www."?n="http://"+a[0]:n=a[0]}return{type:"link",raw:a[0],text:o,href:n,tokens:[{type:"text",raw:o,text:o}]}}}inlineText(t){let a=this.rules.inline.text.exec(t);if(a){let o;return this.lexer.state.inRawBlock?o=a[0]:o=Ft(a[0]),{type:"text",raw:a[0],text:o}}}},A0=/^(?:[ \t]*(?:\n|$))+/,R0=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,N0=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Dr=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,O0=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,$g=/(?:[*+-]|\d{1,9}[.)])/,Wg=he(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,$g).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Pc=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,P0=/^[^\n]+/,Dc=/(?!\s*\])(?:\\.|[^\[\]\\])+/,D0=he(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Dc).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),M0=he(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,$g).getRegex(),Ds="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Mc=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,F0=he("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Mc).replace("tag",Ds).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Vg=he(Pc).replace("hr",Dr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ds).getRegex(),z0=he(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Vg).getRegex(),Fc={blockquote:z0,code:R0,def:D0,fences:N0,heading:O0,hr:Dr,html:F0,lheading:Wg,list:M0,newline:A0,paragraph:Vg,table:Pr,text:P0},zg=he("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Dr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ds).getRegex(),U0={...Fc,table:zg,paragraph:he(Pc).replace("hr",Dr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",zg).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ds).getRegex()},B0={...Fc,html:he(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Mc).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Pr,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:he(Pc).replace("hr",Dr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Wg).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Gg=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,H0=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,qg=/^( {2,}|\\)\n(?!\s*$)/,$0=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Mr="\\p{P}\\p{S}",W0=he(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Mr).getRegex(),V0=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,G0=he(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Mr).getRegex(),q0=he("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Mr).getRegex(),j0=he("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Mr).getRegex(),K0=he(/\\([punct])/,"gu").replace(/punct/g,Mr).getRegex(),Y0=he(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),X0=he(Mc).replace("(?:-->|$)","-->").getRegex(),Q0=he("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",X0).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ns=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,J0=he(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Ns).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),jg=he(/^!?\[(label)\]\[(ref)\]/).replace("label",Ns).replace("ref",Dc).getRegex(),Kg=he(/^!?\[(ref)\](?:\[\])?/).replace("ref",Dc).getRegex(),Z0=he("reflink|nolink(?!\\()","g").replace("reflink",jg).replace("nolink",Kg).getRegex(),zc={_backpedal:Pr,anyPunctuation:K0,autolink:Y0,blockSkip:V0,br:qg,code:H0,del:Pr,emStrongLDelim:G0,emStrongRDelimAst:q0,emStrongRDelimUnd:j0,escape:Gg,link:J0,nolink:Kg,punctuation:W0,reflink:jg,reflinkSearch:Z0,tag:Q0,text:$0,url:Pr},ey={...zc,link:he(/^!?\[(label)\]\((.*?)\)/).replace("label",Ns).getRegex(),reflink:he(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ns).getRegex()},Oc={...zc,escape:he(Gg).replace("])","~|])").getRegex(),url:he(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ty={...Oc,br:he(qg).replace("{2,}","*").getRegex(),text:he(Oc.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Rs={normal:Fc,gfm:U0,pedantic:B0},Or={normal:zc,gfm:Oc,breaks:ty,pedantic:ey},ea=class e{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||fo,this.options.tokenizer=this.options.tokenizer||new Oo,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let a={block:Rs.normal,inline:Or.normal};this.options.pedantic?(a.block=Rs.pedantic,a.inline=Or.pedantic):this.options.gfm&&(a.block=Rs.gfm,this.options.breaks?a.inline=Or.breaks:a.inline=Or.gfm),this.tokenizer.rules=a}static get rules(){return{block:Rs,inline:Or}}static lex(t,a){return new e(a).lex(t)}static lexInline(t,a){return new e(a).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let a=0;a<this.inlineQueue.length;a++){let o=this.inlineQueue[a];this.inlineTokens(o.src,o.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,a=[],o=!1){this.options.pedantic&&(t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""));let n,r,i;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(s=>(n=s.call({lexer:this},t,a))?(t=t.substring(n.raw.length),a.push(n),!0):!1))){if(n=this.tokenizer.space(t)){t=t.substring(n.raw.length),n.raw.length===1&&a.length>0?a[a.length-1].raw+=`
`:a.push(n);continue}if(n=this.tokenizer.code(t)){t=t.substring(n.raw.length),r=a[a.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):a.push(n);continue}if(n=this.tokenizer.fences(t)){t=t.substring(n.raw.length),a.push(n);continue}if(n=this.tokenizer.heading(t)){t=t.substring(n.raw.length),a.push(n);continue}if(n=this.tokenizer.hr(t)){t=t.substring(n.raw.length),a.push(n);continue}if(n=this.tokenizer.blockquote(t)){t=t.substring(n.raw.length),a.push(n);continue}if(n=this.tokenizer.list(t)){t=t.substring(n.raw.length),a.push(n);continue}if(n=this.tokenizer.html(t)){t=t.substring(n.raw.length),a.push(n);continue}if(n=this.tokenizer.def(t)){t=t.substring(n.raw.length),r=a[a.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+n.raw,r.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(t)){t=t.substring(n.raw.length),a.push(n);continue}if(n=this.tokenizer.lheading(t)){t=t.substring(n.raw.length),a.push(n);continue}if(i=t,this.options.extensions&&this.options.extensions.startBlock){let s=1/0,l=t.slice(1),u;this.options.extensions.startBlock.forEach(d=>{u=d.call({lexer:this},l),typeof u=="number"&&u>=0&&(s=Math.min(s,u))}),s<1/0&&s>=0&&(i=t.substring(0,s+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i))){r=a[a.length-1],o&&r?.type==="paragraph"?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):a.push(n),o=i.length!==t.length,t=t.substring(n.raw.length);continue}if(n=this.tokenizer.text(t)){t=t.substring(n.raw.length),r=a[a.length-1],r&&r.type==="text"?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):a.push(n);continue}if(t){let s="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,a}inline(t,a=[]){return this.inlineQueue.push({src:t,tokens:a}),a}inlineTokens(t,a=[]){let o,n,r,i=t,s,l,u;if(this.tokens.links){let d=Object.keys(this.tokens.links);if(d.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)d.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,s.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(l||(u=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(o=d.call({lexer:this},t,a))?(t=t.substring(o.raw.length),a.push(o),!0):!1))){if(o=this.tokenizer.escape(t)){t=t.substring(o.raw.length),a.push(o);continue}if(o=this.tokenizer.tag(t)){t=t.substring(o.raw.length),n=a[a.length-1],n&&o.type==="text"&&n.type==="text"?(n.raw+=o.raw,n.text+=o.text):a.push(o);continue}if(o=this.tokenizer.link(t)){t=t.substring(o.raw.length),a.push(o);continue}if(o=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(o.raw.length),n=a[a.length-1],n&&o.type==="text"&&n.type==="text"?(n.raw+=o.raw,n.text+=o.text):a.push(o);continue}if(o=this.tokenizer.emStrong(t,i,u)){t=t.substring(o.raw.length),a.push(o);continue}if(o=this.tokenizer.codespan(t)){t=t.substring(o.raw.length),a.push(o);continue}if(o=this.tokenizer.br(t)){t=t.substring(o.raw.length),a.push(o);continue}if(o=this.tokenizer.del(t)){t=t.substring(o.raw.length),a.push(o);continue}if(o=this.tokenizer.autolink(t)){t=t.substring(o.raw.length),a.push(o);continue}if(!this.state.inLink&&(o=this.tokenizer.url(t))){t=t.substring(o.raw.length),a.push(o);continue}if(r=t,this.options.extensions&&this.options.extensions.startInline){let d=1/0,h=t.slice(1),x;this.options.extensions.startInline.forEach(v=>{x=v.call({lexer:this},h),typeof x=="number"&&x>=0&&(d=Math.min(d,x))}),d<1/0&&d>=0&&(r=t.substring(0,d+1))}if(o=this.tokenizer.inlineText(r)){t=t.substring(o.raw.length),o.raw.slice(-1)!=="_"&&(u=o.raw.slice(-1)),l=!0,n=a[a.length-1],n&&n.type==="text"?(n.raw+=o.raw,n.text+=o.text):a.push(o);continue}if(t){let d="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return a}},Po=class{options;parser;constructor(t){this.options=t||fo}space(t){return""}code({text:t,lang:a,escaped:o}){let n=(a||"").match(/^\S*/)?.[0],r=t.replace(/\n$/,"")+`
`;return n?'<pre><code class="language-'+Ft(n)+'">'+(o?r:Ft(r,!0))+`</code></pre>
`:"<pre><code>"+(o?r:Ft(r,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:a}){return`<h${a}>${this.parser.parseInline(t)}</h${a}>
`}hr(t){return`<hr>
`}list(t){let a=t.ordered,o=t.start,n="";for(let s=0;s<t.items.length;s++){let l=t.items[s];n+=this.listitem(l)}let r=a?"ol":"ul",i=a&&o!==1?' start="'+o+'"':"";return"<"+r+i+`>
`+n+"</"+r+`>
`}listitem(t){let a="";if(t.task){let o=this.checkbox({checked:!!t.checked});t.loose?t.tokens.length>0&&t.tokens[0].type==="paragraph"?(t.tokens[0].text=o+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=o+" "+t.tokens[0].tokens[0].text)):t.tokens.unshift({type:"text",raw:o+" ",text:o+" "}):a+=o+" "}return a+=this.parser.parse(t.tokens,!!t.loose),`<li>${a}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let a="",o="";for(let r=0;r<t.header.length;r++)o+=this.tablecell(t.header[r]);a+=this.tablerow({text:o});let n="";for(let r=0;r<t.rows.length;r++){let i=t.rows[r];o="";for(let s=0;s<i.length;s++)o+=this.tablecell(i[s]);n+=this.tablerow({text:o})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+a+`</thead>
`+n+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let a=this.parser.parseInline(t.tokens),o=t.header?"th":"td";return(t.align?`<${o} align="${t.align}">`:`<${o}>`)+a+`</${o}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${t}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:a,tokens:o}){let n=this.parser.parseInline(o),r=Dg(t);if(r===null)return n;t=r;let i='<a href="'+t+'"';return a&&(i+=' title="'+a+'"'),i+=">"+n+"</a>",i}image({href:t,title:a,text:o}){let n=Dg(t);if(n===null)return o;t=n;let r=`<img src="${t}" alt="${o}"`;return a&&(r+=` title="${a}"`),r+=">",r}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):t.text}},Ln=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},ta=class e{options;renderer;textRenderer;constructor(t){this.options=t||fo,this.options.renderer=this.options.renderer||new Po,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Ln}static parse(t,a){return new e(a).parse(t)}static parseInline(t,a){return new e(a).parseInline(t)}parse(t,a=!0){let o="";for(let n=0;n<t.length;n++){let r=t[n];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){let s=r,l=this.options.extensions.renderers[s.type].call({parser:this},s);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(s.type)){o+=l||"";continue}}let i=r;switch(i.type){case"space":{o+=this.renderer.space(i);continue}case"hr":{o+=this.renderer.hr(i);continue}case"heading":{o+=this.renderer.heading(i);continue}case"code":{o+=this.renderer.code(i);continue}case"table":{o+=this.renderer.table(i);continue}case"blockquote":{o+=this.renderer.blockquote(i);continue}case"list":{o+=this.renderer.list(i);continue}case"html":{o+=this.renderer.html(i);continue}case"paragraph":{o+=this.renderer.paragraph(i);continue}case"text":{let s=i,l=this.renderer.text(s);for(;n+1<t.length&&t[n+1].type==="text";)s=t[++n],l+=`
`+this.renderer.text(s);a?o+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l}]}):o+=l;continue}default:{let s='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return o}parseInline(t,a){a=a||this.renderer;let o="";for(let n=0;n<t.length;n++){let r=t[n];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){let s=this.options.extensions.renderers[r.type].call({parser:this},r);if(s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){o+=s||"";continue}}let i=r;switch(i.type){case"escape":{o+=a.text(i);break}case"html":{o+=a.html(i);break}case"link":{o+=a.link(i);break}case"image":{o+=a.image(i);break}case"strong":{o+=a.strong(i);break}case"em":{o+=a.em(i);break}case"codespan":{o+=a.codespan(i);break}case"br":{o+=a.br(i);break}case"del":{o+=a.del(i);break}case"text":{o+=a.text(i);break}default:{let s='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return o}},No=class{options;block;constructor(t){this.options=t||fo}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?ea.lex:ea.lexInline}provideParser(){return this.block?ta.parse:ta.parseInline}},Os=class{defaults=Ps();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=ta;Renderer=Po;TextRenderer=Ln;Lexer=ea;Tokenizer=Oo;Hooks=No;constructor(...t){this.use(...t)}walkTokens(t,a){let o=[];for(let n of t)switch(o=o.concat(a.call(this,n)),n.type){case"table":{let r=n;for(let i of r.header)o=o.concat(this.walkTokens(i.tokens,a));for(let i of r.rows)for(let s of i)o=o.concat(this.walkTokens(s.tokens,a));break}case"list":{let r=n;o=o.concat(this.walkTokens(r.items,a));break}default:{let r=n;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(i=>{let s=r[i].flat(1/0);o=o.concat(this.walkTokens(s,a))}):r.tokens&&(o=o.concat(this.walkTokens(r.tokens,a)))}}return o}use(...t){let a=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(o=>{let n={...o};if(n.async=this.defaults.async||n.async||!1,o.extensions&&(o.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let i=a.renderers[r.name];i?a.renderers[r.name]=function(...s){let l=r.renderer.apply(this,s);return l===!1&&(l=i.apply(this,s)),l}:a.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=a[r.level];i?i.unshift(r.tokenizer):a[r.level]=[r.tokenizer],r.start&&(r.level==="block"?a.startBlock?a.startBlock.push(r.start):a.startBlock=[r.start]:r.level==="inline"&&(a.startInline?a.startInline.push(r.start):a.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(a.childTokens[r.name]=r.childTokens)}),n.extensions=a),o.renderer){let r=this.defaults.renderer||new Po(this.defaults);for(let i in o.renderer){if(!(i in r))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let s=i,l=o.renderer[s],u=r[s];r[s]=(...d)=>{let h=l.apply(r,d);return h===!1&&(h=u.apply(r,d)),h||""}}n.renderer=r}if(o.tokenizer){let r=this.defaults.tokenizer||new Oo(this.defaults);for(let i in o.tokenizer){if(!(i in r))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let s=i,l=o.tokenizer[s],u=r[s];r[s]=(...d)=>{let h=l.apply(r,d);return h===!1&&(h=u.apply(r,d)),h}}n.tokenizer=r}if(o.hooks){let r=this.defaults.hooks||new No;for(let i in o.hooks){if(!(i in r))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let s=i,l=o.hooks[s],u=r[s];No.passThroughHooks.has(i)?r[s]=d=>{if(this.defaults.async)return Promise.resolve(l.call(r,d)).then(x=>u.call(r,x));let h=l.call(r,d);return u.call(r,h)}:r[s]=(...d)=>{let h=l.apply(r,d);return h===!1&&(h=u.apply(r,d)),h}}n.hooks=r}if(o.walkTokens){let r=this.defaults.walkTokens,i=o.walkTokens;n.walkTokens=function(s){let l=[];return l.push(i.call(this,s)),r&&(l=l.concat(r.call(this,s))),l}}this.defaults={...this.defaults,...n}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,a){return ea.lex(t,a??this.defaults)}parser(t,a){return ta.parse(t,a??this.defaults)}parseMarkdown(t){return(o,n)=>{let r={...n},i={...this.defaults,...r},s=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&r.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof o>"u"||o===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof o!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(o)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=t);let l=i.hooks?i.hooks.provideLexer():t?ea.lex:ea.lexInline,u=i.hooks?i.hooks.provideParser():t?ta.parse:ta.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(o):o).then(d=>l(d,i)).then(d=>i.hooks?i.hooks.processAllTokens(d):d).then(d=>i.walkTokens?Promise.all(this.walkTokens(d,i.walkTokens)).then(()=>d):d).then(d=>u(d,i)).then(d=>i.hooks?i.hooks.postprocess(d):d).catch(s);try{i.hooks&&(o=i.hooks.preprocess(o));let d=l(o,i);i.hooks&&(d=i.hooks.processAllTokens(d)),i.walkTokens&&this.walkTokens(d,i.walkTokens);let h=u(d,i);return i.hooks&&(h=i.hooks.postprocess(h)),h}catch(d){return s(d)}}}onError(t,a){return o=>{if(o.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let n="<p>An error occurred:</p><pre>"+Ft(o.message+"",!0)+"</pre>";return a?Promise.resolve(n):n}if(a)return Promise.reject(o);throw o}}},Do=new Os;pe.options=pe.setOptions=function(e){return Do.setOptions(e),pe.defaults=Do.defaults,Ug(pe.defaults),pe};pe.getDefaults=Ps;pe.defaults=fo;pe.use=function(...e){return Do.use(...e),pe.defaults=Do.defaults,Ug(pe.defaults),pe};pe.walkTokens=function(e,t){return Do.walkTokens(e,t)};pe.parseInline=Do.parseInline;pe.Parser=ta;pe.parser=ta.parse;pe.Renderer=Po;pe.TextRenderer=Ln;pe.Lexer=ea;pe.lexer=ea.lex;pe.Tokenizer=Oo;pe.Hooks=No;pe.parse=pe;ay=pe.options,oy=pe.setOptions,ny=pe.use,ry=pe.walkTokens,iy=pe.parseInline,sy=pe,ly=ta.parse,uy=ea.lex});var dh=Wt(Bs=>{"use strict";var Ny=Fe(),Oy=Symbol.for("react.element"),Py=Symbol.for("react.fragment"),Dy=Object.prototype.hasOwnProperty,My=Ny.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fy={key:!0,ref:!0,__self:!0,__source:!0};function ch(e,t,a){var o,n={},r=null,i=null;a!==void 0&&(r=""+a),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(i=t.ref);for(o in t)Dy.call(t,o)&&!Fy.hasOwnProperty(o)&&(n[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)n[o]===void 0&&(n[o]=t[o]);return{$$typeof:Oy,type:e,key:r,ref:i,props:n,_owner:My.current}}Bs.Fragment=Py;Bs.jsx=ch;Bs.jsxs=ch});var _e=Wt((eI,fh)=>{"use strict";fh.exports=dh()});var _b=Y(Fe(),1),Sh=Y(jm(),1);var Ze=Y(Fe(),1);Lt();var Xm=(0,Ze.createContext)(),Qm=({children:e})=>{let[t,a]=(0,Ze.useState)(null),[o,n]=(0,Ze.useState)(!0),[r,i]=(0,Ze.useState)(null),s=(0,Ze.useRef)({isInitializing:!1,initializationPromise:null}),l=(0,Ze.useRef)({etag:null,lastModified:null,lastCheck:null,tenantHash:null}),u=(0,Ze.useRef)(null),d=()=>{try{let p=new URLSearchParams(window.location.search).get("t");if(p&&p!=="undefined"&&p.length>=8)return console.log("\u2705 Found tenant hash from URL:",p.slice(0,8)+"..."),p;let _=(document.querySelector('script[src*="widget.js"]')?.getAttribute("data-tenant")||"").replace(/\.js$/,"");return _&&_!=="undefined"&&_.length>=8?(console.log("\u2705 Found tenant hash from script:",_.slice(0,8)+"..."),_):window.PicassoConfig?.tenant&&window.PicassoConfig.tenant!=="undefined"?(console.log("\u2705 Found tenant hash from PicassoConfig:",window.PicassoConfig.tenant.slice(0,8)+"..."),window.PicassoConfig.tenant):(console.warn("\u26A0\uFE0F No valid tenant hash found, using environment default"),C.getDefaultTenantHash())}catch(c){return console.warn("Hash extraction failed:",c),C.getDefaultTenantHash()}},h=async(c,p=!1)=>{try{let w=C.getConfigUrl(c),L=`picasso-config-${c}`,_=sessionStorage.getItem(L);if(!p&&_){let D=JSON.parse(_),G=Date.now()-D.timestamp,j=120*1e3;if(G<j)return console.log("\u2705 Using cached config",{cacheAge:Math.round(G/1e3)+"s",cacheTimeout:Math.round(j/1e3)+"s"}),{config:D.config,unchanged:!0}}console.log("\u{1F504} Fetching config from Lambda Master_Function",{hash:c.slice(0,8)+"...",force:p,url:w});let S=await fetch(w,C.getRequestConfig({method:"GET",cache:"no-cache"}));if(l.current.lastCheck=new Date().toISOString(),console.log("\u{1F4E1} Response status:",S.status),S.status===404&&console.warn("\u26A0\uFE0F Tenant configuration not found - invalid or unauthorized tenant hash"),S.status===404)return console.warn("\u26A0\uFE0F Tenant config not found (404), using fallback"),{config:F(c),changed:!0};if(!S.ok)throw S.status===403?console.error("\u274C Access denied - invalid tenant hash"):S.status===500&&console.error("\u274C Lambda function error"),new Error(`HTTP ${S.status}: ${S.statusText}`);let b=await S.json(),$=S.headers.get("etag")||S.headers.get("x-version-id")||Date.now().toString();l.current.etag=S.headers.get("etag"),l.current.lastModified=S.headers.get("last-modified"),l.current.tenantHash=c;let O={config:b,version:$,timestamp:Date.now()};return sessionStorage.setItem(`picasso-config-${c}`,JSON.stringify(O)),console.log("\u2705 Config loaded successfully from Lambda Master_Function",{hash:c.slice(0,8)+"...",chatTitle:b.chat_title,hasBranding:!!b.branding,hasFeatures:!!b.features,version:$}),{config:b,changed:!0}}catch(w){throw console.error("\u274C Config fetch error:",w),w}},x=async c=>{if(s.current.isInitializing)return console.log("\u{1F512} Config initialization already in progress, waiting..."),await s.current.initializationPromise;s.current.isInitializing=!0;let p=(async()=>{n(!0),i(null);try{console.log(`\u{1F50D} Loading config for hash: ${c.slice(0,8)}... via Lambda Master_Function`);let w=await h(c,!0);w.config&&(a(w.config),l.current.tenantHash=c,console.log("\u{1F389} Config loaded successfully:",{chatTitle:w.config.chat_title,hash:c.slice(0,8)+"...",apiType:"lambda-master-function"}))}catch(w){console.error("\u274C Failed to load config:",w),i(w.message),console.log("\u{1F527} Using fallback config"),a(F(c))}finally{n(!1),s.current.isInitializing=!1,s.current.initializationPromise=null}})();return s.current.initializationPromise=p,await p},v=async()=>{let c=l.current.tenantHash;if(!c){console.warn("\u26A0\uFE0F No tenant hash available for update check");return}try{let p=await h(c);p.changed&&p.config&&(a(p.config),console.log("\u{1F3A8} Config updated! New styling applied."),window.showConfigUpdateNotification&&window.showConfigUpdateNotification("Chat appearance updated"))}catch(p){console.warn("\u26A0\uFE0F Config update check failed:",p.message)}},y=()=>{u.current&&clearInterval(u.current);let c=120*1e3,p=()=>{if(window.picassoChatHasMessages){console.log("\u23F8\uFE0F Skipping config update - chat has active messages");return}v()};u.current=setInterval(p,c),console.log(`\u{1F550} Config update checker started (every ${c/1e3}s, respects active conversations)`)},I=async()=>{console.log("\u{1F504} Manual config refresh requested");let c=d();await x(c)},F=c=>(console.log("\u{1F527} Generating fallback config"),{tenant_hash:c,chat_title:"Chat",welcome_message:"Hello! How can I help you today?",branding:{primary_color:"#3b82f6",font_family:"Inter, sans-serif",chat_title:"Chat",border_radius:"12px"},features:{uploads:!1,photo_uploads:!1,callout:!1},quick_help:{enabled:!1},action_chips:{enabled:!1},metadata:{source:"fallback",generated_at:Date.now(),apiType:"lambda-master-function"}});(0,Ze.useEffect)(()=>{(async()=>{let w=d();console.log("\u{1F680} Initializing config for tenant:",w),await x(w)})();let p=setInterval(()=>{v()},120*1e3);return()=>clearInterval(p)},[]),(0,Ze.useEffect)(()=>{let c=()=>{!document.hidden&&t&&setTimeout(v,1e3)};return document.addEventListener("visibilitychange",c),()=>document.removeEventListener("visibilitychange",c)},[t]);let f={config:t,loading:o,error:r,refreshConfig:I,lastCheck:l.current.lastCheck,metadata:{etag:l.current.etag,tenantHash:l.current.tenantHash,lastModified:l.current.lastModified,apiType:"lambda-master-function"},features:{uploads:t?.features?.uploads||!1,photoUploads:t?.features?.photo_uploads||!1}};return(0,Ze.createElement)(Xm.Provider,{value:f},e)};typeof window<"u"&&(window.refreshPicassoConfig=()=>{window.configProvider&&window.configProvider.refreshConfig()},window.testHealthCheck=async e=>{let t=e||C.getDefaultTenantHash();console.log("\u{1F9EA} Testing health check action...");try{let a=`${C.API_BASE_URL}/Master_Function?action=health_check&t=${t}`,o=await fetch(a,{method:"GET",headers:{"Content-Type":"application/json"},mode:"cors"});if(o.ok){let n=await o.json();return console.log("\u2705 Health Check Action:",n),n}else return console.error("\u274C Health Check Failed:",o.status),null}catch(a){return console.error("\u274C Health Check Error:",a),null}},window.testConfigLoad=async e=>{let t=e||C.getDefaultTenantHash();console.log("\u{1F9EA} Testing Lambda Master_Function config load...");try{let a=C.getConfigUrl(t),o=await fetch(a,C.getRequestConfig({method:"GET",cache:"no-cache"}));if(o.ok){let n=await o.json();return console.log("\u2705 Lambda Config Load:",{chatTitle:n.chat_title,hasBranding:!!n.branding,hasFeatures:!!n.features,tenantHash:n.tenant_hash,version:o.headers.get("etag")||o.headers.get("x-version-id")}),n}else return console.error("\u274C Config Load Failed:",o.status),null}catch(a){return console.error("\u274C Config Load Error:",a),null}},window.testChatAction=async(e,t="Hello")=>{let a=e||C.getDefaultTenantHash();console.log("\u{1F9EA} Testing chat action...");try{let o=C.getChatUrl(a),n=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",body:JSON.stringify({tenant_hash:a,user_input:t})});if(n.ok){let r=await n.json();return console.log("\u2705 Chat Action:",r),r}else{let r=await n.text();return console.error("\u274C Chat Action Failed:",n.status,r),null}}catch(o){return console.error("\u274C Chat Action Error:",o),null}},console.log(`
\u{1F6E0}\uFE0F  PICASSO LAMBDA MASTER_FUNCTION COMMANDS:
   testHealthCheck()             - Test action=health_check
   testConfigLoad()              - Test Lambda config load  
   testChatAction()              - Test action=chat
   refreshPicassoConfig()        - Force refresh config
   
   CONFIG SOURCE: Lambda Master_Function
   \u2705 Hash-based auth, tenant inference, 2-minute cache
  `),console.log(`
\u{1F6E0}\uFE0F  CONFIG API TEST COMMANDS:
   testConfigAPI("tenant_hash")    - Test config fetch
   testConfigAPI()                 - Test with current hash
  `));function De(){let e=(0,Ze.useContext)(Xm);if(!e)throw new Error("useConfig must be used within a ConfigProvider");return e}var X=Y(Fe(),1);Lt();var Zg=Y(rg(),1);Zt();Lt();Zt();var ht={MAX_MESSAGES_IN_MEMORY:50,MAX_MESSAGE_LENGTH:2e3,SUMMARY_TRIGGER_COUNT:10,PERSISTENCE_DELAY:2e3,CACHE_DURATION:900*1e3,SESSION_STORAGE_KEY:"picasso_current_conversation",TOKEN_STORAGE_KEY:"picasso_conversation_token",CHAT_ENDPOINT:"/Master_Function?action=chat",TOKEN_REFRESH_THRESHOLD:300*1e3,MAX_RETRY_ATTEMPTS:3,RETRY_DELAY_BASE:1e3},Lc=class{constructor(t,a){this.tenantHash=t,this.sessionId=a,this.conversationId=null,this.messageBuffer=[],this.persistenceTimer=null,this.lastSummaryAt=0,this.stateToken=null,this.turn=0,this.serverState=null,this.isInitialized=!1,this.metadata={created:new Date().toISOString(),updated:new Date().toISOString(),messageCount:0,hasBeenSummarized:!1,tenantHash:t.slice(0,8)+"..."},this.initializeConversation()}async initializeConversation(){try{if(this.loadStateToken(),this.stateToken){let a=await this.loadConversationFromServer();if(a)return this.applyServerState(a),g.logInfo("\u{1F4C2} Restored conversation from server",{conversationId:this.conversationId,messageCount:this.messageBuffer.length,turn:this.turn}),this.isInitialized=!0,this.saveToSessionStorage(),{success:!0,conversationId:this.conversationId,restored:!0,messageCount:this.messageBuffer.length,turn:this.turn}}this.conversationId=this.generateConversationId();let t=await this.initializeWithServer();if(t.success)return this.stateToken=t.stateToken,this.turn=t.turn,this.saveStateToken(),g.logInfo("\u{1F195} Initialized new conversation with server",{conversationId:this.conversationId,tenantHash:this.metadata.tenantHash,turn:this.turn}),this.isInitialized=!0,this.saveToSessionStorage(),{success:!0,conversationId:this.conversationId,restored:!1,messageCount:0,turn:this.turn};throw new Error(t.error||"Server initialization failed")}catch(t){return g.logError(t,{context:"conversation_initialization",tenantHash:this.metadata.tenantHash}),this.conversationId=`sess_${this.tenantHash.slice(0,8)}_${Date.now()}`,this.turn=0,this.isInitialized=!0,this.stateToken=null,this.saveToSessionStorage(),{success:!1,error:t.message,conversationId:this.conversationId,restored:!1,fallback:!0}}}addMessage(t){try{let a=this.validateMessage(t);return a?(this.messageBuffer.push({...a,conversationId:this.conversationId,addedAt:new Date().toISOString()}),this.metadata.messageCount++,this.metadata.updated=new Date().toISOString(),this.trimMessageBuffer(),this.schedulePersistence(),this.shouldSummarizeConversation()&&this.scheduleConversationSummary(),this.saveToSessionStorage(),g.logInfo("\u{1F4AC} Message added to conversation",{conversationId:this.conversationId,messageCount:this.messageBuffer.length,messageRole:a.role}),!0):!1}catch(a){return g.logError(a,{context:"add_message",conversationId:this.conversationId}),!1}}getMessages(){return[...this.messageBuffer]}getMetadata(){return{...this.metadata}}async clearConversation(t=!0){try{return this.conversationId&&this.stateToken&&await this.clearConversationOnServer(),this.resetLocalState(),this.clearSessionStorage(),this.clearStateToken(),g.logInfo("\u{1F9F9} Conversation cleared on server and locally",{newConversationId:this.conversationId,preservedInHistory:t}),!0}catch(a){return g.logError(a,{context:"clear_conversation",conversationId:this.conversationId}),this.resetLocalState(),this.clearSessionStorage(),this.clearStateToken(),!1}}async getConversationState(){try{return this.isInitialized?{success:!0,sessionId:this.conversationId,state:{turn:this.turn,messageCount:this.messageBuffer.length,lastMessages:this.messageBuffer.slice(-10),summary:this.metadata.lastSummary||null,metadata:{created:this.metadata.created,updated:this.metadata.updated,hasBeenSummarized:this.metadata.hasBeenSummarized,tenantHash:this.metadata.tenantHash}},stateToken:this.stateToken,cached:!0}:{success:!1,error:"Conversation not initialized",state:null}}catch(t){return g.logError(t,{context:"get_conversation_state",tenantHash:this.metadata.tenantHash}),{success:!1,error:t.message,state:null}}}generateConversationId(){return`sess_${this.tenantHash.slice(0,8)}_${Date.now()}`}getChatEndpoint(){return C.isDevelopment()?ht.CHAT_ENDPOINT:C.getChatUrl(this.tenantHash)}getConversationEndpoint(t){return C.getConversationUrl(this.tenantHash,t)}getInitSessionEndpoint(){return`${C.CHAT_ENDPOINT.split("?")[0]}?action=init_session&t=${this.tenantHash}`}async initializeWithServer(){try{if(!C.CONVERSATION_ENDPOINT_AVAILABLE)return console.log("\u26A0\uFE0F Conversation endpoint not deployed - using local storage only"),{success:!1,error:"Conversation endpoint not available - using local fallback",fallbackToLocal:!0};let t=this.getInitSessionEndpoint(),a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenant_hash:this.tenantHash,session_id:this.sessionId})});if(!a.ok){let n=await a.json().catch(()=>({}));throw new Error(`Session initialization failed: ${n.message||a.statusText}`)}let o=await a.json();return this.stateToken=o.state_token,this.turn=o.turn||0,g.logInfo("\u{1F511} Session initialized with state token",{sessionId:o.session_id,turn:this.turn}),{success:!0,stateToken:this.stateToken,turn:this.turn,sessionId:o.session_id}}catch(t){return g.logError(t,{context:"initialize_conversation_server",tenantHash:this.metadata.tenantHash}),console.log(`\u26A0\uFE0F Session initialization failed - ${t.message}, falling back to local storage`),{success:!1,error:"Conversation endpoint not available - using local fallback",fallbackToLocal:!0}}}async loadConversationFromServer(){try{if(!this.stateToken)return null;let t=this.getConversationEndpoint("get"),a=await fetch(t,{method:"GET",headers:{Authorization:`Bearer ${this.stateToken}`,"Content-Type":"application/json"}});if(!a.ok){if(a.status===401)return this.clearStateToken(),null;throw new Error(`Server response: ${a.status}`)}let o=await a.json();return o.stateToken&&(this.stateToken=o.stateToken,this.saveStateToken()),o}catch(t){return g.logError(t,{context:"load_conversation_from_server",tenantHash:this.metadata.tenantHash}),null}}applyServerState(t){if(!t||!t.state)return;let{sessionId:a,state:o,stateToken:n}=t;this.conversationId=a,this.serverState=o,this.turn=o.turn||0,n&&(this.stateToken=n,this.saveStateToken()),o.lastMessages&&Array.isArray(o.lastMessages)&&(this.messageBuffer=o.lastMessages.map((r,i)=>({id:r.id||`msg_${Date.now()}_${i}`,role:r.role,content:r.text||r.content,timestamp:r.timestamp||new Date().toISOString(),conversationId:this.conversationId,turn:r.turn||i+1,metadata:r.metadata||{},actions:r.actions||[]}))),this.metadata.messageCount=this.messageBuffer.length,this.metadata.updated=new Date().toISOString(),o.summary&&(this.metadata.lastSummary=o.summary,this.metadata.hasBeenSummarized=!0)}async saveConversationDelta(t,a,o=null,n=null){try{if(!this.conversationId){this.saveToSessionStorage();return}if(!this.stateToken&&(console.log("\u{1F504} No state token, attempting to initialize conversation session..."),!(await this.initializeWithServer()).success||!this.stateToken)){console.log("\u26A0\uFE0F Could not get state token, falling back to local storage"),this.saveToSessionStorage();return}let r=this.getConversationEndpoint("save"),i={};t&&(i.appendUser={text:t.content||t.text}),a&&(i.appendAssistant={text:a.content||a.text,pending_action:a.pending_action||null}),o&&(i.facts_update=o),n&&(i.summary_update=n);let s={sessionId:this.conversationId,turn:this.turn,delta:i},l=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${this.stateToken}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(!l.ok){if(l.status===409){let d=await l.json();throw d.stateToken&&(this.stateToken=d.stateToken,this.turn=d.currentTurn||this.turn,this.saveStateToken()),new Error("Version conflict: conversation updated by another session")}throw new Error(`Server response: ${l.status}`)}let u=await l.json();u.stateToken&&(this.stateToken=u.stateToken,this.saveStateToken()),u.turn&&(this.turn=u.turn),this.saveToSessionStorage(),g.logInfo("\u{1F4BE} Conversation delta saved to server",{conversationId:this.conversationId,turn:this.turn,serverResponse:!0})}catch(r){throw g.logError(r,{context:"save_conversation_delta",conversationId:this.conversationId,turn:this.turn}),this.saveToSessionStorage(),r}}async clearConversationOnServer(){try{if(this.stateToken){let t=this.getConversationEndpoint("clear"),a=await fetch(t,{method:"DELETE",headers:{Authorization:`Bearer ${this.stateToken}`,"Content-Type":"application/json"}});if(a.ok){let o=await a.json();g.logInfo("\u{1F5D1}\uFE0F Conversation cleared on server",{conversationId:this.conversationId,serverReport:o.report})}else g.logError("Failed to clear conversation on server",{status:a.status,conversationId:this.conversationId})}this.clearSessionStorage(),this.clearStateToken()}catch(t){throw g.logError(t,{context:"clear_conversation_on_server",conversationId:this.conversationId}),this.clearSessionStorage(),this.clearStateToken(),t}}extractFactsFromMessage(t){let a=t.content.toLowerCase(),o={};return a.includes("home care")||a.includes("home health")?o.topic="home_care_inquiry":a.includes("respite")?o.topic="respite_inquiry":a.includes("hospice")?o.topic="hospice_inquiry":a.includes("insurance")&&(o.topic="insurance_inquiry"),o}resetLocalState(){this.messageBuffer=[],this.conversationId=this.generateConversationId(),this.serverState=null,this.turn=0,this.metadata={created:new Date().toISOString(),updated:new Date().toISOString(),messageCount:0,hasBeenSummarized:!1,tenantHash:this.metadata.tenantHash}}fallbackToLocalConversation(){this.conversationId=this.generateConversationId(),this.turn=0,this.isInitialized=!0,this.stateToken=null,g.logInfo("\u{1F527} Fallback to local-only conversation",{conversationId:this.conversationId,tenantHash:this.metadata.tenantHash})}getConversationContext(){return{conversationId:this.conversationId,turn:this.turn,messageCount:this.metadata.messageCount,recentMessages:this.messageBuffer.slice(-5).map(t=>({role:t.role,content:t.content,timestamp:t.timestamp})),lastSummary:this.metadata.lastSummary,conversationStarted:this.metadata.created}}async updateFromChatResponse(t,a,o){try{a&&this.addMessageToBuffer(a),o&&this.addMessageToBuffer(o),t.metadata&&(this.metadata={...this.metadata,...t.metadata});try{await this.saveConversationDelta(a,o),g.logInfo("\u{1F4BE} Conversation delta saved to server",{conversationId:this.conversationId,turn:this.turn})}catch(n){g.logError(n,{context:"save_conversation_delta",conversationId:this.conversationId,fallback:"local_storage_only"})}this.saveToSessionStorage(),g.logInfo("\u{1F504} Conversation updated from chat response",{conversationId:this.conversationId,totalMessages:this.messageBuffer.length,turn:this.turn})}catch(n){g.logError(n,{context:"update_from_chat_response",conversationId:this.conversationId})}}addMessageToBuffer(t){let a={...t,conversationId:this.conversationId,turn:this.turn,addedAt:new Date().toISOString()};this.messageBuffer.push(a),this.turn++,this.metadata.messageCount++,this.metadata.updated=new Date().toISOString(),this.trimMessageBuffer()}loadStateToken(){try{let t=sessionStorage.getItem(ht.TOKEN_STORAGE_KEY);if(t){let a=JSON.parse(t);a.expires&&new Date(a.expires)>new Date?this.stateToken=a.token:this.clearStateToken()}}catch(t){g.logError(t,{context:"load_state_token"}),this.clearStateToken()}}saveStateToken(){try{if(!this.stateToken)return;let t={token:this.stateToken,created:new Date().toISOString(),expires:new Date(Date.now()+ht.CACHE_DURATION).toISOString()};sessionStorage.setItem(ht.TOKEN_STORAGE_KEY,JSON.stringify(t))}catch(t){g.logError(t,{context:"save_state_token"})}}clearStateToken(){try{this.stateToken=null,sessionStorage.removeItem(ht.TOKEN_STORAGE_KEY)}catch(t){g.logError(t,{context:"clear_state_token"})}}validateMessage(t){if(!t||typeof t!="object"||!["id","role","content","timestamp"].every(i=>t[i])||!["user","assistant","system"].includes(t.role))return null;let r=typeof t.content=="string"?t.content.slice(0,ht.MAX_MESSAGE_LENGTH):JSON.stringify(t.content).slice(0,ht.MAX_MESSAGE_LENGTH);return{id:t.id,role:t.role,content:r,timestamp:t.timestamp,metadata:t.metadata||{},actions:t.actions||[]}}trimMessageBuffer(){if(this.messageBuffer.length>ht.MAX_MESSAGES_IN_MEMORY){let t=this.messageBuffer.length-ht.MAX_MESSAGES_IN_MEMORY;this.messageBuffer.splice(0,t),g.logInfo("\u2702\uFE0F Trimmed message buffer",{removedCount:t,currentCount:this.messageBuffer.length})}}shouldSummarizeConversation(){return this.messageBuffer.length-this.lastSummaryAt>=ht.SUMMARY_TRIGGER_COUNT}schedulePersistence(){this.persistenceTimer&&clearTimeout(this.persistenceTimer),this.persistenceTimer=setTimeout(()=>{this.persistConversation()},ht.PERSISTENCE_DELAY)}async scheduleConversationSummary(){g.logInfo("\u{1F4DD} Conversation summary is handled by server",{conversationId:this.conversationId,messageCount:this.messageBuffer.length})}async generateConversationSummary(t){try{let a=await this.getConversationState();return a&&a.state&&a.state.summary?a.state.summary:null}catch(a){return g.logError(a,{context:"generate_conversation_summary_from_server",conversationId:this.conversationId}),null}}async persistConversation(t=!1){try{if(this.messageBuffer.length===0)return;this.saveToSessionStorage(),g.logInfo("\u{1F4BE} Conversation state cached locally",{conversationId:this.conversationId,messageCount:this.messageBuffer.length,serverPersisted:!0})}catch(a){g.logError(a,{context:"persist_conversation",conversationId:this.conversationId})}}async saveToDynamoDB(t){g.logInfo("\u26A0\uFE0F saveToDynamoDB is deprecated - using server conversation API instead"),this.saveToSessionStorage()}saveToSessionStorage(){try{let t={conversationId:this.conversationId,messages:this.messageBuffer,metadata:this.metadata,turn:this.turn,tenantHash:this.tenantHash,sessionId:this.sessionId,savedAt:Date.now()};sessionStorage.setItem(ht.SESSION_STORAGE_KEY,JSON.stringify(t))}catch(t){g.logError(t,{context:"save_session_storage"})}}loadFromSessionStorage(){try{let t=sessionStorage.getItem(ht.SESSION_STORAGE_KEY);if(!t)return null;let a=JSON.parse(t);return Date.now()-(a.savedAt||0)<ht.CACHE_DURATION&&a.tenantHash===this.tenantHash&&a.sessionId===this.sessionId?a:(this.clearSessionStorage(),null)}catch(t){return g.logError(t,{context:"load_session_storage"}),this.clearSessionStorage(),null}}saveToLocalStorage(t){g.logInfo("\u26A0\uFE0F saveToLocalStorage is deprecated - conversations persisted on server")}async getMostRecentConversation(){try{let t=this.loadFromSessionStorage();return t||null}catch(t){return g.logError(t,{context:"get_recent_conversation"}),null}}clearSessionStorage(){try{sessionStorage.removeItem(ht.SESSION_STORAGE_KEY)}catch(t){g.logError(t,{context:"clear_session_storage"})}}};function kg(e,t){if(!e||!t)throw new Error("ConversationManager requires tenantHash and sessionId");return new Lc(e,t)}Zt();As();kc();var co={iOS:()=>/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Safari:()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),iOSSafari:()=>co.iOS()&&co.Safari(),Android:()=>/Android/.test(navigator.userAgent),any:()=>co.iOS()||co.Android()};var Cc=class{constructor(){this.initialViewportHeight=window.innerHeight,this.keyboardVisible=!1,this.setupEventListeners()}setupEventListeners(){co.iOSSafari()&&(window.addEventListener("resize",this.handleViewportChange.bind(this)),window.addEventListener("orientationchange",this.handleOrientationChange.bind(this)),document.addEventListener("focusin",this.handleInputFocus.bind(this)),document.addEventListener("focusout",this.handleInputBlur.bind(this)),this.preventDoubleTabZoom(),this.handleSafariChromeHiding())}handleViewportChange(){let t=window.innerHeight,a=this.initialViewportHeight-t;this.keyboardVisible=a>150,this.applyViewportFixes(),window.parent&&window.parent!==window&&window.parent.postMessage({type:"PICASSO_EVENT",event:"VIEWPORT_CHANGE",payload:{keyboardVisible:this.keyboardVisible,viewportHeight:t,heightDifference:a}},"*")}handleOrientationChange(){setTimeout(()=>{this.initialViewportHeight=window.innerHeight,this.handleViewportChange()},500)}handleInputFocus(t){co.iOSSafari()&&setTimeout(()=>{t.target&&typeof t.target.scrollIntoView=="function"&&t.target.scrollIntoView({behavior:"smooth",block:"center"}),document.body.classList.add("ios-keyboard-visible")},100)}handleInputBlur(){co.iOSSafari()&&setTimeout(()=>{document.body.classList.remove("ios-keyboard-visible")},300)}preventDoubleTabZoom(){let t=0;document.addEventListener("touchend",a=>{let o=new Date().getTime();o-t<=300&&a.preventDefault(),t=o},!1)}handleSafariChromeHiding(){co.iOSSafari()&&(document.documentElement.style.setProperty("--ios-safe-area-top","env(safe-area-inset-top)"),document.documentElement.style.setProperty("--ios-safe-area-bottom","env(safe-area-inset-bottom)"))}applyViewportFixes(){let t=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${t}px`),this.keyboardVisible?document.body.classList.add("keyboard-visible"):document.body.classList.remove("keyboard-visible")}},Ec=class{constructor(){this.registration=null,this.updateAvailable=!1}async register(){if(!("serviceWorker"in navigator))return console.log("Service Worker not supported"),!1;let t="development";if(t==="staging")return console.log("\u{1F6AB} Service Worker disabled for staging environment"),!1;try{let a=t==="development"?"/sw.js":`${import.meta.env.BASE_URL}sw.js`;return this.registration=await navigator.serviceWorker.register(a,{scope:t==="development"?"/":import.meta.env.BASE_URL}),console.log("\u{1F527} Service Worker registered successfully"),this.registration.addEventListener("updatefound",this.handleUpdateFound.bind(this)),await this.registration.update(),!0}catch(a){return console.error("\u274C Service Worker registration failed:",a),g.logError(a,{context:"service_worker_registration"}),!1}}handleUpdateFound(){let t=this.registration.installing;t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller&&(this.updateAvailable=!0,this.notifyUpdateAvailable())})}notifyUpdateAvailable(){window.dispatchEvent(new CustomEvent("sw-update-available")),console.log("\u{1F504} App update available")}async skipWaiting(){this.registration&&this.registration.waiting&&(this.registration.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload())}},Tc=class{constructor(t){this.conversationManager=t,this.isOnline=navigator.onLine,this.setupEventListeners()}setupEventListeners(){window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this))}handleOnline(){this.isOnline=!0,console.log("\u{1F310} Connection restored - syncing conversations"),this.syncOfflineConversations()}handleOffline(){this.isOnline=!1,console.log("\u{1F4F4} Connection lost - enabling offline mode"),this.enableOfflineMode()}async syncOfflineConversations(){if(this.conversationManager)try{let a=this.conversationManager.getMessages().filter(o=>o.metadata&&o.metadata.offline);for(let o of a)try{await this.sendOfflineMessage(o),o.metadata.offline=!1,o.metadata.synced=!0}catch(n){console.error("\u274C Failed to sync message:",o.id,n)}a.length>0&&console.log(`\u2705 Synced ${a.length} offline messages`)}catch(t){g.logError(t,{context:"offline_conversation_sync"})}}async sendOfflineMessage(t){let a=await fetch("/Master_Function?action=chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t.content,offline_sync:!0,original_timestamp:t.timestamp})});if(!a.ok)throw new Error(`Sync failed: ${a.status}`);return a.json()}enableOfflineMode(){document.body.classList.add("offline-mode"),this.showOfflineBanner()}showOfflineBanner(){if(document.querySelector(".offline-banner"))return;let a=document.createElement("div");a.className="offline-banner",a.innerHTML=`
      <span>\u{1F4F4} You're offline. Messages will be sent when connection is restored.</span>
      <button onclick="this.parentElement.remove()">\xD7</button>
    `,document.body.prepend(a);let o=()=>{navigator.onLine&&(a.remove(),document.body.classList.remove("offline-mode"),window.removeEventListener("online",o))};window.addEventListener("online",o)}},Ac=class{constructor(){this.deferredPrompt=null,this.setupEventListeners()}setupEventListeners(){window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),this.deferredPrompt=t,this.showInstallPrompt()}),window.addEventListener("appinstalled",()=>{console.log("\u{1F4F1} PWA installed successfully"),this.hideInstallPrompt()})}showInstallPrompt(){let t=document.createElement("div");t.className="pwa-install-prompt",t.innerHTML=`
      <div class="pwa-install-content">
        <span>\u{1F4F1} Install Picasso Chat for a better experience</span>
        <button class="pwa-install-btn">Install</button>
        <button class="pwa-dismiss-btn">\xD7</button>
      </div>
    `,t.querySelector(".pwa-install-btn").addEventListener("click",()=>{this.promptInstall()}),t.querySelector(".pwa-dismiss-btn").addEventListener("click",()=>{this.hideInstallPrompt()}),document.body.appendChild(t)}async promptInstall(){if(!this.deferredPrompt)return;this.deferredPrompt.prompt();let{outcome:t}=await this.deferredPrompt.userChoice;console.log(t==="accepted"?"\u2705 User accepted PWA install":"\u274C User dismissed PWA install"),this.deferredPrompt=null,this.hideInstallPrompt()}hideInstallPrompt(){let t=document.querySelector(".pwa-install-prompt");t&&t.remove()}},Rc=class{constructor(t={}){this.config={streamingEndpoint:t.streamingEndpoint||"",tenantHash:t.tenantHash||"",enableKeepAlive:!0,enableBackgroundHandling:!0,...t},this.connectionManager=null,this.isActive=!1,this.backgroundReconnectPending=!1,this.isSafari=Mt(),this.isMobileSafari=et(),this.safariVersion=this._getSafariVersion(),this.performanceMetrics={connectionAttempts:0,successfulConnections:0,backgroundReconnections:0,keepAlivesSent:0,averageConnectionTime:0},this._setupNetworkChangeHandling()}_getSafariVersion(){if(!this.isSafari)return null;let t=navigator.userAgent.match(/Version\/(\d+)\.(\d+)/);return t?parseFloat(`${t[1]}.${t[2]}`):null}_setupNetworkChangeHandling(){typeof navigator<"u"&&"connection"in navigator&&navigator.connection?.addEventListener("change",()=>{this.connectionManager&&this.connectionManager.isConnected()&&(g.logInfo("Network change detected, checking connection health",{context:"safari_sse_network_change",effectiveType:navigator.connection.effectiveType,downlink:navigator.connection.downlink}),this.isSafari&&this._handleNetworkChange())})}_handleNetworkChange(){setTimeout(()=>{this.connectionManager&&this.connectionManager.getState()===se.CONNECTED&&(this.connectionManager.disconnect(),setTimeout(()=>{this.connect()},2e3))},1e3)}async connect(){if(!this.config.streamingEndpoint)throw new Error("Streaming endpoint not configured for Safari SSE");try{this.performanceMetrics.connectionAttempts++;let t=In();t.url=this.config.streamingEndpoint,t.tenantHash=this.config.tenantHash,this.isSafari&&(t.enableKeepAlive=!0,t.enableBackgroundHandling=!0,this.isMobileSafari&&(t.keepAliveInterval=3e4,t.backgroundTabTimeout=6e4,t.reconnectionDelay=2e3)),this.connectionManager=new bn(t),this._setupConnectionEventHandlers();let a=Date.now();await this.connectionManager.connect(),this.isActive=!0,this.performanceMetrics.successfulConnections++,this.performanceMetrics.averageConnectionTime=(this.performanceMetrics.averageConnectionTime+(Date.now()-a))/this.performanceMetrics.successfulConnections,g.logInfo("Safari SSE connection established",{context:"safari_sse_connected",isMobileSafari:this.isMobileSafari,safariVersion:this.safariVersion,connectionTime:Date.now()-a})}catch(t){throw g.logError(t,{context:"safari_sse_connection_error",isMobileSafari:this.isMobileSafari,endpoint:this.config.streamingEndpoint}),t}}_setupConnectionEventHandlers(){this.connectionManager&&(this.connectionManager.addEventListener("background_tab",()=>{g.logInfo("Safari SSE handling background tab",{context:"safari_sse_background"})}),this.connectionManager.addEventListener("foreground_tab",()=>{g.logInfo("Safari SSE handling foreground tab",{context:"safari_sse_foreground"}),this.backgroundReconnectPending&&(this.backgroundReconnectPending=!1,this.performanceMetrics.backgroundReconnections++,setTimeout(()=>{this.connectionManager.getState()!==se.CONNECTED&&this.connect()},500))}),this.connectionManager.addEventListener("keep_alive",()=>{this.performanceMetrics.keepAlivesSent++}),this.connectionManager.addEventListener("connection_error",t=>{this.isSafari&&t.reason.includes("network")&&(this.backgroundReconnectPending=!0)}))}disconnect(){this.connectionManager&&(this.connectionManager.disconnect(),this.connectionManager=null),this.isActive=!1,this.backgroundReconnectPending=!1,g.logInfo("Safari SSE disconnected",{context:"safari_sse_disconnected",metrics:this.performanceMetrics})}getConnectionState(){return this.connectionManager?.getState()||se.DISCONNECTED}isConnectionHealthy(){return this.connectionManager?.isConnected()||!1}getPerformanceMetrics(){return{...this.performanceMetrics,connectionState:this.getConnectionState(),isHealthy:this.isConnectionHealthy(),safariVersion:this.safariVersion,isMobileSafari:this.isMobileSafari}}},Nc=class{constructor(){this.activeConnections=new Map,this.backgroundStartTime=null,this.isInBackground=!1,this._setupVisibilityHandling()}_setupVisibilityHandling(){typeof document>"u"||document.addEventListener("visibilitychange",()=>{document.hidden&&!this.isInBackground?this._handleEnterBackground():!document.hidden&&this.isInBackground&&this._handleExitBackground()})}_handleEnterBackground(){this.isInBackground=!0,this.backgroundStartTime=Date.now(),g.logInfo("Entering background mode",{context:"background_connection_manager",activeConnections:this.activeConnections.size,isMobileSafari:et()});for(let[t,a]of this.activeConnections)a.onBackground&&a.onBackground()}_handleExitBackground(){let t=this.backgroundStartTime?Date.now()-this.backgroundStartTime:0;this.isInBackground=!1,this.backgroundStartTime=null,g.logInfo("Exiting background mode",{context:"background_connection_manager",backgroundDuration:t,activeConnections:this.activeConnections.size,isMobileSafari:et()});for(let[a,o]of this.activeConnections)o.onForeground&&o.onForeground(t)}registerConnection(t,a){this.activeConnections.set(t,a),g.logInfo("Connection registered for background management",{context:"background_connection_register",connectionId:t,totalConnections:this.activeConnections.size})}unregisterConnection(t){this.activeConnections.delete(t),g.logInfo("Connection unregistered from background management",{context:"background_connection_unregister",connectionId:t,totalConnections:this.activeConnections.size})}getStatus(){return{isInBackground:this.isInBackground,backgroundDuration:this.backgroundStartTime?Date.now()-this.backgroundStartTime:0,activeConnections:this.activeConnections.size}}};async function Cg(e=null){try{console.log("\u{1F680} Initializing mobile compatibility features with Safari SSE support...");let t=new Cc,a=new Ec;await a.register();let o=null;e&&(o=new Tc(e));let n=new Ac,r=null;Mt()&&(r=new Rc,console.log("\u2705 Safari SSE Manager initialized"));let i=new Nc;return console.log("\u2705 Mobile compatibility initialized successfully"),{iosHandler:t,swManager:a,offlineSync:o,pwaInstaller:n,safariSSEManager:r,backgroundConnectionManager:i,isSafari:Mt(),isMobileSafari:et(),safariSSEBehaviors:Ts}}catch(t){return console.error("\u274C Failed to initialize mobile compatibility:",t),g.logError(t,{context:"mobile_compatibility_init"}),null}}var Ms=null;async function Qg(){if(Ms)return Ms;try{let[{useStreaming:e},{quickStreamingHealthCheck:t}]=await Promise.all([Promise.resolve().then(()=>(Tg(),Eg)),Promise.resolve().then(()=>(Og(),Ng))]);return Ms={useStreaming:e,quickStreamingHealthCheck:t},g.logInfo("\u2705 Streaming utilities loaded on demand"),Ms}catch(e){return g.logError(e,{context:"streaming_utils_load_error"}),null}}var Fs=null;async function Jg(){if(Fs)return Fs;Jt.startTimer("markdown_load");let[{marked:e},{default:t}]=await Promise.all([Promise.resolve().then(()=>(Xg(),Yg)),Promise.resolve().then(()=>(wc(),Sg))]);return e.setOptions({breaks:!0,gfm:!0,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1,mangle:!1}),e.use({extensions:[{name:"autolink",level:"inline",start(a){let o=a.match(/https?:\/\/|www\.|[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/);return o?o.index:-1},tokenizer(a){let o=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,n=/^(www\.[^\s<]+[^<.,:;"')\]\s])/,r=/^([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})/,i;return(i=o.exec(a))?{type:"autolink",raw:i[0],href:i[1],text:i[1]}:(i=n.exec(a))?{type:"autolink",raw:i[0],href:"http://"+i[1],text:i[1]}:(i=r.exec(a))?{type:"autolink",raw:i[0],href:"mailto:"+i[1],text:i[1]}:!1},renderer(a){let n=(()=>{if(!a.href)return!1;if(a.href.startsWith("mailto:"))return!0;try{let r=new URL(a.href,window.location.href),i=new URL(window.location.href);return r.origin!==i.origin}catch{return!0}})()?' target="_blank" rel="noopener noreferrer"':"";return`<a href="${a.href}"${n}>${a.text}</a>`}}]}),Fs={marked:e,DOMPurify:t},Jt.endTimer("markdown_load"),g.logInfo("\u2705 Markdown parser loaded on demand"),Fs}async function lt(e){if(!e||typeof e!="string")return"";console.log("\u{1F50D} sanitizeMessage - Input content:",e);try{let{marked:t,DOMPurify:a}=await Jg(),o=t.parse(e);console.log("\u{1F50D} After marked.parse:",o);let r=a.sanitize(o,{ALLOWED_TAGS:["p","br","strong","b","em","i","u","strike","del","s","ul","ol","li","blockquote","code","pre","hr","h1","h2","h3","h4","h5","h6","a","img","table","thead","tbody","tr","th","td"],ALLOWED_ATTR:["href","title","target","rel","alt","src","width","height","style","class"],ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.-]+(?:[^a-z+.-:]|$))/i,FORBID_ATTR:["onerror","onload","onclick","onmouseover"],FORBID_TAGS:["script","object","embed","form","input","button"],KEEP_CONTENT:!0,RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,RETURN_TRUSTED_TYPE:!1}).replace(/<a\s+href="([^"]+)"/gi,(i,s)=>(()=>{if(!s)return!1;if(s.startsWith("mailto:"))return!0;try{let u=new URL(s,window.location.href),d=new URL(window.location.href);return u.origin!==d.origin}catch{return!0}})()?`<a target="_blank" rel="noopener noreferrer" href="${s}"`:`<a href="${s}"`);return console.log("\u{1F50D} After DOMPurify.sanitize:",r),r}catch(t){let{DOMPurify:a}=await Jg();return g.logError(t,{context:"sanitizeMessage"}),a.sanitize(e,{ALLOWED_TAGS:[],KEEP_CONTENT:!0})}}var eh=(0,X.createContext)(),th=()=>eh,zs=({children:e})=>{let{config:t}=De(),a={MESSAGES:"picasso_messages",SESSION_ID:"picasso_session_id",LAST_ACTIVITY:"picasso_last_activity"},o=1800*1e3,r=(0,X.useRef)((()=>{let P=sessionStorage.getItem(a.SESSION_ID),U=sessionStorage.getItem(a.LAST_ACTIVITY);if(P&&U&&Date.now()-parseInt(U)<o)return P;let E=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return sessionStorage.setItem(a.SESSION_ID,E),sessionStorage.setItem(a.LAST_ACTIVITY,Date.now().toString()),E})()),i=(0,X.useRef)(null),[s,l]=(0,X.useState)({conversationId:null,messageCount:0,hasBeenSummarized:!1,canLoadHistory:!1}),u=(0,X.useRef)(null),[d,h]=(0,X.useState)({isInitialized:!1,isPWAInstallable:!1,isOfflineCapable:!1,isMobileSafari:!1}),x=()=>{try{let P=sessionStorage.getItem(a.MESSAGES),U=sessionStorage.getItem(a.LAST_ACTIVITY);if(P&&U&&Date.now()-parseInt(U)<o){let R=JSON.parse(P);return g.logInfo("\u{1F4C2} Restored conversation from previous page",{messageCount:R.length,sessionId:r.current}),R}}catch(P){g.logError(P,{context:"loadPersistedMessages"})}return[]},[v,y]=(0,X.useState)(()=>x()),[I,F]=(0,X.useState)(!1),[f,c]=(0,X.useState)(!1),[p,w]=(0,X.useState)(()=>navigator.onLine),[L,_]=(0,X.useState)(()=>new Map),[S,b]=(0,X.useState)(!1),[$,O]=(0,X.useState)(!1),[D,G]=(0,X.useState)(null),j=(0,X.useRef)(null),ce=(0,X.useRef)(new Map),re=(0,X.useRef)(new Map),xt=(0,X.useRef)(Ha((P,U)=>{if(P.length>0&&U)try{sessionStorage.setItem(a.MESSAGES,JSON.stringify(P)),sessionStorage.setItem(a.LAST_ACTIVITY,Date.now().toString()),g.logInfo("\u{1F4BE} Persisted conversation state",{messageCount:P.length,sessionId:r.current})}catch(E){g.logError(E,{context:"persistMessages"})}},1e3)).current;(0,X.useEffect)(()=>{xt(v,f)},[v,f,xt]);function Ha(P,U){let E;return function(...J){let B=()=>{clearTimeout(E),P(...J)};clearTimeout(E),E=setTimeout(B,U)}}let[Ye,Ht]=(0,X.useState)(!1),xe=(0,X.useRef)({isInitializing:!1,initializationPromise:null});(0,X.useEffect)(()=>{if(!t?.tenant_hash||Ye)return;(async()=>{if(xe.current.isInitializing)return console.log("\u{1F512} Chat initialization already in progress, waiting..."),await xe.current.initializationPromise;xe.current.isInitializing=!0;let U=(async()=>{try{let E=t.tenant_hash,R=r.current;i.current=kg(E,R);let J=i.current.getMetadata();l({conversationId:i.current.conversationId,messageCount:J.messageCount,hasBeenSummarized:J.hasBeenSummarized,canLoadHistory:!0}),g.logInfo("\u2705 Conversation manager initialized",{conversationId:i.current.conversationId,tenantHash:E.slice(0,8)+"..."});let B=await Cg(i.current);B&&(u.current=B,h({isInitialized:!0,isPWAInstallable:B.pwaInstaller?.deferredPrompt!==null,isOfflineCapable:"serviceWorker"in navigator,isMobileSafari:/iPad|iPhone|iPod/.test(navigator.userAgent)&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}),g.logInfo("\u2705 Mobile compatibility features initialized",{serviceWorker:"serviceWorker"in navigator,pwaInstallable:B.pwaInstaller?.deferredPrompt!==null,isMobileSafari:/iPad|iPhone|iPod/.test(navigator.userAgent)})),Ht(!0),g.logInfo("\u{1F389} Chat initialization completed successfully",{tenantHash:E.slice(0,8)+"...",sessionId:R})}catch(E){g.logError(E,{context:"conversation_manager_init",tenantHash:t?.tenant_hash?.slice(0,8)+"..."})}finally{xe.current.isInitializing=!1,xe.current.initializationPromise=null}})();return xe.current.initializationPromise=U,await U})()},[t,Ye]),(0,X.useEffect)(()=>{let P=()=>{g.logInfo("\u{1F310} Network connection restored"),w(!0),L.forEach((E,R)=>{E.errorClassification?.type===K.NETWORK_ERROR&&(g.logInfo(`\u{1F504} Auto-retrying message ${R} after network restoration`),ma(R))})},U=()=>{g.logWarning("\u{1F4E1} Network connection lost"),w(!1)};return window.addEventListener("online",P),window.addEventListener("offline",U),()=>{window.removeEventListener("online",P),window.removeEventListener("offline",U)}},[L]),(0,X.useEffect)(()=>()=>{ce.current.forEach(P=>{P.abort()}),re.current.forEach(P=>{clearTimeout(P)}),ce.current.clear(),re.current.clear(),ee.current.clear(),requestCacheRef.current.clear(),window._configMemoryCache&&delete window._configMemoryCache},[]);let A=(0,X.useMemo)(()=>P=>{if(!P)return[];let U=P.action_chips||{};if(!U.enabled||!U.show_on_welcome)return[];let E=U.default_chips||[],R=U.max_display||3;return E.slice(0,R)},[]);(0,X.useEffect)(()=>{if(t&&!f&&Ye)if(v.length>0)g.logInfo("\u{1F504} Continuing previous conversation",{messageCount:v.length,sessionId:r.current}),c(!0);else{g.logInfo("\u{1F3AC} Setting initial welcome message");let P=A(t);lt(t.welcome_message||"Hello! How can I help you today?").then(U=>{y([{id:"welcome",role:"assistant",content:U,actions:P}]),c(!0)})}},[t,A,f,Ye]);let M=()=>t?.tenant_hash||t?.metadata?.tenantHash||window.PicassoConfig?.tenant||C.getDefaultTenantHash(),q=(0,X.useCallback)(async()=>{if(t)try{let P=M(),U=C.getStreamingUrl(P);if(!C.isStreamingEnabled(t)){g.logInfo("\u{1F512} Streaming disabled by feature flag",{tenantHash:P.slice(0,8)+"...",environment:C.ENVIRONMENT,tenantFeatures:t?.features||{},globalOverrides:{disabled:typeof window<"u"?window.PICASSO_DISABLE_STREAMING:void 0,forced:typeof window<"u"?window.PICASSO_FORCE_STREAMING:void 0}});return}let R=await Qg();if(!R){g.logWarning("\u26A0\uFE0F Streaming utilities failed to load");return}await R.quickStreamingHealthCheck(P)?(b(!0),O(!0),g.logInfo("\u2705 Streaming capability detected and enabled",{endpoint:U,tenantHash:P.slice(0,8)+"...",environment:C.ENVIRONMENT})):g.logWarning("\u26A0\uFE0F Streaming endpoint health check failed - using HTTP fallback",{endpoint:U,tenantHash:P.slice(0,8)+"..."})}catch(P){g.logError(P,{context:"streaming_availability_check",tenantHash:M()?.slice(0,8)+"..."})}},[t]),ue=(0,X.useRef)({onMessage:P=>{D&&y(U=>U.map(E=>E.id===D.id?{...E,content:(E.content||"")+P}:E))},onComplete:()=>{F(!1),G(null),g.logInfo("\u{1F3C1} Streaming response completed")},onError:P=>{g.logWarning("\u26A0\uFE0F Streaming failed - falling back to HTTP",{error:P.message,messageId:D?.id}),F(!1),G(null),D?.fallbackToHttp&&D.fallbackToHttp()}});(0,X.useEffect)(()=>{ue.current.onMessage=P=>{D&&y(U=>U.map(E=>E.id===D.id?{...E,content:(E.content||"")+P}:E))},ue.current.onError=P=>{g.logWarning("\u26A0\uFE0F Streaming failed - falling back to HTTP",{error:P.message,messageId:D?.id}),F(!1),G(null),D?.fallbackToHttp&&D.fallbackToHttp()}},[D]),(0,X.useEffect)(()=>{t&&!f&&Ye&&q()},[t,f,Ye,q]);let ee=(0,X.useRef)(new Map),$t=3e5,pa=async(P,U)=>{let E=performance.now();try{let R=M(),J=`${R}_${U}`,B=ee.current.get(J);if(B&&Date.now()-B.timestamp<$t){let fe=performance.now()-E;return g.logInfo("\u26A1 JWT token retrieved from cache",{cacheTime:fe.toFixed(2)+"ms",sessionId:U}),{jwt:B.jwt,streamingUrl:B.streamingUrl}}let de=C.getChatUrl(R);g.logInfo("\u{1F510} Generating streaming JWT token",{tenantHash:R.slice(0,8)+"...",sessionId:U,endpoint:de});let ve=new AbortController,Ne=setTimeout(()=>ve.abort(),5e3),ke=await fetch(`${de}&action=generate_stream_token`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({session_id:U,user_input:P,tenant_hash:R}),signal:ve.signal});if(clearTimeout(Ne),!ke.ok)throw new Error(`Token generation failed: ${ke.status} ${ke.statusText}`);let W=await ke.json();if(!W.jwt||!W.streaming_url)throw new Error("Invalid token response: missing jwt or streaming_url");if(ee.current.set(J,{jwt:W.jwt,streamingUrl:W.streaming_url,timestamp:Date.now()}),ee.current.size>10){let fe=ee.current.keys().next().value;ee.current.delete(fe)}let Z=performance.now()-E;return g.logInfo("\u2705 Streaming JWT token generated successfully",{generationTime:Z.toFixed(2)+"ms",hasJWT:!!W.jwt,hasStreamingURL:!!W.streaming_url,sessionId:U,targetMet:Z<200?"\u2705":"\u26A0\uFE0F (PRD target: <200ms)"}),{jwt:W.jwt,streamingUrl:W.streaming_url}}catch(R){let J=performance.now()-E;throw g.logError(R,{context:"jwt_token_generation",generationTime:J.toFixed(2)+"ms",sessionId:U,userInput:P.substring(0,50)+"..."}),R}},$a=async(P,U,E=3)=>{let R=U.body?JSON.parse(U.body).messageId:null;return Jt.measure("api_request",async()=>{for(let B=1;B<=E;B++)try{let de=new AbortController,ve=setTimeout(()=>de.abort(),25e3);R&&ce.current.set(R,de),g.logInfo(`\u{1F680} API Request Attempt ${B}/${E}`,{messageId:R,url:P});let Ne=await fetch(P,{...U,signal:de.signal});if(clearTimeout(ve),R&&ce.current.delete(R),!Ne.ok){let Z=Cs(null,Ne);if(Ic(Z,B)){let fe=bc(Z,B);g.logWarning(`${Z.type} error, retrying in ${fe}ms (attempt ${B})`,{messageId:R,status:Ne.status,errorClassification:Z}),R&&_(ha=>new Map(ha.set(R,{errorClassification:Z,attempt:B,retries:E,url:P,options:U}))),await new Promise(ha=>{let ge=setTimeout(ha,fe);R&&re.current.set(R,ge)}),R&&re.current.delete(R);continue}else{let fe=new Error(`HTTP ${Ne.status}: ${Ne.statusText}`);throw g.logError(fe,{messageId:R,attempt:B,response:{status:Ne.status,statusText:Ne.statusText},errorClassification:Z}),fe}}let ke=await Ne.text();g.logInfo("\u{1F4E5} RAW CHAT RESPONSE received",{messageId:R,responseLength:ke.length});let W;try{W=JSON.parse(ke),g.logInfo("\u{1F4E5} PARSED CHAT RESPONSE",{messageId:R,hasContent:!!W.content})}catch(Z){let fe=new Error("Invalid JSON response from server");throw g.logError(fe,{messageId:R,attempt:B,rawText:ke.substring(0,200)+"...",originalError:Z}),fe}return R&&_(Z=>{let fe=new Map(Z);return fe.delete(R),fe}),W}catch(de){let ve=Cs(de,null),Ne=de.name==="AbortError"||de.message?.includes("aborted");if(Ne&&g.logWarning("Request timeout detected",{messageId:R,attempt:B,url:P}),g.logError(de,{messageId:R,attempt:B,url:P,errorClassification:ve,tenantHash:M(),isTimeout:Ne}),Ic(ve,B)){let ke=bc(ve,B);g.logWarning(`${ve.type} error, retrying in ${ke}ms (attempt ${B})`,{messageId:R,errorClassification:ve,delay:ke}),R&&_(W=>new Map(W.set(R,{errorClassification:ve,attempt:B,retries:E,url:P,options:U}))),await new Promise(W=>{let Z=setTimeout(W,ke);R&&re.current.set(R,Z)}),R&&re.current.delete(R);continue}else{let ke=Lg(ve,B);Ne&&(ke="Request timed out. Please try again.");let W=new Error(ke);throw g.logError(W,{messageId:R,attempt:B,originalError:de,errorClassification:ve,finalAttempt:!0,isTimeout:Ne}),W}}let J=new Error("Maximum retry attempts exceeded");throw g.logError(J,{messageId:R,maxRetries:E,finalAttempt:!0}),J})},ma=(0,X.useCallback)(async P=>{let U=L.get(P);if(!U){g.logWarning("No retry data found for message",{messageId:P});return}g.logInfo(`\u{1F504} Manual retry for message ${P}`);try{let E=await $a(U.url,U.options,U.retries),R="I apologize, but I'm having trouble processing that request right now.",J=[];try{if(E.content)R=await lt(E.content),E.actions&&Array.isArray(E.actions)&&(J=E.actions);else if(E.messages&&E.messages[0]&&E.messages[0].content){let B=JSON.parse(E.messages[0].content);R=await lt(B.message||B.content||R),B.actions&&Array.isArray(B.actions)&&(J=B.actions)}else if(E.body){let B=JSON.parse(E.body);R=await lt(B.content||B.message||R),B.actions&&Array.isArray(B.actions)&&(J=B.actions)}else E.response&&(R=await lt(E.response));if(E.fallback_message&&(R=await lt(E.fallback_message)),E.file_acknowledgment){let B=await lt(E.file_acknowledgment);R+=`

`+B}}catch(B){g.logError(B,{messageId:P,context:"retry_response_parsing",data:typeof E=="string"?E.substring(0,200)+"...":JSON.stringify(E).substring(0,200)+"..."}),typeof E=="string"&&(R=await lt(E))}y(B=>B.map(de=>de.id===P?{...de,role:"assistant",content:R,actions:J,timestamp:new Date().toISOString(),metadata:{session_id:E.session_id,api_version:E.api_version||"actions-complete",retry_success:!0}}:de)),g.logInfo("\u2705 Retry successful for message",{messageId:P})}catch(E){g.logError(E,{messageId:P,context:"retry_failed",retryData:{attempt:U.attempt,errorClassification:U.errorClassification}}),y(R=>R.map(J=>J.id===P?{...J,content:E.message,metadata:{...J.metadata,retry_failed:!0,final_error:E.message}}:J))}},[L]),ho=(0,X.useCallback)(async P=>{if(P.role==="user"&&!Ye){g.logWarning("\u26A0\uFE0F Blocking message send - chat not yet initialized",{messageContent:P.content?.substring(0,50)+"...",isInitialized:Ye});return}P.role==="user"&&v.filter(R=>R.role==="user").length===0&&Jt.measure("time_to_first_message",()=>{let R=window.performanceMetrics?.iframeStartTime||0,J=performance.now()-R;J>1e3&&g.logWarning("Slow time to first message",{firstMessageTime:J,threshold:1e3,tenantHash:M()}),g.logInfo(`\u23F1\uFE0F Time to first message: ${J.toFixed(2)}ms`)});let U=await lt(P.content),E={id:P.id||`msg_${Date.now()}_${Math.random()}`,timestamp:new Date().toISOString(),...P,content:U};y(R=>P.replaceId?R.map(J=>J.id===P.replaceId?E:J):[...R,E]);try{i.current&&(i.current.addMessage(E)||g.logWarning("Failed to add message to conversation manager",{messageId:E.id,messageRole:E.role}))}catch(R){g.logError(R,{context:"conversation_manager_integration",messageId:E.id})}if(P.role==="user"&&window.parent&&window.parent!==window&&window.parent.postMessage({type:"PICASSO_EVENT",event:"MESSAGE_SENT",payload:{content:U,files:P.files||[],messageId:E.id}},"*"),P.role==="user"&&!P.skipBotResponse&&!P.uploadState){let R=M(),J=async()=>{g.logInfo("\u2705 Making HTTP chat request via actions API"),F(!0);try{let B=M();g.logInfo("\u{1F680} Making chat API call",{tenantHash:B.slice(0,8)+"...",messageId:E.id});let de=r.current,ve=i.current?i.current.getConversationContext():null,Ne={tenant_hash:B,user_input:U,session_id:de,files:P.files||[],messageId:E.id,conversation_context:ve},ke=C.getChatUrl(B),W=await $a(ke,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(Ne)},3),Z="I apologize, but I'm having trouble processing that request right now.",fe=[];try{if(W.content)Z=await lt(W.content),W.actions&&Array.isArray(W.actions)&&(fe=W.actions);else if(W.messages&&W.messages[0]&&W.messages[0].content){let ge=JSON.parse(W.messages[0].content);Z=await lt(ge.message||ge.content||Z),ge.actions&&Array.isArray(ge.actions)&&(fe=ge.actions)}else if(W.body){let ge=JSON.parse(W.body);Z=await lt(ge.content||ge.message||Z),ge.actions&&Array.isArray(ge.actions)&&(fe=ge.actions)}else W.response&&(Z=await lt(W.response));if(W.fallback_message&&(Z=await lt(W.fallback_message)),W.file_acknowledgment){let ge=await lt(W.file_acknowledgment);Z+=`

`+ge}}catch(ge){g.logError(ge,{messageId:E.id,context:"response_parsing",data:typeof W=="string"?W.substring(0,200)+"...":JSON.stringify(W).substring(0,200)+"..."}),typeof W=="string"&&(Z=await lt(W))}let ha={id:`bot_${Date.now()}_${Math.random()}`,role:"assistant",content:Z,actions:fe,timestamp:new Date().toISOString(),metadata:{session_id:W.session_id,api_version:W.api_version||"actions-complete"}};y(ge=>[...ge,ha]);try{if(i.current){i.current.updateFromChatResponse(W,E,ha);let ge=i.current.getMetadata();l({conversationId:i.current.conversationId,messageCount:ge.messageCount,hasBeenSummarized:ge.hasBeenSummarized,canLoadHistory:!0}),g.logInfo("\u{1F504} Conversation state updated from chat response",{conversationId:i.current.conversationId,totalMessages:ge.messageCount,sessionId:W.session_id})}}catch(ge){g.logError(ge,{context:"conversation_manager_update_from_chat_response",messageId:ha.id})}g.logInfo("\u2705 Chat response processed successfully",{messageId:E.id,hasContent:!!Z,hasActions:fe.length>0,sessionId:W.session_id})}catch(B){g.logError(B,{messageId:E.id,context:"chat_api_error",tenantHash:M()});let de={id:`error_${Date.now()}_${Math.random()}`,role:"assistant",content:B.message,timestamp:new Date().toISOString(),metadata:{error:B.message,api_type:"actions-chat",can_retry:!0,messageId:E.id}};y(ve=>[...ve,de]);try{i.current&&i.current.addMessage(de)}catch(ve){g.logError(ve,{context:"conversation_manager_error_message",messageId:de.id})}}finally{F(!1)}};$?(g.logInfo("\u{1F30A} Attempting streaming response",{messageId:E.id,tenantHash:R.slice(0,8)+"..."}),(async()=>{try{let de=await Qg();if(!de)throw new Error("Streaming utilities not available");g.logInfo("\u{1F510} Starting JWT/Function URL streaming flow",{messageId:E.id,tenantHash:R.slice(0,8)+"..."});let ve;try{ve=await pa(U,r.current)}catch(Z){g.logWarning("\u{1F510} JWT token generation failed - falling back to HTTP",{error:Z.message,messageId:E.id}),J();return}F(!0);let Ne=`streaming_${Date.now()}_${Math.random()}`,ke={id:Ne,role:"assistant",content:"",timestamp:new Date().toISOString(),metadata:{streaming:!0,messageId:E.id,jwtAuth:!0}};y(Z=>[...Z,ke]),G({...ke,fallbackToHttp:()=>{y(Z=>Z.filter(fe=>fe.id!==Ne)),G(null),J()}});let W=de.useStreaming({streamingEndpoint:ve.streamingUrl,tenantHash:R,jwt:ve.jwt,onMessage:ue.current.onMessage,onComplete:ue.current.onComplete,onError:ue.current.onError});await W.startStreaming({userInput:U,sessionId:r.current,jwt:ve.jwt}),j.current=W}catch(de){g.logWarning("\u{1F504} JWT/Function URL streaming failed - falling back to HTTP",{error:de.message,messageId:E.id}),G(null),F(!1),J()}})()):(g.logInfo("\u{1F4E1} Using HTTP response (streaming not available)",{streamingEnabled:$,streamingHookAvailable:!!j.current,messageId:E.id}),J())}},[t,ma,Ye]),Uo=(0,X.useCallback)((P,U)=>{y(E=>E.map(R=>R.id===P?{...R,...U}:R))},[]),ga=(0,X.useCallback)(()=>{g.logInfo("\u{1F5D1}\uFE0F Manually clearing messages"),y([]),c(!1)},[]),Bo={messages:v,isTyping:I,tenantConfig:t,isOnline:p,pendingRetries:L,addMessage:ho,updateMessage:Uo,clearMessages:ga,retryMessage:ma,streamingAvailable:S,streamingEnabled:$,currentStreamingMessage:D,generateStreamingToken:pa,conversationMetadata:s,mobileFeatures:d,_debug:{tenantHash:M(),apiType:$?"streaming-with-http-fallback":"actions-only",configLoaded:!!t,chatEndpoint:C.getChatUrl(M()),streamingEndpoint:$?C.getStreamingUrl(M()):null,environment:C.ENVIRONMENT,networkStatus:p?"online":"offline",pendingRetryCount:L.size,streamingStatus:{available:S,enabled:$,hookInitialized:!!j.current,currentMessage:D?.id||null,jwtAuthEnabled:!0,authFlow:"jwt-function-url"}}};return X.default.createElement(eh.Provider,{value:Bo},e)};zs.propTypes={children:Zg.default.node.isRequired};zs.defaultProps={};typeof import.meta<"u"&&import.meta.env?.DEV&&typeof window<"u"&&(window.testChatAPI=async(e,t)=>{let a=t||C.getDefaultTenantHash();g.logInfo("\u{1F9EA} Testing chat API...",{message:e,tenantHash:a});try{let o=`test_${Date.now()}`,n=await fetch(C.getChatUrl(a),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenant_hash:a,user_input:e||"Hello, this is a test message",session_id:o})});if(n.ok){let r=await n.json();return g.logInfo("\u2705 Chat API Test Response",{hasContent:!!r.content,hasActions:r.actions?.length>0,sessionId:r.session_id}),r.content&&g.logInfo("\u{1F4DD} Bot response",{content:r.content.substring(0,100)+"..."}),r.actions&&r.actions.length>0&&g.logInfo("\u{1F3AF} Available actions",{actionCount:r.actions.length,actionLabels:r.actions.map(i=>i.label)}),r}else{let r=await n.text(),i=new Error(`Chat API Test Failed: ${n.status} ${r}`);return g.logError(i,{context:"chat_api_test",status:n.status,responseText:r}),null}}catch(o){return g.logError(o,{context:"chat_api_test_error"}),null}},window.testVolunteer=()=>window.testChatAPI("I want to volunteer"),window.testDonate=()=>window.testChatAPI("How can I donate?"),window.testContact=()=>window.testChatAPI("How do I contact you?"),window.testServices=()=>window.testChatAPI("What services do you offer?"),g.logInfo("\u{1F6E0}\uFE0F Chat API test commands available",{commands:["testChatAPI","testVolunteer","testDonate","testContact","testServices"]}));var le=Y(Fe(),1);var Fr=Y(Fe(),1);var ah={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};var cy=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dy=(e,t)=>{let a=(0,Fr.forwardRef)(({color:o="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:i,children:s,...l},u)=>(0,Fr.createElement)("svg",{ref:u,...ah,width:n,height:n,stroke:o,strokeWidth:i?Number(r)*24/Number(n):r,className:`lucide lucide-${cy(e)}`,...l},[...t.map(([d,h])=>(0,Fr.createElement)(d,h)),...(Array.isArray(s)?s:[s])||[]]));return a.displayName=`${e}`,a},te=dy;var _n=te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var zr=te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var Ur=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var kn=te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var Br=te("FilePlus",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"12",x2:"12",y1:"18",y2:"12",key:"1tsf04"}],["line",{x1:"9",x2:"15",y1:"15",y2:"15",key:"110plj"}]]);var Cn=te("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var Mo=te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var Hr=te("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var $r=te("MessagesSquare",[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2v5Z",key:"16vlm8"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1",key:"1cx29u"}]]);var Wr=te("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);var Vr=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var En=te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var Fo=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var Gr=te("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var Tn=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var qr=te("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);var jr=te("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);var Kr=te("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);var zt=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var oh=Y(Fe(),1);var aa=()=>{let e=th(),t=(0,oh.useContext)(e);if(!t)throw new Error("useChat must be used within a ChatProvider");return t};var Bc=Y(Fe(),1);Lt();function Hc(e){(0,Bc.useEffect)(()=>{let t=document.documentElement;if(console.log("\u{1F50D} useCSSVariables called at:",new Date().toISOString()),console.log("\u{1F50D} useCSSVariables received config:",e),console.log("\u{1F50D} Config type:",typeof e),console.log("\u{1F50D} Config branding:",e?.branding),console.log("\u{1F50D} Config keys:",e?Object.keys(e):"no config"),!e){console.log("\u23F3 Config not loaded yet, applying fallback CSS..."),Object.entries({"--primary-color":"#3b82f6","--background-color":"#ffffff","--font-color":"#374151","--border-radius":"12px","--font-family":"system-ui, -apple-system, sans-serif","--chat-width":"360px","--chat-height":"640px","--header-background-color":"#3b82f6","--header-text-color":"#ffffff","--user-bubble-color":"#3b82f6","--user-bubble-text-color":"#ffffff","--bot-bubble-color":"#f8fafc","--bot-bubble-text-color":"#374151"}).forEach(([I,F])=>{t.style.setProperty(I,F)}),console.log("\u2705 Applied fallback CSS variables for immediate styling");return}let a=e.branding||{primary_color:"#3b82f6",background_color:"#ffffff",font_color:"#374151"};e.branding?console.log("\u2705 Found branding config:",e.branding):console.warn("\u26A0\uFE0F No branding config found, using defaults"),console.log("\u{1F3A8} Applying CSS variables for tenant:",e.tenant_hash||e.tenant_id);let o=e.features||{},n=o.action_chips||{},r=typeof n=="object"?n.enabled!==!1:o.action_chips!==!1,i=o.quick_help||{},s=typeof i=="object"?i.enabled!==!1:o.quick_help!==!1,l=o.callout||{},u=typeof l=="object"?l.enabled!==!1:o.callout!==!1,d={"--primary-color":a.primary_color||"#3b82f6","--primary-light":a.primary_light||Uc(a.primary_color||"#3b82f6",15),"--primary-dark":a.primary_dark||po(a.primary_color||"#3b82f6",15),"--secondary-color":a.secondary_color||"#6b7280","--font-color":a.font_color||"#374151","--background-color":a.background_color||"#ffffff","--border-color":a.border_color||"rgba(59, 130, 246, 0.1)","--success-color":a.success_color||"#10b981","--warning-color":a.warning_color||"#f59e0b","--error-color":a.error_color||"#ef4444","--info-color":a.info_color||"#3b82f6","--user-bubble-color":a.user_bubble_color||a.primary_color||"#3b82f6","--user-bubble-text-color":a.user_bubble_text_color||lh(a.user_bubble_color||a.primary_color||"#3b82f6"),"--bot-bubble-color":a.bot_bubble_color||"#f8fafc","--bot-bubble-text-color":a.bot_bubble_text_color||a.font_color||"#374151","--bot-bubble-border":a.bot_bubble_border||a.border_color||"rgba(59, 130, 246, 0.1)","--header-background-color":a.header_background_color||a.primary_color||"#3b82f6","--header-text-color":a.header_text_color||sh(a),"--widget-icon-color":a.widget_icon_color||"#ffffff","--widget-background-color":a.widget_background_color||a.primary_color||"#3b82f6","--link-color":a.link_color||a.primary_color||"#3b82f6","--link-hover-color":a.link_hover_color||po(a.link_color||a.primary_color||"#3b82f6",10),"--input-background-color":a.input_background_color||a.background_color||"#ffffff","--input-border-color":a.input_border_color||a.border_color||"rgba(59, 130, 246, 0.1)","--input-text-color":a.input_text_color||a.font_color||"#374151","--input-placeholder-color":a.input_placeholder_color||"#6b7280","--input-focus-color":a.input_focus_color||a.primary_color||"#3b82f6","--input-focus-border-color":a.input_focus_border_color||a.primary_color||"#3b82f6","--input-font-size":ye(a.input_font_size||"14px"),"--input-padding":a.input_padding||"12px 16px","--input-border-radius":ye(a.input_border_radius||a.border_radius||"12px"),"--input-border-width":ye(a.input_border_width||"1px"),"--input-min-height":ye(a.input_min_height||"44px"),"--input-max-height":ye(a.input_max_height||"120px"),"--font-family":a.font_family||"system-ui, -apple-system, sans-serif","--font-size-base":ye(a.font_size||"14px"),"--font-size-heading":ye(a.font_size_heading||"16px"),"--font-size-small":ye(a.font_size_small||"12px"),"--font-size-large":ye(a.font_size_large||"18px"),"--font-weight-normal":a.font_weight_normal||a.font_weight||"400","--font-weight-medium":a.font_weight_medium||"500","--font-weight-semibold":a.font_weight_semibold||"600","--font-weight-bold":a.font_weight_bold||"700","--font-weight-heading":a.font_weight_heading||"600","--line-height-base":a.line_height||"1.5","--line-height-heading":a.line_height_heading||"1.2","--border-radius":ye(a.border_radius||"12px"),"--border-radius-small":ye(a.border_radius_small||Ay(a.border_radius)),"--border-radius-large":ye(a.border_radius_large||Ry(a.border_radius)),"--border-width":ye(a.border_width||"1px"),"--border-width-thick":ye(a.border_width_thick||"2px"),"--message-spacing":a.message_spacing||"20px","--bubble-padding":a.bubble_padding||"12px 16px","--container-padding":a.container_padding||"16px","--action-chip-margin":a.action_chip_margin||"16px","--action-chip-gap":a.action_chip_gap||"8px","--action-chip-container-padding":a.action_chip_container_padding||"4px 0","--chat-width":ye(a.chat_width||"360px"),"--chat-height":ye(a.chat_height||"640px"),"--chat-max-height":a.chat_max_height||"80vh","--chat-width-large":ye(a.chat_width_large||"400px"),"--chat-height-large":ye(a.chat_height_large||"700px"),"--chat-width-mobile":a.chat_width_mobile||"calc(100vw - 24px)","--chat-height-mobile":a.chat_height_mobile||"calc(100vh - 160px)","--chat-width-tablet":a.chat_width_tablet||"calc(100vw - 32px)","--chat-height-tablet":a.chat_height_tablet||"calc(100vh - 140px)","--widget-bottom":Us(a.chat_position,"bottom"),"--widget-right":Us(a.chat_position,"right"),"--widget-top":Us(a.chat_position,"top"),"--widget-left":Us(a.chat_position,"left"),"--widget-z-index":a.widget_z_index||"1000","--chat-transform-origin":fy(a.chat_position),"--avatar-url":ih(e),"--avatar-border-radius":py(a.avatar_shape),"--avatar-display":a.avatar_shape==="hidden"?"none":"block","--avatar-border":a.avatar_border||"2px solid rgba(59, 130, 246, 0.15)","--avatar-shadow":a.avatar_shadow||"0 2px 8px rgba(59, 130, 246, 0.1), 0 1px 3px rgba(0, 0, 0, 0.05)","--message-avatar-size":a.message_avatar_size||"24px","--message-sender-font-size":a.message_sender_font_size||"13px","--message-sender-font-weight":a.message_sender_font_weight||"600","--message-sender-color":a.message_sender_color||a.font_color||"#374151","--logo-background-color":a.logo_background_color||a.avatar_background_color||"transparent","--avatar-background-color":a.avatar_background_color||a.logo_background_color||"transparent","--chat-header-logo-bg":a.logo_background_color||a.avatar_background_color||"transparent","--bot-avatar-bg":a.avatar_background_color||a.logo_background_color||"transparent","--action-chip-bg":a.action_chip_bg||"rgba(59, 130, 246, 0.08)","--action-chip-border":a.action_chip_border||"2px solid rgba(59, 130, 246, 0.2)","--action-chip-color":a.action_chip_color||a.primary_color||"#3b82f6","--action-chip-hover-bg":a.action_chip_hover_bg||a.primary_color||"#3b82f6","--action-chip-hover-color":a.action_chip_hover_color||"#ffffff","--action-chip-hover-border":a.action_chip_hover_border||a.primary_color||"#3b82f6","--action-chip-disabled-bg":a.action_chip_disabled_bg||"#f9fafb","--action-chip-disabled-color":a.action_chip_disabled_color||"#9ca3af","--action-chip-disabled-border":a.action_chip_disabled_border||"#e5e7eb","--action-chip-padding":a.action_chip_padding||"12px 16px","--action-chip-radius":ye(a.action_chip_radius||"8px"),"--action-chip-font-size":ye(a.action_chip_font_size||"13px"),"--action-chip-font-weight":a.action_chip_font_weight||"500","--action-chip-shadow":a.action_chip_shadow||"0 1px 3px rgba(0, 0, 0, 0.1)","--action-chip-hover-shadow":vy(a.primary_color),"--callout-background":a.callout_background||a.background_color||"#ffffff","--callout-border-color":a.callout_border_color||a.border_color||"rgba(59, 130, 246, 0.1)","--callout-border-width":a.callout_border_width||"1px","--callout-border-radius":ye(a.callout_border_radius||a.border_radius||"12px"),"--callout-padding":a.callout_padding||"14px 18px","--callout-min-width":ye(a.callout_min_width||"160px"),"--callout-max-width":a.callout_max_width?ye(a.callout_max_width):"none","--callout-font-size":ye(a.callout_font_size||"14px"),"--callout-text-color":a.callout_text_color||a.font_color||"#374151","--callout-main-weight":a.callout_main_weight||"600","--callout-main-size":ye(a.callout_main_size||"14px"),"--callout-main-color":a.callout_main_color||a.font_color||"#374151","--callout-subtitle-size":ye(a.callout_subtitle_size||"12px"),"--callout-subtitle-weight":a.callout_subtitle_weight||"400","--callout-subtitle-color":a.callout_subtitle_color||a.secondary_color||"#6b7280","--callout-close-bg":a.callout_close_bg||"rgba(0, 0, 0, 0.05)","--callout-close-color":a.callout_close_color||a.secondary_color||"#6b7280","--callout-close-radius":ye(a.callout_close_radius||"50%"),"--callout-close-hover-bg":a.callout_close_hover_bg||a.border_color||"rgba(59, 130, 246, 0.1)","--callout-close-hover-color":a.callout_close_hover_color||a.font_color||"#374151","--callout-animation-duration":a.callout_animation_duration||"0.35s","--bubble-shadow":a.bubble_shadow||"0 1px 3px rgba(0, 0, 0, 0.1)","--bubble-shadow-hover":a.bubble_shadow_hover||"0 2px 8px rgba(0, 0, 0, 0.15)","--primary-shadow":document.body.getAttribute("data-iframe")==="true"?"none":a.primary_shadow||nh(a.primary_color),"--primary-shadow-light":a.primary_shadow_light||rh(a.primary_color),"--primary-shadow-hover":a.primary_shadow_hover||yy(a.primary_color),"--container-shadow":a.container_shadow||"0 10px 25px rgba(0, 0, 0, 0.1)","--header-shadow":a.header_shadow||rh(a.primary_color),"--input-shadow":a.input_shadow||wy(a.primary_color),"--input-focus-shadow":a.input_focus_shadow||Sy(a.primary_color),"--send-button-shadow":a.send_button_shadow||nh(a.primary_color),"--shadow-light":a.shadow_light||"0 1px 3px rgba(0, 0, 0, 0.08)","--shadow-medium":a.shadow_medium||"0 4px 12px rgba(0, 0, 0, 0.1)","--shadow-heavy":a.shadow_heavy||"0 20px 25px rgba(0, 0, 0, 0.1)","--user-bubble-gradient":my(a.user_bubble_color||a.primary_color),"--header-gradient":gy(a.header_background_color||a.primary_color),"--primary-gradient":hy(a.primary_color),"--widget-gradient":xy(a.widget_background_color||a.primary_color),"--close-button-hover-bg":Iy(a),"--close-button-hover-color":by(a),"--title-text-shadow":a.enable_white_title?"0 1px 3px rgba(0, 0, 0, 0.3)":"none","--button-hover-color":po(a.primary_color||"#3b82f6",10),"--primary-light-computed":Uc(a.primary_color||"#3b82f6",90),"--transition-fast":a.transition_fast||"0.15s ease","--transition-normal":a.transition_normal||"0.2s ease","--transition-slow":a.transition_slow||"0.3s cubic-bezier(0.4, 0, 0.2, 1)","--typing-animation-duration":o.streaming?"0.8s":"1.4s","--upload-button-display":o.uploads||o.photo_uploads?"flex":"none","--photo-upload-display":o.photo_uploads!==!1?"flex":"none","--photo-button-display":o.photo_uploads!==!1?"flex":"none","--voice-display":o.voice_input?"flex":"none","--voice-button-display":o.voice_input?"flex":"none","--action-chips-display":r?"flex":"none","--action-chips-short-text-threshold":a.action_chips_short_text_threshold||"16","--callout-display":u?"block":"none","--callout-enabled":u?"1":"0","--notification-display":"flex","--quick-help-bg":a.quick_help_bg||"#fafbfc","--quick-help-border":a.quick_help_border||"#f0f0f0","--quick-help-shadow":a.quick_help_shadow||"0 -4px 20px rgba(0, 0, 0, 0.1)","--quick-help-overlay-bg":a.quick_help_overlay_bg||"#ffffff","--quick-help-overlay-border":a.quick_help_overlay_border||"#e5e7eb","--quick-help-overlay-shadow":a.quick_help_overlay_shadow||"0 -4px 12px rgba(0, 0, 0, 0.1)","--quick-help-button-shadow":a.quick_help_button_shadow||"0 2px 4px rgba(0, 0, 0, 0.08)","--quick-help-animation-duration":a.quick_help_animation_duration||"0.375s","--quick-help-slide-distance":a.quick_help_slide_distance||"20px","--callout-shadow":a.callout_shadow||"0 8px 24px rgba(0, 0, 0, 0.15)","--callout-hover-shadow":a.callout_hover_shadow||"0 12px 32px rgba(0, 0, 0, 0.2)","--notification-animation-duration":a.notification_animation_duration||"2s","--focus-ring":Ly(a.input_focus_color||a.primary_color),"--input-focus-ring-color":_y(a.input_focus_color||a.primary_color),"--input-divider-color":a.input_divider_color||"transparent","--input-divider-focus-color":ky(a.primary_color),"--mobile-breakpoint":a.mobile_breakpoint||"480px","--tablet-breakpoint":a.tablet_breakpoint||"768px","--desktop-breakpoint":a.desktop_breakpoint||"1024px","--upload-success-border":a.upload_success_border||"#10b981","--upload-success-bg":a.upload_success_bg||"rgba(16, 185, 129, 0.1)","--upload-error-border":a.upload_error_border||"#ef4444","--upload-error-bg":a.upload_error_bg||"rgba(239, 68, 68, 0.1)","--upload-warning-border":a.upload_warning_border||"#f59e0b","--upload-warning-bg":a.upload_warning_bg||"rgba(245, 158, 11, 0.1)"};document.body.getAttribute("data-iframe")==="true"&&(console.log("\u{1F5BC}\uFE0F Iframe context detected - applying iframe-specific variables"),d["--chat-width"]="100%",d["--chat-height"]="100%",d["--chat-max-height"]="100%",d["--chat-width-large"]="100%",d["--chat-height-large"]="100%",d["--chat-width-mobile"]="100%",d["--chat-height-mobile"]="100%",d["--chat-width-tablet"]="100%",d["--chat-height-tablet"]="100%",d["--widget-bottom"]="auto",d["--widget-right"]="auto",d["--widget-top"]="auto",d["--widget-left"]="auto",d["--chat-container-position"]="static",d["--chat-container-width"]="100%",d["--chat-container-height"]="100%",d["--chat-container-max-height"]="100%",d["--chat-container-margin"]="0",d["--chat-container-border-radius"]="0",console.log("\u2705 Iframe-specific CSS variables applied"));let x=[],v=[];return Object.entries(d).forEach(([y,I])=>{if(I&&typeof I=="string"&&I!=="undefined"&&I!=="null")try{t.style.setProperty(y,I),x.push(y)}catch(F){console.warn(`\u26A0\uFE0F Failed to set ${y}:`,F),v.push({property:y,value:I,error:F.message})}}),Cy(o,t,e,s,r,u),Ey(a.chat_position,t),Ty(d,t),console.log(`\u{1F3A8} Applied ${x.length} CSS variables for tenant: ${e.tenant_hash||e.tenant_id}`),v.length>0&&console.warn(`\u26A0\uFE0F ${v.length} variables failed:`,v),window.currentPicassoConfig=e,window.appliedCSSVariables=d,window.picassoDebug={config:e,appliedVariables:d,tenant_hash:e?.tenant_hash,enhancementsApplied:!0,configSource:e.metadata?.source},()=>{console.log("\u{1F9F9} Cleaning up CSS variables..."),x.forEach(y=>{t.style.removeProperty(y)})}},[e])}function Us(e,t){let a=(e||"Bottom Right").toLowerCase(),o={"bottom right":{bottom:"24px",right:"24px",top:"auto",left:"auto"},"bottom left":{bottom:"24px",left:"24px",top:"auto",right:"auto"},"top right":{top:"24px",right:"24px",bottom:"auto",left:"auto"},"top left":{top:"24px",left:"24px",bottom:"auto",right:"auto"}};return(o[a]||o["bottom right"])[t]||"auto"}function fy(e){let t=(e||"Bottom Right").toLowerCase();return{"bottom-right":"bottom right","bottom-left":"bottom left","top-right":"top right","top-left":"top left"}[t.replace(" ","-")]||"bottom right"}function ih(e){let{tenant_hash:t,branding:a,_cloudfront:o}=e||{};console.log("\u{1F5BC}\uFE0F Generating avatar URL for tenant hash:",t||"no-hash");let r=[a?.avatar_url,a?.logo_url,a?.bot_avatar_url,a?.icon,a?.custom_icons?.bot_avatar,o?.urls?.avatar,o?.urls?.logo,t?`${C.API_BASE_URL}/tenants/hash-${t}/avatar.png`:null,t?`${C.API_BASE_URL}/tenants/hash-${t}/logo.png`:null,t?`${C.API_BASE_URL}/tenants/hash-${t}/avatar.svg`:null,t?`${C.API_BASE_URL}/tenants/hash-${t}/logo.svg`:null,`${C.API_BASE_URL}/collateral/default-avatar.png`].find(i=>i&&i.trim()&&i!=="undefined")||`${C.API_BASE_URL}/collateral/default-avatar.png`;return console.log("\u2705 Selected avatar URL:",r),`url(${r})`}function py(e){let t=(e||"circle").toLowerCase();return{circle:"50%",rounded:"8px",square:"0px",hidden:"50%"}[t]||"50%"}function my(e){if(!e)return"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)";let t=po(e,10);return`linear-gradient(135deg, ${e} 0%, ${t} 100%)`}function gy(e){if(!e)return"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)";let t=po(e,8);return`linear-gradient(135deg, ${e} 0%, ${t} 100%)`}function hy(e){if(!e)return"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)";let t=po(e,12);return`linear-gradient(135deg, ${e} 0%, ${t} 100%)`}function xy(e){if(!e)return"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)";let t=po(e,6);return`linear-gradient(135deg, ${e} 0%, ${t} 100%)`}function vy(e){let t=oa(e||"#3b82f6");return t?`0 4px 12px rgba(${t.r}, ${t.g}, ${t.b}, 0.25), 0 1px 3px rgba(${t.r}, ${t.g}, ${t.b}, 0.1)`:"0 4px 12px rgba(59, 130, 246, 0.25), 0 1px 3px rgba(59, 130, 246, 0.1)"}function nh(e){let t=oa(e||"#3b82f6");return t?`0 4px 12px rgba(${t.r}, ${t.g}, ${t.b}, 0.25)`:"0 4px 12px rgba(59, 130, 246, 0.25)"}function rh(e){let t=oa(e||"#3b82f6");return t?`0 2px 8px rgba(${t.r}, ${t.g}, ${t.b}, 0.15)`:"0 2px 8px rgba(59, 130, 246, 0.15)"}function yy(e){let t=oa(e||"#3b82f6");return t?`0 6px 16px rgba(${t.r}, ${t.g}, ${t.b}, 0.3)`:"0 6px 16px rgba(59, 130, 246, 0.3)"}function wy(e){let t=oa(e||"#3b82f6");return t?`0 2px 8px rgba(${t.r}, ${t.g}, ${t.b}, 0.08)`:"0 2px 8px rgba(59, 130, 246, 0.08)"}function Sy(e){let t=oa(e||"#3b82f6");return t?`0 0 0 3px rgba(${t.r}, ${t.g}, ${t.b}, 0.1), 0 4px 12px rgba(${t.r}, ${t.g}, ${t.b}, 0.15)`:"0 0 0 3px rgba(59, 130, 246, 0.1), 0 4px 12px rgba(59, 130, 246, 0.15)"}function Iy(e){let t=e.header_background_color||e.title_bar_color||"#3b82f6";return Yr(t)?"rgba(0, 0, 0, 0.1)":"rgba(255, 255, 255, 0.25)"}function by(e){let t=e.header_background_color||e.title_bar_color||"#3b82f6";return Yr(t)?"#374151":"#ffffff"}function sh(e){if(e.header_text_color)return e.header_text_color;if(e.chat_title_color)return e.chat_title_color;if(e.title_color)return e.title_color;let t=e.header_background_color||e.title_bar_color||"#3b82f6";return e.enable_white_title||e.white_title?"#ffffff":Yr(t)?"#1f2937":"#ffffff"}function lh(e){return Yr(e)?"#1f2937":"#ffffff"}function Ly(e){let t=oa(e||"#3b82f6");return t?`0 0 0 3px rgba(${t.r}, ${t.g}, ${t.b}, 0.2)`:"0 0 0 3px rgba(59, 130, 246, 0.2)"}function _y(e){let t=oa(e||"#3b82f6");return t?`rgba(${t.r}, ${t.g}, ${t.b}, 0.1)`:"rgba(59, 130, 246, 0.1)"}function ky(e){let t=oa(e||"#3b82f6");return t?`rgba(${t.r}, ${t.g}, ${t.b}, 0.1)`:"rgba(59, 130, 246, 0.1)"}function Cy(e,t,a,o,n,r){console.log("\u{1F39B}\uFE0F Applying enhanced feature styles");let i=[];e.uploads||i.push("feature-uploads-disabled"),e.voice_input||i.push("feature-voice-disabled"),o||i.push("feature-quick-help-disabled"),n||i.push("feature-action-chips-disabled"),r||i.push("feature-callout-disabled"),document.body.classList.remove("feature-uploads-disabled","feature-voice-disabled","feature-quick-help-disabled","feature-action-chips-disabled","feature-callout-disabled"),i.length>0&&document.body.classList.add(...i),console.log("\u2705 Enhanced feature styles applied:",{quickHelpEnabled:o,actionChipsEnabled:n,calloutEnabled:r,appliedClasses:i})}function Ey(e,t){let a=(e||"Bottom Right").toLowerCase(),o=a.replace(" ","-");t.style.setProperty("--chat-position-class",o);let n={"bottom-right":"bottom right","bottom-left":"bottom left","top-right":"top right","top-left":"top left"};t.style.setProperty("--chat-transform-origin",n[o]||"bottom right"),console.log(`\u2705 Chat position: ${a}`)}function Ty(e,t){console.log("\u{1F9EE} Computing advanced styles...");let a=e["--primary-color"];if(a&&a.startsWith("#"))try{let n=oa(a);n&&(t.style.setProperty("--primary-shadow-computed",`0 4px 12px rgba(${n.r}, ${n.g}, ${n.b}, 0.25)`),t.style.setProperty("--primary-shadow-hover-computed",`0 8px 20px rgba(${n.r}, ${n.g}, ${n.b}, 0.35)`),t.style.setProperty("--primary-shadow-light-computed",`0 2px 8px rgba(${n.r}, ${n.g}, ${n.b}, 0.15)`))}catch(n){console.warn("Shadow computation failed:",n)}let o=e["--input-focus-color"];if(o){let n=oa(o);n&&t.style.setProperty("--focus-ring-computed",`0 0 0 3px rgba(${n.r}, ${n.g}, ${n.b}, 0.2)`)}console.log("\u2705 Advanced styles computed")}function Yr(e){if(!e||typeof e!="string")return!0;let t=e.replace("#",""),a=parseInt(t.slice(0,2),16),o=parseInt(t.slice(2,4),16),n=parseInt(t.slice(4,6),16);return(a*299+o*587+n*114)/1e3>128}function oa(e){if(!e||typeof e!="string")return null;let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function po(e,t){if(!e||!e.startsWith("#"))return e;try{let a=parseInt(e.replace("#",""),16),o=Math.round(2.55*t),n=Math.max(0,(a>>16)-o),r=Math.max(0,(a>>8&255)-o),i=Math.max(0,(a&255)-o);return"#"+(16777216+n*65536+r*256+i).toString(16).slice(1)}catch(a){return console.warn("Color darkening failed:",a),e}}function Uc(e,t){if(!e||!e.startsWith("#"))return e;try{let a=parseInt(e.replace("#",""),16),o=Math.round(2.55*t),n=Math.min(255,(a>>16)+o),r=Math.min(255,(a>>8&255)+o),i=Math.min(255,(a&255)+o);return"#"+(16777216+n*65536+r*256+i).toString(16).slice(1)}catch(a){return console.warn("Color lightening failed:",a),e}}function Ay(e){if(!e)return"8px";let t=parseInt(e,10);return isNaN(t)?"8px":`${Math.round(t*.5)}px`}function Ry(e){if(!e)return"16px";let t=parseInt(e,10);return isNaN(t)?"16px":`${Math.round(t*1.5)}px`}function ye(e){if(!e)return e;if(typeof e=="number")return`${e}px`;let t=parseInt(e,10);return isNaN(t)?e:`${t}px`}function uh({children:e}){let{config:t}=De();return Hc(t),(0,Bc.useEffect)(()=>{window.configProvider={config:t},window.currentTenantConfig=t,window.picassoDebug={config:t,appliedVariables:window.appliedCSSVariables,tenant_hash:t?.tenant_hash,enhancementsApplied:!0,configSource:t?.metadata?.source||"unknown"},console.log("\u{1F3A8} CSS variables provider ready")},[t]),e}typeof window<"u"&&(window.testCSS=(e,t)=>{console.log(`\u{1F9EA} Testing CSS update: ${e} = ${t}`),document.documentElement.style.setProperty(e,t)},window.debugLogoBackground=()=>{let e=window.currentTenantConfig,t=document.documentElement;console.log("\u{1F50D} Logo Background Debug:",{configLogoBackground:e?.branding?.logo_background_color,configAvatarBackground:e?.branding?.avatar_background_color,cssLogoBackground:t.style.getPropertyValue("--logo-background-color"),cssAvatarBackground:t.style.getPropertyValue("--avatar-background-color"),cssChatHeaderLogoBg:t.style.getPropertyValue("--chat-header-logo-bg"),cssBotAvatarBg:t.style.getPropertyValue("--bot-avatar-bg")});let a=document.querySelector(".chat-header-logo");if(a){let o=window.getComputedStyle(a);console.log("\u{1F3A8} Logo Element Computed Styles:",{backgroundColor:o.backgroundColor,backgroundImage:o.backgroundImage,backgroundSize:o.backgroundSize,backgroundPosition:o.backgroundPosition})}else console.log("\u274C Logo element not found (.chat-header-logo)")},window.testQuickHelpToggle=()=>{let t=document.documentElement.style.getPropertyValue("--quick-help-container-display")==="none"?"block":"none";document.documentElement.style.setProperty("--quick-help-container-display",t),console.log(`\u{1F9EA} Quick Help toggled: ${t}`)},window.testActionChipsToggle=()=>{let t=document.documentElement.style.getPropertyValue("--action-chips-display")==="none"?"flex":"none";document.documentElement.style.setProperty("--action-chips-display",t),console.log(`\u{1F9EA} Action Chips toggled: ${t}`)},window.testAvatarUrl=async e=>new Promise(t=>{let a=new Image;a.onload=()=>{console.log("\u2705 Avatar URL works:",e),t(!0)},a.onerror=()=>{console.log("\u274C Avatar URL failed:",e),t(!1)},a.src=e}),window.debugAvatar=async e=>{console.log("\u{1F50D} Avatar Debug - Multi-Tenant System:");let t=e||window.currentTenantConfig;if(!t){console.log("\u274C No config available for avatar testing");return}let{tenant_hash:a,branding:o}=t,n=[o?.avatar_url,o?.logo_url,a?`${C.API_BASE_URL}/tenants/hash-${a}/avatar.png`:null,a?`${C.API_BASE_URL}/tenants/hash-${a}/logo.png`:null,a?`${C.API_BASE_URL}/tenants/hash-${a}/avatar.svg`:null,`${C.API_BASE_URL}/collateral/default-avatar.png`].filter(r=>r&&r.trim());console.log("\u{1F9EA} Testing avatar URLs for hash:",a);for(let r of n)if(await window.testAvatarUrl(r))return console.log("\u{1F3AF} First working URL found:",r),document.documentElement.style.setProperty("--avatar-url",`url(${r})`),`url(${r})`;return console.log("\u26A0\uFE0F No working avatar URLs found, using default"),document.documentElement.style.setProperty("--avatar-url",`url(${C.API_BASE_URL}/collateral/default-avatar.png)`),`url(${C.API_BASE_URL}/collateral/default-avatar.png)`},window.applyTestLogo=e=>{console.log("\u{1F9EA} Applying test logo:",e),document.documentElement.style.setProperty("--avatar-url",`url(${e})`);let t=new Image;t.onload=()=>console.log("\u2705 Test logo applied successfully"),t.onerror=()=>console.log("\u274C Test logo failed to load"),t.src=e},window.applyGenericTheme=(e="default")=>{let t={default:{"--primary-color":"#3b82f6","--message-spacing":"16px","--border-radius":"12px","--bubble-padding":"12px 16px","--chat-width":"360px","--chat-height":"540px"},modern:{"--primary-color":"#6366f1","--message-spacing":"20px","--border-radius":"16px","--bubble-padding":"16px 20px","--chat-width":"380px","--chat-height":"580px"},compact:{"--primary-color":"#10b981","--message-spacing":"12px","--border-radius":"8px","--bubble-padding":"8px 12px","--chat-width":"320px","--chat-height":"480px"}},a=t[e]||t.default;Object.entries(a).forEach(([o,n])=>{document.documentElement.style.setProperty(o,n)}),console.log(`\u{1F3A8} Applied ${e} theme:`,a)},console.log(`
\u{1F6E0}\uFE0F  PICASSO MULTI-TENANT CSS COMMANDS:
   debugLogoBackground()         - Debug current logo background settings
   testCSS('--property', 'value') - Test any CSS variable directly
   
\u{1F9EA} FEATURE COMMANDS:
   testQuickHelpToggle()         - Toggle quick help display
   testActionChipsToggle()       - Toggle action chips display
   debugAvatar()                 - Test all avatar URLs for current tenant
   applyTestLogo('url')          - Test any custom logo URL
   
\u{1F3A8} THEME TESTING:
   applyGenericTheme('default')  - Apply generic theme variants
   Available themes: 'default', 'modern', 'compact'
   
\u{1F4CB} SYSTEM STATUS:
   All CSS variables are tenant-agnostic with generic defaults
   No hard-coded tenant-specific references
   Ready for multi-tenant deployment
`),window.picassoUtilities={isLightColor:Yr,determineContrastColor:lh,determineHeaderTextColor:sh,generateAvatarUrl:ih,hexToRgb:oa,darkenColor:po,lightenColor:Uc});var tI=Y(Fe(),1);var Ut=Y(_e(),1);function $c({onClose:e,onOpenSettings:t}){let{config:a}=De(),o=a?.branding?.chat_subtitle||a?.branding?.header_subtitle||a?.chat_subtitle||"How can we help you today?";return(0,Ut.jsxs)("div",{className:"chat-header",children:[(0,Ut.jsxs)("div",{className:"chat-header-brand",children:[(0,Ut.jsx)("div",{className:"chat-header-logo"}),(0,Ut.jsxs)("div",{className:"chat-header-text",children:[(0,Ut.jsx)("h3",{className:"chat-title",children:a?.branding?.chat_title||"Chat"}),o&&(0,Ut.jsx)("p",{className:"chat-subtitle",children:o})]})]}),(0,Ut.jsxs)("div",{className:"chat-header-actions",children:[t&&(0,Ut.jsx)("button",{onClick:t,className:"chat-header-action-button","aria-label":"Open chat settings",title:"Chat Settings",children:(0,Ut.jsx)(Fo,{size:16})}),(0,Ut.jsx)("button",{onClick:e,className:"chat-header-close-button","aria-label":"Close chat",children:(0,Ut.jsx)(zt,{size:16})})]})]})}var Ua=Y(Fe(),1);var iI=Y(Fe(),1);var Bt=Y(_e(),1);function Xr({onClose:e}){let{config:t}=De(),a=t?.features||{},{addMessage:o}=aa(),r=[{id:"file",label:"Upload file",icon:(0,Bt.jsx)(Br,{className:"w-5 h-5"}),enabled:a.uploads,action:"file"},{id:"camera",label:"Take photo",icon:(0,Bt.jsx)(zr,{className:"w-5 h-5"}),enabled:a.photo_uploads,action:"camera"},{id:"photo",label:"Upload photo",icon:(0,Bt.jsx)(Mo,{className:"w-5 h-5"}),enabled:a.photo_uploads,action:"photo"},{id:"video",label:"Upload video",icon:(0,Bt.jsx)(qr,{className:"w-5 h-5"}),enabled:a.photo_uploads,action:"video"}].filter(s=>s.enabled);if(r.length===0)return null;let i=s=>{let l=document.createElement("input");l.type="file",l.multiple=!0,s.action==="photo"||s.action==="camera"?(l.accept="image/*",s.action==="camera"&&(l.capture="environment")):s.action==="video"?l.accept="video/*":l.accept="*/*",l.onchange=()=>{let u=Array.from(l.files);if(!u.length)return;let d=u.map(h=>({name:h.name,type:h.type,url:URL.createObjectURL(h)}));o({role:"user",content:`\u{1F4CE} Uploaded ${d.length>1?"files":"file"}`,files:d}),e&&e()},l.click()};return(0,Bt.jsxs)("div",{className:"upload-menu",children:[(0,Bt.jsxs)("div",{className:"upload-menu-header",children:[(0,Bt.jsx)("span",{className:"upload-menu-title",children:"Add attachment"}),(0,Bt.jsx)("button",{onClick:e,className:"upload-menu-close",children:"\xD7"})]}),(0,Bt.jsx)("div",{className:"upload-menu-grid",children:r.map(s=>(0,Bt.jsxs)("button",{onClick:()=>i(s),className:"upload-option","aria-label":s.label,"data-type":s.id,children:[s.icon,(0,Bt.jsx)("span",{children:s.label})]},s.id))})]})}var Ve=Y(_e(),1);function Wc({input:e,setInput:t}){let{addMessage:a,isTyping:o}=aa(),{config:n}=De(),r=n?.features||{},[i,s]=(0,Ua.useState)(!1),[l,u]=(0,Ua.useState)(new Set),d=(0,Ua.useRef)(null),[h,x]=(0,Ua.useState)(""),v=e!==void 0?e:h,y=t||x,I=n?.branding?.font_family||"system-ui, sans-serif",F=()=>{let S=d.current;if(!S)return;let b=document.createElement("span");b.style.font=window.getComputedStyle(S).font,b.style.fontSize=n?.branding?.font_size||"15px",b.style.fontFamily=I,b.style.visibility="hidden",b.style.position="absolute",b.style.whiteSpace="nowrap",b.textContent=S.value||S.placeholder,document.body.appendChild(b);let $=b.offsetWidth;document.body.removeChild(b);let O=window.getComputedStyle(S),D=parseInt(O.paddingLeft)||0,G=parseInt(O.paddingRight)||0,j=S.offsetWidth-D-G;if($>j){S.style.height="auto";let ce=S.scrollHeight,re=120;S.style.height=Math.min(ce,re)+"px"}else S.style.height="20px"};(0,Ua.useEffect)(()=>{F()},[v]),(0,Ua.useEffect)(()=>{d.current&&(d.current.style.height="20px")},[]);let f=()=>{let S=v.trim();!S||o||(a({role:"user",content:S}),y(""),s(!1),setTimeout(()=>{d.current&&(d.current.style.height="20px")},0))},c=S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),f())},p=S=>{y(S.target.value)},w=S=>{u(b=>{let $=new Set(b);return $.delete(S),$})},L=S=>{let b=document.createElement("input");switch(b.type="file",S){case"camera":b.accept="image/*",b.capture="environment";break;case"photo":b.accept="image/*";break;case"video":b.accept="video/*";break;case"file":b.accept=".pdf,.doc,.docx,.txt";break;default:break}b.onchange=$=>{let O=$.target.files[0];if(!O)return;let D=10*1024*1024;if(O.size>D){a({role:"user",content:`\u274C File "${O.name}" is too large (max 10MB)`,skipBotResponse:!0});return}let G=`upload_${Date.now()}_${Math.random()}`,j={id:G,name:O.name,size:O.size,type:O.type};if(O.type.startsWith("image/"))try{j.preview=URL.createObjectURL(O)}catch(ce){console.error("Preview error:",ce)}u(ce=>new Set(ce).add(G)),a({id:G,role:"user",content:`Uploading ${O.name}...`,files:[j],uploadState:"uploading",onCancel:()=>w(G),skipBotResponse:!0}),setTimeout(()=>{u(ce=>{if(ce.has(G)){a({id:`${G}_complete`,role:"user",content:`\u{1F4CE} ${O.name}`,files:[j],uploadState:"complete",skipBotResponse:!0,replaceId:G});let re=new Set(ce);return re.delete(G),re}return ce})},2e3)},b.click(),s(!1)},_=r.uploads||r.photo_uploads||r.voice_input;return(0,Ve.jsxs)("div",{className:`input-bar-container ${_?"double-row":"single-row"}`,children:[i&&(0,Ve.jsx)(Xr,{onClose:()=>s(!1)}),(0,Ve.jsxs)("div",{className:"input-row-container",children:[(0,Ve.jsx)("div",{className:`input-text-row ${_?"":"inline-mode"}`,children:_?(0,Ve.jsx)("textarea",{ref:d,id:"chat-message-input",name:"message",value:v,onChange:p,onKeyDown:c,placeholder:"How can I help you today?",autoComplete:"off",className:"input-textarea"}):(0,Ve.jsxs)("div",{className:"input-inline-container",children:[(0,Ve.jsx)("textarea",{ref:d,id:"chat-message-input",name:"message",value:v,onChange:p,onKeyDown:c,placeholder:"How can I help you today?",autoComplete:"off",className:"input-textarea inline-textarea auto-resize-textarea"}),(0,Ve.jsx)("button",{onClick:f,disabled:!v.trim()||o,className:`send-button inline-send ${v.trim()?"send-button-active":"send-button-disabled"}`,"aria-label":"Send",children:(0,Ve.jsx)(_n,{size:16,color:v.trim()?"white":"#94a3b8"})})]})}),_?(0,Ve.jsxs)("div",{className:"input-controls-row",children:[(0,Ve.jsxs)("div",{className:"input-tools",children:[(r.uploads||r.photo_uploads)&&(0,Ve.jsx)("div",{className:"input-tool-button",onClick:()=>s(S=>!S),"aria-label":"Add Attachment",children:(0,Ve.jsx)(Vr,{size:16})}),r.voice_input&&(0,Ve.jsx)("div",{className:"input-tool-button","data-voice":!0,children:(0,Ve.jsx)(Wr,{size:16})})]}),(0,Ve.jsx)("button",{onClick:f,disabled:!v.trim()||o,className:`send-button ${v.trim()?"send-button-active":"send-button-disabled"}`,"aria-label":"Send",children:(0,Ve.jsx)(_n,{size:16,color:v.trim()?"white":"#94a3b8"})})]}):null]})]})}var ph=Y(Fe(),1);Lt();var zo=Y(Fe(),1);var Ct=Y(_e(),1);function Vc(){let{addMessage:e,isTyping:t}=aa(),{config:a}=De(),[o,n]=zo.default.useState("closed"),[r,i]=zo.default.useState("visible"),s=zo.default.useRef(null),l=zo.default.useRef(null),u=a?.quick_help||{},d=u.enabled!==!1,h=zo.default.useCallback(()=>{n("closing"),setTimeout(()=>{n("closed"),i("showing"),setTimeout(()=>i("visible"),375)},375)},[]);if(zo.default.useEffect(()=>{let c=p=>{o==="open"&&s.current&&l.current&&!s.current.contains(p.target)&&!l.current.contains(p.target)&&h()};return o==="open"&&document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[o,h]),!d)return null;let x=u.prompts||["Tell me about volunteering","Where does my donation go?","How can I get involved?","What volunteer opportunities are available?","How can I make a donation?","What impact does my support have?"],v=u.title||"Common Questions:",y=u.toggle_text||"Help Menu \u2191",I=u.close_after_selection!==!1,F=()=>{i("hiding"),n("opening"),setTimeout(()=>{i("hidden"),n("open")},10)},f=c=>{t||(e({role:"user",content:c}),I&&h())};return(0,Ct.jsxs)(Ct.Fragment,{children:[(0,Ct.jsx)("div",{className:`quick-help-toggle-container ${r!=="visible"?r:""}`,children:(0,Ct.jsx)("button",{ref:l,onClick:F,className:`quick-help-toggle ${r==="hiding"?"opening":""}`,children:y})}),o!=="closed"&&(0,Ct.jsxs)("div",{ref:s,className:`quick-help-container quick-help-${o}`,children:[(0,Ct.jsx)("button",{onClick:h,className:"quick-help-close","aria-label":"Close quick help",children:(0,Ct.jsx)(zt,{size:14})}),(0,Ct.jsx)("div",{className:"quick-help-header",children:(0,Ct.jsx)("div",{className:"quick-help-title",children:v})}),(0,Ct.jsx)("div",{className:"quick-help-grid",children:x.map((c,p)=>(0,Ct.jsx)("button",{onClick:()=>f(c),className:"quick-help-button",children:c},p))})]})]})}var mo=Y(_e(),1);function Gc({brandText:e="MyRecruiter"}){let{config:t}=De(),[a,o]=(0,ph.useState)(!1),n=t?.branding?.company_logo_url||`${C.API_BASE_URL}/collateral/MyRecruiterLogo.png`;return(0,mo.jsxs)("div",{className:"chat-footer-container",children:[(0,mo.jsx)(Vc,{}),(0,mo.jsx)("div",{className:"chat-footer",children:(0,mo.jsxs)("span",{className:"chat-footer-content",children:["Powered by"," ",n&&!a?(0,mo.jsx)("img",{src:n,onError:()=>{console.log("\u274C MyRecruiter logo failed to load:",n),o(!0)},onLoad:()=>{console.log("\u2705 MyRecruiter logo loaded successfully:",n),o(!1)},alt:e,className:"chat-footer-logo"}):(0,mo.jsx)("span",{className:"chat-footer-brand-text",children:e})]})})]})}var mh=Y(Fe(),1);Lt();var CI=Y(Fe(),1);var Be=Y(_e(),1);function qc({file:e,uploadState:t="complete",onCancel:a}){let o=e?.type?.startsWith("image/"),n=u=>u?u.startsWith("image/")?"IMG":u.startsWith("video/")?"VID":u.startsWith("audio/")?"AUD":u.includes("pdf")?"PDF":u.includes("word")||u.includes("document")?"DOC":u.includes("sheet")||u.includes("excel")?"XLS":u.includes("text")?"TXT":u.includes("zip")||u.includes("rar")?"ZIP":"FILE":"FILE",r=()=>{switch(t){case"uploading":return e?.progress?`Uploading... ${e.progress}%`:"Uploading...";case"error":return"Upload failed";case"complete":return e?.size?i(e.size):"Ready";default:return"Ready"}},i=u=>u?u<1024?u+" B":u<1024*1024?Math.round(u/1024)+" KB":Math.round(u/(1024*1024))+" MB":"",s=()=>{switch(t){case"uploading":return{borderColor:"#3b82f6",backgroundColor:"#eff6ff"};case"error":return{borderColor:"#ef4444",backgroundColor:"#fef2f2"};case"complete":default:return{borderColor:"#e5e7eb",backgroundColor:"#ffffff"}}},l=()=>{switch(t){case"uploading":return"file-card file-card-uploading";case"error":return"file-card file-card-error";case"complete":default:return"file-card file-card-complete"}};return(0,Be.jsx)("div",{className:"file-preview-container",children:o&&t==="complete"?(0,Be.jsx)("div",{className:"image-preview",children:e.url?(0,Be.jsx)("img",{src:e.url,alt:e.name}):(0,Be.jsxs)("div",{className:"file-preview-placeholder",children:[(0,Be.jsx)(Mo,{size:24,className:"file-preview-placeholder-icon"}),e.name]})}):e.type?.startsWith("video/")&&t==="complete"?(0,Be.jsx)("div",{className:"video-preview",children:(0,Be.jsx)("video",{src:e.url,controls:!0})}):e.type?.includes("pdf")&&t==="complete"?(0,Be.jsx)("div",{className:"pdf-preview",children:(0,Be.jsx)("iframe",{src:e.url,title:e.name,onError:u=>{u.target.outerHTML='<div class="pdf-error-message">Unable to preview PDF. Please download the file instead.</div>'}})}):(0,Be.jsxs)("div",{className:l(),children:[t==="uploading"&&a&&(0,Be.jsx)("button",{onClick:a,className:"file-cancel-button",children:(0,Be.jsx)(zt,{size:12})}),(0,Be.jsx)("div",{className:`file-icon ${t==="error"?"file-icon-error":""}`,children:t==="error"?"\u2717":n(e.type)}),(0,Be.jsxs)("div",{className:"file-info",children:[(0,Be.jsx)("div",{className:`file-name ${t==="error"?"file-name-error":""}`,children:e.name}),(0,Be.jsx)("div",{className:`file-status ${t==="error"?"file-status-error":""}`,children:r()}),t==="uploading"&&(0,Be.jsx)("div",{className:"file-progress-bar",children:(0,Be.jsx)("div",{className:"file-progress-fill",style:{"--progress-width":e.progress?`${e.progress}%`:"10%"}})})]})]})})}var Et=Y(_e(),1),zy=e=>{let{tenant_id:t,branding:a,_cloudfront:o}=e||{};return[a?.avatar_url,a?.logo_url,a?.bot_avatar_url,a?.icon,a?.custom_icons?.bot_avatar,o?.urls?.avatar,t?`${C.API_BASE_URL}/tenants/${t}/avatar.png`:null,t?`${C.API_BASE_URL}/tenants/${t}/logo.png`:null,t?C.getLegacyS3Url(t,"FVC_logo.png"):null,t?C.getLegacyS3Url(t,"avatar.png"):null,t?C.getLegacyS3Url(t,"logo.png"):null,`${C.API_BASE_URL}/collateral/default-avatar.png`].find(r=>r&&r.trim())||`${C.API_BASE_URL}/collateral/default-avatar.png`};function jc({role:e,content:t,files:a=[],actions:o=[],uploadState:n,onCancel:r,metadata:i={},onRetry:s}){let{config:l}=De(),{addMessage:u,isTyping:d,retryMessage:h}=aa(),[x,v]=(0,mh.useState)(!1),y=e==="user",I=t||"",F=zy(l),f=L=>{if(d)return;let _=L.value||L.label;u({role:"user",content:_})},c=()=>{console.log("\u274C Avatar failed to load:",F),v(!0)},p=()=>{console.log("\u2705 Avatar loaded successfully:",F),v(!1)},w=L=>{if(!L||L.length===0)return"";let _=l?.action_chips?.short_text_threshold||16;return L.some(b=>(b.label||"").length>_)?"long-text":""};return(0,Et.jsx)("div",{className:`message ${y?"user":"bot"}`,children:(0,Et.jsxs)("div",{className:"message-content",children:[!y&&(0,Et.jsxs)("div",{className:"message-header",children:[(0,Et.jsx)("div",{className:"message-avatar",children:!x&&(0,Et.jsx)("img",{src:F,onError:c,onLoad:p,alt:"Avatar",crossOrigin:"anonymous"})}),(0,Et.jsx)("div",{className:"message-sender-name",children:l?.branding?.bot_name||l?.branding?.chat_title||"Assistant"})]}),t&&(0,Et.jsx)("div",{className:"message-text",dangerouslySetInnerHTML:{__html:I}}),i.can_retry&&!i.retry_failed&&(0,Et.jsx)("button",{className:"retry-button",onClick:()=>{s?s():h&&h(i.messageId)},disabled:d,children:"Try again"}),(e==="assistant"||e==="bot")&&o&&o.length>0&&(0,Et.jsx)("div",{className:`action-chips ${w(o)}`,children:o.slice(0,l?.action_chips?.max_display||5).map((L,_)=>(0,Et.jsx)("button",{onClick:()=>f(L),disabled:d,className:"action-chip",children:L.label},_))}),a&&a.length>0&&(0,Et.jsx)("div",{className:"file-attachments",children:a.map((L,_)=>(0,Et.jsx)(qc,{file:L,uploadState:n,onCancel:r},_))})]})})}var gh=Y(Fe(),1);Lt();var Ba=Y(_e(),1),Uy=e=>{let{tenant_id:t,branding:a,_cloudfront:o}=e||{};return[a?.avatar_url,a?.logo_url,a?.bot_avatar_url,a?.icon,a?.custom_icons?.bot_avatar,o?.urls?.avatar,t?`${C.API_BASE_URL}/tenants/${t}/avatar.png`:null,t?`${C.API_BASE_URL}/tenants/${t}/logo.png`:null,t?C.getLegacyS3Url(t,"FVC_logo.png"):null,t?C.getLegacyS3Url(t,"avatar.png"):null,t?C.getLegacyS3Url(t,"logo.png"):null,`${C.API_BASE_URL}/collateral/default-avatar.png`].find(r=>r&&r.trim())||`${C.API_BASE_URL}/collateral/default-avatar.png`};function Kc(){let{config:e}=De(),[t,a]=(0,gh.useState)(!1),o=Uy(e),n=()=>{console.log("\u274C Typing avatar failed to load:",o),a(!0)},r=()=>{console.log("\u2705 Typing avatar loaded successfully:",o),a(!1)},i=t?`url(${C.API_BASE_URL}/collateral/default-avatar.png)`:`url(${o})`;return(0,Ba.jsxs)("div",{className:"typing-indicator-wrapper",children:[(0,Ba.jsx)("div",{className:"bot-avatar",style:{"--dynamic-avatar-url":i},children:(0,Ba.jsx)("img",{src:o,onError:n,onLoad:r,className:"hidden-img",alt:"Avatar"})}),(0,Ba.jsxs)("div",{className:"typing-indicator-content",children:[(0,Ba.jsx)("div",{className:"typing-dot"}),(0,Ba.jsx)("div",{className:"typing-dot"}),(0,Ba.jsx)("div",{className:"typing-dot"})]})]})}var go=Y(Fe(),1);Zt();Lt();var k=Y(_e(),1),By=({isOpen:e,onClose:t})=>{let{conversationMetadata:a,mobileFeatures:o,clearMessages:n,messages:r}=aa(),[i,s]=(0,go.useState)("history"),[l,u]=(0,go.useState)(!1),[d,h]=(0,go.useState)(!1),[x,v]=(0,go.useState)([]),[y,I]=(0,go.useState)(!1);(0,go.useEffect)(()=>{e&&i==="history"&&F()},[e,i]);let F=async()=>{I(!0);try{let S=localStorage.getItem("picasso_conversations");if(S){let b=JSON.parse(S);v(b.slice(0,10))}}catch(S){g.logError(S,{context:"load_conversation_history"})}finally{I(!1)}},f=async()=>{if(!d){h(!0);return}u(!0);try{await n();let S=C.getTenantHashFromURL()||C.getDefaultTenantHash();(await fetch(C.getConfigUrl(S).replace("get_config","clear_state"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenant_hash:S,user_action:"manual_clear",timestamp:new Date().toISOString(),conversation_count:r.length})})).ok&&g.logInfo("\u2705 State cleared with audit logging",{messageCount:r.length,auditLogged:!0}),localStorage.removeItem("picasso_conversations"),sessionStorage.removeItem("picasso_current_conversation"),v([]),h(!1),w("Conversation history cleared","success")}catch(S){g.logError(S,{context:"clear_state_ui"}),w("Failed to clear state","error")}finally{u(!1)}},c=async()=>{try{let S={tenant_hash:C.getTenantHashFromURL()?.slice(0,8)+"...",export_date:new Date().toISOString(),current_conversation:{id:a.conversationId,message_count:r.length,messages:r.map(D=>({id:D.id,role:D.role,timestamp:D.timestamp,content_length:D.content?D.content.length:0}))},conversation_history:x.map(D=>({id:D.conversationId,created:D.metadata?.created,message_count:D.messages?.length||0,summary:D.metadata?.lastSummary?.slice(0,100)||"No summary"}))},b=new Blob([JSON.stringify(S,null,2)],{type:"application/json"}),$=URL.createObjectURL(b),O=document.createElement("a");O.href=$,O.download=`picasso-conversations-${Date.now()}.json`,O.click(),URL.revokeObjectURL($),w("Conversations exported","success")}catch(S){g.logError(S,{context:"export_conversations"}),w("Export failed","error")}},p=async()=>{try{o.isPWAInstallable&&window.deferredPrompt?(await window.deferredPrompt.prompt()).outcome==="accepted"&&w("App installed successfully","success"):w("App installation not available","info")}catch(S){g.logError(S,{context:"pwa_install"}),w("Installation failed","error")}},w=(S,b="info")=>{let $=document.createElement("div");$.className=`state-notification ${b}`,$.textContent=S,document.body.appendChild($),setTimeout(()=>{$.remove()},3e3)},L=S=>{if(!S)return"Unknown date";try{return new Date(S).toLocaleDateString()}catch{return"Invalid date"}},_=S=>{if(!S.messages||S.messages.length<2)return"Single message";let b=S.messages[0],$=S.messages[S.messages.length-1];if(b.timestamp&&$.timestamp){let O=new Date($.timestamp)-new Date(b.timestamp),D=Math.round(O/6e4);return D>0?`${D} min`:"Less than a minute"}return"Unknown duration"};return e?(0,k.jsx)("div",{className:"state-management-overlay",children:(0,k.jsxs)("div",{className:"state-management-panel",children:[(0,k.jsxs)("div",{className:"state-panel-header",children:[(0,k.jsx)("h3",{children:"Chat Settings"}),(0,k.jsx)("button",{onClick:t,className:"state-panel-close",children:(0,k.jsx)(zt,{size:20})})]}),(0,k.jsxs)("div",{className:"state-panel-tabs",children:[(0,k.jsxs)("button",{className:`state-tab ${i==="history"?"active":""}`,onClick:()=>s("history"),children:[(0,k.jsx)(Cn,{size:16}),"History"]}),(0,k.jsxs)("button",{className:`state-tab ${i==="settings"?"active":""}`,onClick:()=>s("settings"),children:[(0,k.jsx)(Fo,{size:16}),"Settings"]}),(0,k.jsxs)("button",{className:`state-tab ${i==="data"?"active":""}`,onClick:()=>s("data"),children:[(0,k.jsx)(kn,{size:16}),"Data"]})]}),(0,k.jsxs)("div",{className:"state-panel-content",children:[i==="history"&&(0,k.jsxs)("div",{className:"state-tab-content",children:[(0,k.jsxs)("div",{className:"current-conversation",children:[(0,k.jsx)("h4",{children:"Current Conversation"}),(0,k.jsxs)("div",{className:"conversation-stats",children:[(0,k.jsxs)("div",{className:"stat",children:[(0,k.jsx)(Hr,{size:16}),(0,k.jsxs)("span",{children:[r.length," messages"]})]}),a.conversationId&&(0,k.jsxs)("div",{className:"stat",children:[(0,k.jsx)(Ur,{size:16}),(0,k.jsxs)("span",{children:["ID: ",a.conversationId.slice(-8)]})]})]})]}),(0,k.jsxs)("div",{className:"conversation-history",children:[(0,k.jsx)("h4",{children:"Recent Conversations"}),y?(0,k.jsxs)("div",{className:"loading-state",children:[(0,k.jsx)(En,{size:16,className:"spin"}),"Loading history..."]}):x.length>0?(0,k.jsx)("div",{className:"history-list",children:x.map((S,b)=>(0,k.jsxs)("div",{className:"history-item conversation-entry",children:[(0,k.jsxs)("div",{className:"conversation-header",children:[(0,k.jsx)("span",{className:"conversation-date",children:L(S.metadata?.created)}),(0,k.jsxs)("span",{className:"message-count",children:[S.messages?.length||0," messages"]})]}),(0,k.jsx)("div",{className:"conversation-type",children:_(S)}),S.metadata?.lastSummary&&(0,k.jsxs)("div",{className:"history-summary",children:[S.metadata.lastSummary.slice(0,60),"..."]})]},S.conversationId||b))}):(0,k.jsxs)("div",{className:"empty-state",children:[(0,k.jsx)(Cn,{size:32}),(0,k.jsx)("p",{children:"No conversation history found"})]})]})]}),i==="settings"&&(0,k.jsxs)("div",{className:"state-tab-content",children:[(0,k.jsxs)("div",{className:"settings-section",children:[(0,k.jsx)("h4",{children:"Connection Status"}),(0,k.jsx)("div",{className:"status-item",children:navigator.onLine?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Kr,{size:16,className:"status-online"}),(0,k.jsx)("span",{children:"Online"})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(jr,{size:16,className:"status-offline"}),(0,k.jsx)("span",{children:"Offline"})]})}),o.isOfflineCapable&&(0,k.jsx)("div",{className:"status-feature",children:"\u2705 Offline conversation sync enabled"})]}),o.isPWAInstallable&&(0,k.jsxs)("div",{className:"settings-section",children:[(0,k.jsx)("h4",{children:"App Installation"}),(0,k.jsxs)("button",{onClick:p,className:"pwa-install-button",children:[(0,k.jsx)(Gr,{size:16}),"Install as App"]}),(0,k.jsx)("p",{className:"pwa-description",children:"Install Picasso Chat for a native app experience with offline support."})]}),o.isMobileSafari&&(0,k.jsxs)("div",{className:"settings-section",children:[(0,k.jsx)("h4",{children:"Mobile Features"}),(0,k.jsxs)("div",{className:"feature-list",children:[(0,k.jsx)("div",{className:"feature-item",children:"\u2705 iOS Safari optimizations active"}),(0,k.jsx)("div",{className:"feature-item",children:"\u2705 Touch-friendly interface"}),(0,k.jsx)("div",{className:"feature-item",children:"\u2705 Keyboard handling optimized"})]})]}),(0,k.jsxs)("div",{className:"settings-section danger-section",children:[(0,k.jsx)("h4",{children:"Reset Conversation"}),d?(0,k.jsxs)("div",{className:"clear-confirm",children:[(0,k.jsx)("p",{children:"\u26A0\uFE0F This will permanently delete all conversation history."}),(0,k.jsxs)("div",{className:"confirm-buttons",children:[(0,k.jsxs)("button",{onClick:f,className:"confirm-clear",disabled:l,children:[l?(0,k.jsx)(En,{size:16,className:"spin"}):(0,k.jsx)(Tn,{size:16}),l?"Clearing...":"Confirm Delete"]}),(0,k.jsx)("button",{onClick:()=>h(!1),className:"cancel-clear",children:"Cancel"})]})]}):(0,k.jsxs)("button",{onClick:f,className:"clear-button",children:[(0,k.jsx)(Tn,{size:16}),"Clear All Messages"]}),(0,k.jsx)("p",{className:"clear-description",children:"This action is logged for audit compliance and cannot be undone."})]})]}),i==="data"&&(0,k.jsxs)("div",{className:"state-tab-content",children:[(0,k.jsxs)("div",{className:"settings-section",children:[(0,k.jsx)("h4",{children:"Export Conversation Data"}),(0,k.jsxs)("button",{onClick:c,className:"export-button",children:[(0,k.jsx)(kn,{size:16}),"Download Conversations"]}),(0,k.jsx)("p",{className:"export-description",children:"Export conversation metadata and statistics (content not included for privacy)."})]}),(0,k.jsxs)("div",{className:"settings-section",children:[(0,k.jsx)("h4",{children:"Data Management"}),(0,k.jsxs)("div",{className:"data-stats",children:[(0,k.jsxs)("div",{className:"data-stat",children:[(0,k.jsx)("strong",{children:"Current Session:"})," ",r.length," messages"]}),(0,k.jsx)("div",{className:"data-stat storage-info",children:(0,k.jsxs)("div",{className:"storage-details",children:[(0,k.jsx)("div",{className:"info-label",children:"Storage Type:"}),(0,k.jsx)("div",{className:"info-value",children:"Session-based"}),(0,k.jsx)("div",{className:"info-description",children:"(cleared on browser close)"})]})}),(0,k.jsxs)("div",{className:"data-stat",children:[(0,k.jsx)("strong",{children:"History:"})," ",x.length," past conversations"]})]})]}),(0,k.jsxs)("div",{className:"settings-section",children:[(0,k.jsx)("h4",{children:"Privacy & Compliance"}),(0,k.jsxs)("div",{className:"privacy-info",children:[(0,k.jsx)("p",{children:"\u2705 All data is encrypted in transit"}),(0,k.jsx)("p",{children:"\u2705 No personal information stored permanently"}),(0,k.jsx)("p",{children:"\u2705 Audit logging for compliance"}),(0,k.jsx)("p",{children:"\u2705 Data retention: 30 minutes session storage"})]})]})]})]})]})}):null},hh=By;var Ie=Y(_e(),1);function Hy(){let{messages:e,isTyping:t}=aa(),{config:a}=De();console.log("\u{1F50D} ChatWidget config:",a),console.log("\u{1F50D} ChatWidget config type:",typeof a),console.log("\u{1F50D} ChatWidget config keys:",a?Object.keys(a):"no config"),console.log("\u{1F3A8} ChatWidget component rendering..."),console.log("\u{1F3A8} ChatWidget messages:",e?.length||0),console.log("\u{1F3A8} ChatWidget isTyping:",t),Hc(a),(0,le.useEffect)(()=>{let A=()=>{console.log("\u{1F4E1} ChatWidget received picasso-open-chat event"),n(!0)},M=()=>{console.log("\u{1F4E1} ChatWidget received picasso-close-chat event"),n(!1)};return window.addEventListener("picasso-open-chat",A),window.addEventListener("picasso-close-chat",M),()=>{window.removeEventListener("picasso-open-chat",A),window.removeEventListener("picasso-close-chat",M)}},[]);let[o,n]=(0,le.useState)(()=>{let A=a?.widget_behavior||{};if(!A.remember_state)return A.start_open||!1;try{let M=sessionStorage.getItem("picasso_chat_state"),q=sessionStorage.getItem("picasso_last_activity");if(M!==null&&q){let ue=Date.now()-parseInt(q),ee=1800*1e3;if(ue<ee)return JSON.parse(M)}}catch(M){console.warn("Failed to parse saved chat state:",M)}return A.start_open||!1}),[r,i]=(0,le.useState)(""),[s,l]=(0,le.useState)(0),[u,d]=(0,le.useState)(!1),[h,x]=(0,le.useState)(!1),[v,y]=(0,le.useState)(!1),[I,F]=(0,le.useState)(!1),[f,c]=(0,le.useState)(()=>{if(a?.widget_behavior?.remember_state)try{let A=sessionStorage.getItem("picasso_chat_state"),M=sessionStorage.getItem("picasso_last_activity"),q=sessionStorage.getItem("picasso_last_read_index");if(A!==null&&M&&q!==null){let ue=Date.now()-parseInt(M),ee=1800*1e3;if(ue<ee)return parseInt(q)||0}}catch(A){console.warn("Failed to parse saved read index:",A)}return 0}),[p,w]=(0,le.useState)(!1),L=(0,le.useRef)(!1),_=(A,M={})=>{window.parent&&window.parent!==window&&window.parent.postMessage({type:"PICASSO_EVENT",event:A,payload:M},"*")},S=()=>{let A=!o;if(n(A),A?document.body.classList.add("chat-open"):document.body.classList.remove("chat-open"),_(A?"CHAT_OPENED":"CHAT_CLOSED"),_("SIZE_CHANGE",{isOpen:A,size:A?{width:360,height:640}:{width:90,height:90}}),a?.widget_behavior?.remember_state)try{sessionStorage.setItem("picasso_chat_state",JSON.stringify(A)),sessionStorage.setItem("picasso_last_activity",Date.now().toString()),A||sessionStorage.setItem("picasso_last_read_index",f.toString())}catch(M){console.warn("Failed to save chat state on toggle:",M)}};(0,le.useEffect)(()=>{let A=a?.widget_behavior||{};if(!o&&A.auto_open_delay>0){let M=!1;if(A.remember_state)try{let q=sessionStorage.getItem("picasso_chat_state"),ue=sessionStorage.getItem("picasso_last_activity");if(q!==null&&ue){let ee=Date.now()-parseInt(ue),$t=1800*1e3;ee<$t&&(M=JSON.parse(q)===!1)}}catch(q){console.warn("Failed to read saved chat state for auto-open check",q)}if(!M){let q=setTimeout(()=>{if(n(!0),A.remember_state)try{sessionStorage.setItem("picasso_chat_state","true"),sessionStorage.setItem("picasso_last_activity",Date.now().toString())}catch(ue){console.warn("Failed to save chat state on auto-open:",ue)}},A.auto_open_delay*1e3);return()=>clearTimeout(q)}}},[a?.widget_behavior,o,a?.tenant_id]),(0,le.useEffect)(()=>{o?document.body.classList.add("chat-open"):document.body.classList.remove("chat-open")},[o]),(0,le.useEffect)(()=>{u?(document.body.classList.add("callout-visible"),document.body.setAttribute("data-callout-visible","true")):(document.body.classList.remove("callout-visible"),document.body.removeAttribute("data-callout-visible"))},[u]),(0,le.useEffect)(()=>{!a?.features?.photo_uploads&&v&&y(!1)},[a?.features?.photo_uploads,v]);let b=(0,le.useRef)(null),$=(0,le.useRef)(null),O=(0,le.useRef)(!1),D=a?.chat_title||a?.branding?.chat_title||"Chat",G=()=>{if($.current){let A=b.current;if(A){A.style.scrollBehavior="auto";let q=$.current.offsetTop-A.offsetTop,ue=A.scrollTop,ee=q-ue,$t=800,pa=null,$a=ma=>{pa||(pa=ma);let ho=ma-pa,Uo=Math.min(ho/$t,1),ga=1-Math.pow(1-Uo,3);A.scrollTop=ue+ee*ga,ho<$t?requestAnimationFrame($a):A.style.scrollBehavior="smooth"};requestAnimationFrame($a)}}};(0,le.useEffect)(()=>{if(!o&&b.current){let A=b.current.scrollTop;sessionStorage.setItem("picasso_scroll_position",A.toString())}},[o]),(0,le.useEffect)(()=>{if(o&&b.current&&!O.current&&e.length>1){let A=sessionStorage.getItem("picasso_scroll_position"),M=sessionStorage.getItem("picasso_messages");A&&setTimeout(()=>{b.current&&(b.current.scrollTop=parseInt(A),O.current=!0)},100)}},[o,e.length]),(0,le.useEffect)(()=>{if(o){if(l(0),c(e.length),w(!0),a?.widget_behavior?.remember_state)try{sessionStorage.setItem("picasso_last_read_index",e.length.toString())}catch(A){console.warn("Failed to save last read index:",A)}}else{let A=e.slice(f).filter(M=>M.role==="assistant"||M.role==="bot");A.length>0&&l(A.length)}},[o,e.length]),(0,le.useEffect)(()=>{if(!o&&e.length>f){let M=e.slice(f).filter(q=>q.role==="assistant"||q.role==="bot");M.length>0&&l(M.length)}},[e,o,f]),(0,le.useEffect)(()=>{e?.length>0&&setTimeout(G,100)},[e]),(0,le.useEffect)(()=>{t&&setTimeout(G,100)},[t]),(0,le.useEffect)(()=>{o&&setTimeout(G,200)},[o]);let j=a?.features?.callout||{},ce=typeof j=="object"?j.enabled!==!1:a?.features?.callout!==!1,re=j.text||a?.calloutText||a?.callout_text||"Hi! \u{1F44B} Need help? I'm here to assist you.",xt=j.delay||1e3,Ha=j.auto_dismiss||!1,Ye=j.dismiss_timeout||3e4;(0,le.useEffect)(()=>{if(!o&&ce&&!h&&!p){let A=setTimeout(()=>{d(!0)},xt);return()=>clearTimeout(A)}else d(!1)},[o,ce,h,p,xt]),(0,le.useEffect)(()=>{if(u&&Ha&&Ye>0&&!L.current){let A=setTimeout(()=>{console.log("\u{1F550} Callout auto-dismissing after timeout"),d(!1),L.current=!0},Ye);return()=>clearTimeout(A)}},[u,Ha,Ye]);let Ht=()=>{console.log("\u274C Callout manually closed by user"),d(!1),x(!0)};(0,le.useEffect)(()=>{if(window.parent&&window.parent!==window){let A={visible:u,width:u?300:0,height:u?60:0,text:re,enabled:ce};console.log("\u{1F4E2} Notifying parent of callout state change:",A),_("CALLOUT_STATE_CHANGE",{calloutConfig:A})}},[u,re,ce]),(0,le.useEffect)(()=>{o&&p&&(L.current=!1,x(!0))},[o,p]),(0,le.useEffect)(()=>{window.parent&&window.parent!==window&&_("SIZE_CHANGE",{isOpen:o,size:o?{width:360,height:640}:{width:90,height:90},initial:!0})},[]),console.log("ChatWidget render - state:",{isOpen:o,calloutEnabled:ce,calloutDismissed:h,hasOpenedChat:p,showCallout:u,calloutText:re,calloutAutoDismissed:L.current,unreadCount:s,lastReadMessageIndex:f,totalMessages:e.length,tenant_id:a?.tenant_id,chat_title:D,css_variables_applied:!!a,widget_behavior:a?.widget_behavior,calloutConfig:{fullConfig:j,textFromConfig:j.text,textFromRoot:a?.calloutText,textFromLegacy:a?.callout_text},windowWidth:window.innerWidth,isIframe:document.body.getAttribute("data-iframe"),shouldShowToggle:window.innerWidth>=768||!o,shouldShowChat:o});let xe=a?.features?.uploads||a?.features?.voice;return a?(0,Ie.jsxs)("div",{className:"chat-widget-root",children:[(0,Ie.jsxs)("div",{className:"chat-toggle-wrapper",children:[(0,Ie.jsx)("button",{onClick:()=>{console.log(`\u{1F504} Widget toggle clicked: ${o?"closing":"opening"}`),S()},className:"chat-toggle-button",children:(0,Ie.jsx)($r,{size:24})}),!o&&s>0&&(0,Ie.jsx)("div",{className:"chat-notification-badge",children:s}),u&&(0,Ie.jsx)("div",{className:`chat-callout ${u?"visible":""}`,children:(0,Ie.jsxs)("div",{className:"chat-callout-header",children:[(0,Ie.jsx)("div",{className:"chat-callout-text",dangerouslySetInnerHTML:{__html:re}}),(0,Ie.jsx)("button",{onClick:Ht,className:"chat-callout-close",children:(0,Ie.jsx)(zt,{size:14})})]})})]}),o&&(0,Ie.jsxs)("div",{className:"chat-container","data-input-mode":xe?"double":"single",children:[(0,Ie.jsx)($c,{onClose:()=>{console.log("\u{1F504} Header close clicked - calling handleToggle"),S()},onOpenSettings:()=>F(!0)}),(0,Ie.jsxs)("div",{ref:b,className:"chat-window",children:[(0,Ie.jsx)("div",{className:"chat-header-spacer"}),e.map((A,M)=>{let q=M===e.length-1;return(0,Ie.jsx)("div",{ref:q?$:null,children:(0,Ie.jsx)(jc,{role:A.role,content:A.content,files:A.files,actions:A.actions,uploadState:A.uploadState,onCancel:A.onCancel})},A.id||M)}),t&&(0,Ie.jsx)(Kc,{})]}),(0,Ie.jsxs)("div",{className:"chat-footer-container",children:[(0,Ie.jsx)("div",{className:"input-container",children:(0,Ie.jsx)(Wc,{input:r,setInput:i,onPlusClick:()=>y(!0)})}),(0,Ie.jsx)(Gc,{brandText:a?.branding?.brandText||"AI"}),v&&a?.features?.photo_uploads!==void 0&&(0,Ie.jsx)(Xr,{onClose:()=>y(!1)})]})]}),(0,Ie.jsx)(hh,{isOpen:I,onClose:()=>F(!1)})]}):(0,Ie.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#666",fontFamily:"system-ui"},children:"Loading..."})}var xh=Hy;Lt();var vh=Y(Fe(),1);Zt();Lt();var Tt=Y(_e(),1),Yc=class extends vh.default.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null,errorCount:0,lastErrorTime:null},this.mountTime=performance.now()}static getDerivedStateFromError(t){return{hasError:!0,lastErrorTime:Date.now()}}componentDidCatch(t,a){let o=this.state.errorCount+1,n=g.logError(t,{context:"ErrorBoundary",errorInfo:a,errorCount:o,componentStack:a.componentStack,tenantHash:window.PicassoConfig?.tenant||"unknown",widgetLoadTime:performance.now()-this.mountTime,iframeMode:document.body.getAttribute("data-iframe")==="true"});this.setState({error:t,errorInfo:a,errorCount:o}),this.reportErrorToLambda(t,a,n);let r=performance.now()-this.mountTime;r>1e3&&Jt.measure("slow_widget_load",()=>{g.logWarning("Slow widget load detected",{loadTime:r,threshold:1e3,tenantHash:window.PicassoConfig?.tenant||"unknown"})})}reportErrorToLambda=async(t,a,o)=>{C.isDevelopment()&&console.error("ErrorBoundary caught:",{error:t,errorInfo:a,errorEntry:o})};handleReload=()=>{g.logInfo("User initiated error recovery reload",{errorCount:this.state.errorCount,tenantHash:window.PicassoConfig?.tenant||"unknown"}),this.setState({hasError:!1,error:null,errorInfo:null}),window.parent&&window.parent!==window&&window.parent.postMessage({type:"PICASSO_EVENT",event:"ERROR_RECOVERY_RELOAD",payload:{errorCount:this.state.errorCount}},"*"),window.location.reload()};render(){return this.state.hasError?(0,Tt.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",padding:"20px",fontFamily:"system-ui, -apple-system, sans-serif",backgroundColor:"#f9fafb",color:"#374151",textAlign:"center"},children:(0,Tt.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"24px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",maxWidth:"400px",width:"100%"},children:[(0,Tt.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{margin:"0 auto 16px",color:"#ef4444"},children:[(0,Tt.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,Tt.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,Tt.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),(0,Tt.jsx)("h2",{style:{fontSize:"18px",fontWeight:"600",margin:"0 0 8px 0",color:"#111827"},children:"Something went wrong"}),(0,Tt.jsx)("p",{style:{fontSize:"14px",margin:"0 0 20px 0",color:"#6b7280",lineHeight:"1.5"},children:"We're sorry, but the chat widget encountered an error. Please try reloading to continue."}),(0,Tt.jsx)("button",{onClick:this.handleReload,style:{backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",padding:"10px 20px",fontSize:"14px",fontWeight:"500",cursor:"pointer",width:"100%",transition:"background-color 0.2s"},onMouseEnter:t=>t.target.style.backgroundColor="#2563eb",onMouseLeave:t=>t.target.style.backgroundColor="#3b82f6",children:"Reload Chat"}),C.isDevelopment()&&this.state.error&&(0,Tt.jsxs)("details",{style:{marginTop:"20px",fontSize:"12px",textAlign:"left",color:"#6b7280"},children:[(0,Tt.jsx)("summary",{style:{cursor:"pointer",marginBottom:"8px"},children:"Error Details (Development Only)"}),(0,Tt.jsxs)("pre",{style:{backgroundColor:"#f3f4f6",padding:"8px",borderRadius:"4px",overflow:"auto",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:[this.state.error.toString(),this.state.errorInfo&&this.state.errorInfo.componentStack]})]})]})}):this.props.children}},yh=Yc;Zt();Zt();Lt();var Xc=class{constructor(){this.metrics=new Map,this.thresholds={widgetLoad:500,configFetch:200,firstMessage:1e3,chatResponse:3e3,renderTime:100}}track(t,a,o={}){let n=this.thresholds[t],r=n&&a>n,i={name:t,value:a,threshold:n,isSlowOperation:r,timestamp:new Date().toISOString(),...o};return this.metrics.set(`${t}_${Date.now()}`,i),r&&g.logWarning(`Slow ${t} detected`,{value:a,threshold:n,exceedance:a-n,percentage:((a/n-1)*100).toFixed(1)+"%",...o}),C.isProduction()&&C.PERFORMANCE_MONITORING&&this.reportMetric(i),i}startTiming(t){let a=performance.now();return this.metrics.set(`${t}_start`,a),a}endTiming(t,a={}){let o=this.metrics.get(`${t}_start`);if(!o)return console.warn(`No start time found for operation: ${t}`),null;let n=performance.now()-o;return this.metrics.delete(`${t}_start`),this.track(t,n,a)}getAllMetrics(){let t=[];return this.metrics.forEach((a,o)=>{o.endsWith("_start")||t.push(a)}),t}getSummary(){let t=this.getAllMetrics(),a={totalMetrics:t.length,slowOperations:t.filter(n=>n.isSlowOperation).length,averageByType:{}},o={};return t.forEach(n=>{o[n.name]||(o[n.name]=[]),o[n.name].push(n.value)}),Object.keys(o).forEach(n=>{let r=o[n];a.averageByType[n]={count:r.length,average:r.reduce((i,s)=>i+s,0)/r.length,min:Math.min(...r),max:Math.max(...r),threshold:this.thresholds[n]}}),a}reportMetric(t){try{let a=C.ERROR_REPORTING_ENDPOINT;if(!a)return;let o=window.PicassoConfig?.tenant||window.PicassoConfig?.tenant_id||"unknown";fetch(a,{method:"POST",headers:{"Content-Type":"application/json","x-tenant-id":o},body:JSON.stringify({type:"performance_metric",metric:t,tenantHash:o,environment:C.ENVIRONMENT,timestamp:new Date().toISOString(),source:"picasso-widget"}),credentials:"omit"}).catch(()=>{})}catch{}}clear(){this.metrics.clear()}},An=new Xc;typeof window<"u"&&window.performance&&window.addEventListener("load",()=>{let e=performance.getEntriesByType("navigation")[0];e&&An.track("pageLoad",e.loadEventEnd-e.fetchStart,{domContentLoaded:e.domContentLoadedEventEnd-e.fetchStart,domInteractive:e.domInteractive-e.fetchStart})});var Rn=Y(_e(),1),ne={iframeStartTime:performance.now(),configStartTime:null,configEndTime:null,iframeReadyTime:null,firstMessageTime:null,renderStartTime:null,renderEndTime:null};window.performanceMetrics=ne;window.PicassoPerformance=An;_g();function $y(){let e=[];if(window.parent!==window&&document.referrer)try{let t=new URL(document.referrer);e.push(t.origin)}catch(t){console.warn("Could not parse referrer URL:",t)}return(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&(e.push("http://localhost:5173"),e.push("http://localhost:3000"),e.push("http://localhost:8000"),e.push("http://127.0.0.1:5173"),e.push("http://127.0.0.1:3000"),e.push("http://127.0.0.1:8000")),e.push("https://myrecruiter.ai"),e.push("https://www.myrecruiter.ai"),e.push("https://app.myrecruiter.ai"),e}function Qc(e){return $y().includes(e)}function Wy(){ne.iframeReadyTime=performance.now();let e=ne.iframeReadyTime-ne.iframeStartTime;if(An.track("widgetLoad",e,{tenantHash:window.PicassoConfig?.tenant||"unknown",iframeMode:!0}),console.log(`\u26A1 Iframe loaded in ${e.toFixed(2)}ms ${e<500?"\u2705":"\u26A0\uFE0F (PRD target: <500ms)"}`),window.parent&&window.parent!==window){let t=document.referrer?new URL(document.referrer).origin:"*";window.parent.postMessage({type:"PICASSO_IFRAME_READY",performance:{loadTime:e,configLoadTime:ne.configEndTime?ne.configEndTime-ne.configStartTime:null}},t)}}function Jc(e,t={}){if(window.parent&&window.parent!==window){let a=document.referrer?new URL(document.referrer).origin:"*";window.parent.postMessage({type:"PICASSO_EVENT",event:e,payload:t},a)}}function Vy(){window.addEventListener("message",e=>{if(!Qc(e.origin)){console.error("\u274C Rejected message from untrusted origin:",e.origin);return}if(e.data.type==="PICASSO_COMMAND"){let{action:t,payload:a}=e.data;switch(t){case"OPEN_CHAT":console.log("\u{1F4E1} Received OPEN_CHAT command"),document.body.classList.add("chat-open"),window.dispatchEvent(new CustomEvent("picasso-open-chat")),Jc("CHAT_OPENED");break;case"CLOSE_CHAT":console.log("\u{1F4E1} Received CLOSE_CHAT command"),document.body.classList.remove("chat-open"),window.dispatchEvent(new CustomEvent("picasso-close-chat")),Jc("CHAT_CLOSED");break;case"UPDATE_CONFIG":console.log("\u{1F4E1} Received UPDATE_CONFIG command:",a);break;case"SIZE_CHANGE":console.log("\u{1F4E1} Received SIZE_CHANGE command:",a),a?.size&&(document.body.classList.remove("iframe-mobile","iframe-tablet","iframe-desktop"),document.body.classList.add(`iframe-${a.size}`),document.body.setAttribute("data-iframe-size",a.size),a.isMobile&&document.body.setAttribute("data-mobile","true"),a.isTablet&&document.body.setAttribute("data-tablet","true"));break;case"MINIMIZE":console.log("\u{1F4E1} Received MINIMIZE command"),document.body.classList.remove("chat-open"),Jc("CHAT_CLOSED");break;default:console.log("\u2753 Unknown command:",t)}}if(e.data.type==="PICASSO_INIT"){if(!Qc(e.origin)){console.error("\u274C Rejected PICASSO_INIT from untrusted origin:",e.origin);return}console.log("\u{1F4E1} Received PICASSO_INIT from parent:",e.data),e.data.tenantHash&&console.log("\u2705 Parent confirmed tenant hash:",e.data.tenantHash)}if(e.data.type==="PICASSO_HEALTH_CHECK"){if(!Qc(e.origin)){console.error("\u274C Rejected PICASSO_HEALTH_CHECK from untrusted origin:",e.origin);return}let t={type:"PICASSO_HEALTH_RESPONSE",status:{iframeAlive:!0,configLoaded:!!window.PicassoConfig,tenantHash:window.PicassoConfig?.tenant||window.PicassoConfig?.tenant_id,performanceMetrics:{iframeLoadTime:ne.iframeReadyTime?ne.iframeReadyTime-ne.iframeStartTime:null,configLoadTime:ne.configEndTime?ne.configEndTime-ne.configStartTime:null,totalLoadTime:ne.renderEndTime?ne.renderEndTime-ne.iframeStartTime:null},timestamp:new Date().toISOString()}},a=document.referrer?new URL(document.referrer).origin:"*";window.parent.postMessage(t,a)}})}function wh(){Jt.startTimer("widget_initialization");let e=document.getElementById("root");if(!e){console.error("Picasso Widget: Root container not found"),Jt.endTimer("widget_initialization");return}try{console.log("\u{1F680} DOM ready, setting up iframe context..."),ne.renderStartTime=performance.now(),document.body.setAttribute("data-iframe","true"),document.documentElement.setAttribute("data-iframe-context","true"),console.log("\u2705 Set data-iframe-context on HTML element for maximum CSS specificity");let a=new URLSearchParams(window.location.search).get("t")||C.getDefaultTenantHash();if(console.log("\u{1F511} Using tenant hash:",a),window.PicassoConfig||(window.PicassoConfig={mode:"widget",tenant:a,tenant_id:a,iframe_mode:!1},console.log("\u2705 Set iframe config to use live API with tenant hash:",a)),window.fetchTenantConfig=async()=>{ne.configStartTime=performance.now();try{let s=`picasso_config_${a}`,l=sessionStorage.getItem(s);if(l)try{let I=JSON.parse(l),F=Date.now()-(I._cached||0);if(F<3e5){ne.configEndTime=performance.now();let f=ne.configEndTime-ne.configStartTime;return An.track("configFetch",f,{tenantHash:a,fromCache:!0,cacheAge:F}),console.log(`\u26A1 Config loaded from cache in ${f.toFixed(2)}ms \u2705`),I}}catch{console.warn("Invalid cached config, fetching fresh")}let u=C.getConfigUrl(a);console.log("\u{1F504} Fetching config from:",u);let d=new AbortController,h=setTimeout(()=>d.abort(),3e3),x=await fetch(u,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},mode:"cors",credentials:"omit",cache:"no-cache",signal:d.signal});if(clearTimeout(h),!x.ok)throw new Error(`HTTP ${x.status}: ${x.statusText}`);let v=await x.json();v._cached=Date.now();try{sessionStorage.setItem(s,JSON.stringify(v))}catch(I){console.warn("Failed to cache config:",I)}ne.configEndTime=performance.now();let y=ne.configEndTime-ne.configStartTime;return An.track("configFetch",y,{tenantHash:a,fromCache:!1}),console.log(`\u26A1 Config fetched in ${y.toFixed(2)}ms ${y<200?"\u2705":"\u26A0\uFE0F (PRD target: <200ms)"}`),v}catch(s){ne.configEndTime=performance.now();let l=ne.configEndTime-ne.configStartTime;return console.error(`\u274C Failed to fetch config in ${l.toFixed(2)}ms:`,s),{tenant_id:a,tenant_hash:a,chat_title:"Chat Assistant",welcome_message:"Hello! How can I help you today?",branding:{primary_color:"#3b82f6",background_color:"#ffffff",font_color:"#374151",chat_title:"Chat Assistant"},features:{quick_help:{enabled:!0},action_chips:{enabled:!0},callout:{enabled:!0}},widget_behavior:{auto_open:!1,auto_open_delay:3}}}},!document.querySelector('script[src*="widget.js"]')){let s=document.createElement("script");s.setAttribute("data-tenant",a),document.head.appendChild(s),console.log("\u2705 Added compatibility script tag with tenant hash:",a)}document.documentElement.style.height="100%",document.body.style.height="100%",document.body.style.margin="0",document.body.style.padding="0",e.style.height="100%",e.style.display="flex",e.style.flexDirection="column",e.innerHTML='<div style="display: flex; align-items: center; justify-content: center; height: 100%; background: #f0f0f0; color: #333; font-family: system-ui; flex-direction: column; gap: 10px;"><div>\u{1F3A8} Loading Picasso...</div><div style="font-size: 12px; opacity: 0.7;">Iframe mode detected</div></div>';let n=document.body.getAttribute("data-iframe");console.log("\u2705 data-iframe attribute set to:",n),console.log("\u2705 Iframe height setup complete"),(0,Sh.createRoot)(e).render((0,Rn.jsx)(yh,{children:(0,Rn.jsx)(Qm,{children:(0,Rn.jsx)(uh,{children:(0,Rn.jsx)(zs,{children:(0,Rn.jsx)(xh,{})})})})})),console.log("\u2705 Picasso Widget iframe initialized successfully"),ne.renderEndTime=performance.now(),Jt.endTimer("widget_initialization");let i={totalLoadTime:ne.renderEndTime-ne.iframeStartTime,renderTime:ne.renderEndTime-ne.renderStartTime,configLoadTime:ne.configEndTime?ne.configEndTime-ne.configStartTime:null};i.totalLoadTime>500&&Jt.measure("slow_iframe_load",()=>{console.warn(`\u26A0\uFE0F Slow iframe load detected: ${i.totalLoadTime.toFixed(2)}ms (target: <500ms)`)}),console.log("\u{1F4CA} Performance metrics:",i),Wy(),Vy()}catch(t){console.error("\u274C Error initializing Picasso Widget:",t),e.innerHTML=`<div style="display: flex; align-items: center; justify-content: center; height: 100%; background: #ffe6e6; color: #d63031; font-family: system-ui; text-align: center; padding: 20px;">
      <div>
        <h3>Picasso Widget Error</h3>
        <p>${t.message}</p>
        <small>Check console for details</small>
      </div>
    </div>`}}function Gy(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",wh):(document.readyState==="interactive"||document.readyState==="complete")&&setTimeout(wh,10)}Gy();
/*! Bundled license information:

react/cjs/react.production.min.js:
  (**
   * @license React
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (**
   * @license React
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (**
   * @license React
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

dompurify/dist/purify.es.mjs:
  (*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE *)

react/cjs/react-jsx-runtime.production.min.js:
  (**
   * @license React
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
